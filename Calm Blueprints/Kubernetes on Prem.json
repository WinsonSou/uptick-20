{"status": {"state": "ACTIVE", "message_list": [], "description": "Accessibility: \n* https://[CONTROLLER_IP]:6443\n* Admin certificates are available in controller node $HOME/CA\n", "resources": {"service_definition_list": [{"singleton": false, "uuid": "427f5e41-d963-474c-8873-c1651717271c", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "9d330229-6452-4732-98e7-dce1361a0968", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "GenerateEncryptionKey", "uuid": "d85fc0ec-e7ee-4347-b091-139bcee8182f"}, {"kind": "app_task", "name": "ConfigureController", "uuid": "7f2bd1e0-3dc7-4c5a-b3b5-f318e6ef24ce"}], "name": "16c98103_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "GenerateEncryptionKey", "uuid": "d85fc0ec-e7ee-4347-b091-139bcee8182f"}, "edge_type": "user_defined", "type": "", "uuid": "11f5a7a7-2962-4b15-8f62-2ca42555f307", "to_task_reference": {"kind": "app_task", "name": "ConfigureController", "uuid": "7f2bd1e0-3dc7-4c5a-b3b5-f318e6ef24ce"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "7f377ae9-0cce-48af-b4e6-0a9d900c8b97"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "GenerateEncryptionKey", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\n\nENCRYPTION_KEY=$(head -c 32 /dev/urandom | base64)\necho \"kind: EncryptionConfig\napiVersion: v1\nresources:\n  - resources:\n      - secrets\n    providers:\n      - aescbc:\n          keys:\n            - name: key1\n              secret: ${ENCRYPTION_KEY}\n      - identity: {}\" | tee encryption-config.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "d85fc0ec-e7ee-4347-b091-139bcee8182f"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ConfigureController", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nETCD_SERVER_PORT=2379\nETCD_CLIENT_PORT=2380\nMASTER_API_PORT=8080\nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\n\ncount=0\nfor i in $(echo \"@@{address}@@\" | tr \",\" \"\\n\"); do\n  CON+=\"controller${count}=https://${i}:${ETCD_CLIENT_PORT}\",\n  ETCD+=\"https://${i}:${ETCD_SERVER_PORT}\",\n  count=$((count+1))\ndone\nALL_CONTROLLERS=$(echo $CON | sed  's/,$//')\nETCD_SERVERS=$(echo $ETCD | sed  's/,$//')\n\n# -*- Bootstrapping a H/A etcd cluster.\nETCD_NAME=controller@@{calm_array_index}@@\nsudo mkdir -p /etc/etcd/ /var/lib/etcd\ntar -xvf etcd-v3.2.6-linux-amd64.tar.gz\nsudo mv etcd-v3.2.6-linux-amd64/etcd* /usr/bin/\nsudo cp ca.pem kubernetes-key.pem kubernetes.pem /etc/etcd/\nrm -rf etcd-v3.2.6-linux-amd64*\n\necho \"[Unit]\nDescription=etcd\nDocumentation=https://github.com/coreos\n\n[Service]\nExecStart=/usr/bin/etcd \\\\\n  --name ${ETCD_NAME} \\\\\n  --cert-file=/etc/etcd/kubernetes.pem \\\\\n  --key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --peer-cert-file=/etc/etcd/kubernetes.pem \\\\\n  --peer-key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-client-cert-auth \\\\\n  --client-cert-auth \\\\\n  --initial-advertise-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT},http://127.0.0.1:${ETCD_SERVER_PORT} \\\\\n  --advertise-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT} \\\\\n  --initial-cluster-token etcd-cluster-0 \\\\\n  --initial-cluster ${ALL_CONTROLLERS} \\\\\n  --initial-cluster-state new \\\\\n  --data-dir=/var/lib/etcd\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/etcd.service\n\n# -*- Bootstrapping an H/A Kubernetes Control Plane\nsudo mkdir -p /var/lib/kubernetes/\nsudo mv kube-apiserver kube-controller-manager kube-scheduler /usr/bin/ \nsudo cp ca.pem /var/lib/kubernetes/\nsudo mv ca-key.pem kubernetes-key.pem kubernetes.pem encryption-config.yaml /var/lib/kubernetes/\n\necho \"[Unit]\nDescription=Kubernetes API Server\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-apiserver \\\\\n  --admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,ResourceQuota \\\\\n  --advertise-address=${INTERNAL_IP} \\\\\n  --allow-privileged=true \\\\\n  --apiserver-count=3 \\\\\n  --audit-log-maxage=30 \\\\\n  --audit-log-maxbackup=3 \\\\\n  --audit-log-maxsize=100 \\\\\n  --audit-log-path=/var/lib/audit.log \\\\\n  --authorization-mode=RBAC \\\\\n  --bind-address=0.0.0.0 \\\\\n  --client-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --enable-swagger-ui=true \\\\\n  --etcd-cafile=/var/lib/kubernetes/ca.pem \\\\\n  --etcd-certfile=/var/lib/kubernetes/kubernetes.pem \\\\\n  --etcd-keyfile=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --etcd-servers=${ETCD_SERVERS} \\\\\n  --event-ttl=1h \\\\\n  --experimental-encryption-provider-config=/var/lib/kubernetes/encryption-config.yaml \\\\\n  --insecure-bind-address=0.0.0.0 \\\\\n  --kubelet-certificate-authority=/var/lib/kubernetes/ca.pem \\\\\n  --kubelet-client-certificate=/var/lib/kubernetes/kubernetes.pem \\\\\n  --kubelet-client-key=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --kubelet-https=true \\\\\n  --runtime-config=rbac.authorization.k8s.io/v1alpha1 \\\\\n  --service-account-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --service-node-port-range=30000-32767 \\\\\n  --tls-cert-file=/var/lib/kubernetes/kubernetes.pem \\\\\n  --tls-private-key-file=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-apiserver.service\n\necho \"[Unit]\nDescription=Kubernetes Controller Manager\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-controller-manager \\\\\n  --address=0.0.0.0 \\\\\n  --allocate-node-cidrs=true \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --cluster-name=kubernetes \\\\\n  --cluster-signing-cert-file=/var/lib/kubernetes/ca.pem \\\\\n  --cluster-signing-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --root-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --service-account-private-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-controller-manager.service\n\necho \"[Unit]\nDescription=Kubernetes Scheduler\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-scheduler \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-scheduler.service\n\nsudo systemctl daemon-reload\nsudo systemctl enable etcd\nsudo systemctl start etcd\nsleep 5\nsudo systemctl enable kube-apiserver kube-controller-manager kube-scheduler\nsudo systemctl start kube-apiserver kube-controller-manager kube-scheduler", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "7f2bd1e0-3dc7-4c5a-b3b5-f318e6ef24ce"}], "description": "", "name": "80edfe72_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "16c98103_dag", "uuid": "7f377ae9-0cce-48af-b4e6-0a9d900c8b97"}, "message_list": [], "variable_list": [], "uuid": "63e53c88-2560-4cf2-a8c6-e06448448e02"}, "message_list": [], "name": "action_create"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "966d38f7-5501-45bc-941e-04a6c012194c", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "d83d296d_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "28d69349-91fe-4cd9-a29a-bbb92e0a677f"}], "description": "", "name": "c9c07e72_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "d83d296d_dag", "uuid": "28d69349-91fe-4cd9-a29a-bbb92e0a677f"}, "message_list": [], "variable_list": [], "uuid": "feb878b1-4fe1-473a-8fce-91681f732eba"}, "message_list": [], "name": "action_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "0c36ebed-ee80-4650-86fc-f42ea16ffef8", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "FinalSteps", "uuid": "db11b09f-ef70-4dfd-8434-2dfd7670f3a4"}, {"kind": "app_task", "name": "SetupFlannel", "uuid": "44ff6075-ef8e-4739-93c9-71922ee627b6"}, {"kind": "app_task", "name": "SetupKubeDns", "uuid": "43703f9c-4f1d-404e-b061-f7217d8557ce"}, {"kind": "app_task", "name": "SetupNutanixVolumePlugin", "uuid": "e6ded23c-e8de-4f30-afde-85d977311f76"}], "name": "3a7a0f2a_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "FinalSteps", "uuid": "db11b09f-ef70-4dfd-8434-2dfd7670f3a4"}, "edge_type": "user_defined", "type": "", "uuid": "921ebe8d-1395-4325-abd2-eb14de99a5ec", "to_task_reference": {"kind": "app_task", "name": "SetupFlannel", "uuid": "44ff6075-ef8e-4739-93c9-71922ee627b6"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupFlannel", "uuid": "44ff6075-ef8e-4739-93c9-71922ee627b6"}, "edge_type": "user_defined", "type": "", "uuid": "85693444-26ef-44b5-953e-0e8d89db5422", "to_task_reference": {"kind": "app_task", "name": "SetupKubeDns", "uuid": "43703f9c-4f1d-404e-b061-f7217d8557ce"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupKubeDns", "uuid": "43703f9c-4f1d-404e-b061-f7217d8557ce"}, "edge_type": "user_defined", "type": "", "uuid": "e84d780f-81be-43a9-ac0a-004bb6ead996", "to_task_reference": {"kind": "app_task", "name": "SetupNutanixVolumePlugin", "uuid": "e6ded23c-e8de-4f30-afde-85d977311f76"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "b8f07b54-16aa-4c45-acf7-a717c4bb7d63"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "FinalSteps", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho \"@@{Kubernetes_Minion.COMPLETE}@@\"\nINTERNAL_IP=@@{address}@@\n\nsleep 20\n\nmkdir -p CA Net DNS\nmv *.pem *.csr *.json *.kubeconfig CA/\n\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=$HOME/CA/ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:6443\nkubectl config set-credentials admin --client-certificate=$HOME/CA/admin.pem --client-key=$HOME/CA/admin-key.pem\nkubectl config set-context kubernetes-prod-cluster --cluster=kubernetes-prod-cluster --user=admin\nkubectl config use-context kubernetes-prod-cluster\n\nkubectl get componentstatuses\nkubectl get nodes", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "db11b09f-ef70-4dfd-8434-2dfd7670f3a4"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetupFlannel", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho '---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nrules:\n  - apiGroups:\n      - \"\"\n    resources:\n      - pods\n    verbs:\n      - get\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes\n    verbs:\n      - list\n      - watch\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes/status\n    verbs:\n      - patch\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: flannel\nsubjects:\n- kind: ServiceAccount\n  name: flannel\n  namespace: kube-system\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: flannel\n  namespace: kube-system\n---\nkind: ConfigMap\napiVersion: v1\nmetadata:\n  name: kube-flannel-cfg\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\ndata:\n  cni-conf.json: |\n    {\n      \"name\": \"cbr0\",\n      \"type\": \"flannel\",\n      \"delegate\": {\n        \"isDefaultGateway\": true\n      }\n    }\n  net-conf.json: |\n    {\n      \"Network\": \"@@{CLUSTER_SUBNET}@@\",\n      \"Backend\": {\n        \"Type\": \"vxlan\"\n      }\n    }\n---\napiVersion: extensions/v1beta1\nkind: DaemonSet\nmetadata:\n  name: kube-flannel-ds\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\nspec:\n  template:\n    metadata:\n      labels:\n        tier: node\n        app: flannel\n    spec:\n      hostNetwork: true\n      nodeSelector:\n        beta.kubernetes.io/arch: amd64\n      tolerations:\n      - key: node-role.kubernetes.io/master\n        operator: Exists\n        effect: NoSchedule\n      serviceAccountName: flannel\n      initContainers:\n      - name: install-cni\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command:\n        - cp\n        args:\n        - -f\n        - /etc/kube-flannel/cni-conf.json\n        - /etc/cni/net.d/10-flannel.conf\n        volumeMounts:\n        - name: cni\n          mountPath: /etc/cni/net.d\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      containers:\n      - name: kube-flannel\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command: [ \"/opt/bin/flanneld\", \"--ip-masq\", \"--kube-subnet-mgr\" ]\n        securityContext:\n          privileged: true\n        env:\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: POD_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        volumeMounts:\n        - name: run\n          mountPath: /run\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      volumes:\n        - name: run\n          hostPath:\n            path: /run\n        - name: cni\n          hostPath:\n            path: /etc/cni/net.d\n        - name: flannel-cfg\n          configMap:\n            name: kube-flannel-cfg' | tee kube-flannel.yml\nkubectl create -f kube-flannel.yml\nmv kube-flannel.yml Net/\n\nkubectl get nodes --output=jsonpath='{range .items[*]}{.spec.podCIDR} via {.status.addresses[?(@.type==\"InternalIP\")].address} {\"\\n\"}{end}' | sudo tee /etc/sysconfig/network-scripts/route-eth0\necho \"@@{SERVICE_SUBNET}@@ via $(kubectl get nodes kubernetes-minion0 --output=jsonpath='{.status.addresses[?(@.type==\"InternalIP\")].address}')\" | sudo tee -a /etc/sysconfig/network-scripts/route-eth0\nsleep 5\nsudo systemctl restart network", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "44ff6075-ef8e-4739-93c9-71922ee627b6"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetupKubeDns", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    addonmanager.kubernetes.io/mode: EnsureExists\ndata:\n  upstreamNameservers: |\n    [\"8.8.8.8\", \"4.2.2.2\"]\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    kubernetes.io/name: \"KubeDNS\"\nspec:\n  selector:\n    k8s-app: kube-dns\n  clusterIP: @@{KUBE_CLUSTER_DNS}@@\n  ports:\n    - name: dns\n      port: 53\n      protocol: UDP\n    - name: dns-tcp\n      port: 53\n      protocol: TCP\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\nspec:\n  strategy:\n    rollingUpdate:\n      maxSurge: 10%\n      maxUnavailable: 0\n  selector:\n    matchLabels:\n      k8s-app: kube-dns\n  template:\n    metadata:\n      labels:\n        k8s-app: kube-dns\n      annotations:\n        scheduler.alpha.kubernetes.io/critical-pod: ''\n    spec:\n      tolerations:\n      - key: \"CriticalAddonsOnly\"\n        operator: \"Exists\"\n      volumes:\n      - name: kube-dns-config\n        configMap:\n          name: kube-dns\n          optional: true\n      containers:\n      - name: kubedns\n        image: gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.4\n        resources:\n          limits:\n            memory: 170Mi\n          requests:\n            cpu: 100m\n            memory: 70Mi\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/kubedns\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        readinessProbe:\n          httpGet:\n            path: /readiness\n            port: 8081\n            scheme: HTTP\n          initialDelaySeconds: 3\n          timeoutSeconds: 5\n        args:\n        - --domain=cluster.local.\n        - --dns-port=10053\n        - --config-dir=/kube-dns-config\n        - --v=2\n        env:\n        - name: PROMETHEUS_PORT\n          value: \"10055\"\n        ports:\n        - containerPort: 10053\n          name: dns-local\n          protocol: UDP\n        - containerPort: 10053\n          name: dns-tcp-local\n          protocol: TCP\n        - containerPort: 10055\n          name: metrics\n          protocol: TCP\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /kube-dns-config\n      - name: dnsmasq\n        image: gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/dnsmasq\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - -v=2\n        - -logtostderr\n        - -configDir=/etc/k8s/dns/dnsmasq-nanny\n        - -restartDnsmasq=true\n        - --\n        - -k\n        - --cache-size=1000\n        - --log-facility=-\n        - --server=/cluster.local./127.0.0.1#10053\n        - --server=/in-addr.arpa/127.0.0.1#10053\n        - --server=/ip6.arpa/127.0.0.1#10053\n        ports:\n        - containerPort: 53\n          name: dns\n          protocol: UDP\n        - containerPort: 53\n          name: dns-tcp\n          protocol: TCP\n        resources:\n          requests:\n            cpu: 150m\n            memory: 20Mi\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /etc/k8s/dns/dnsmasq-nanny\n      - name: sidecar\n        image: gcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /metrics\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - --v=2\n        - --logtostderr\n        - --probe=kubedns,127.0.0.1:10053,kubernetes.default.svc.cluster.local.,5,A\n        - --probe=dnsmasq,127.0.0.1:53,kubernetes.default.svc.cluster.local.,5,A\n        ports:\n        - containerPort: 10054\n          name: metrics\n          protocol: TCP\n        resources:\n          requests:\n            memory: 20Mi\n            cpu: 10m\n      dnsPolicy:\n      serviceAccountName: kube-dns' | tee kube-dns.yaml\n      \nkubectl create -f kube-dns.yaml\nmv kube-dns.yaml DNS/", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "43703f9c-4f1d-404e-b061-f7217d8557ce"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetupNutanixVolumePlugin", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nif [ \"@@{PRISM_CLUSTER_IP}@@\" == \"\" ] && [ \"@@{PRISM_USERNAME}@@\" == \"\" ] && [ \"@@{PRISM_PASSWORD}@@\" == \"\" ]; then\n\texit\nfi\nmkdir volume_plugin\nNTNX_SECRET=$(echo -n \"@@{PRISM_USERNAME}@@:@@{PRISM_PASSWORD}@@\" | base64)\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: nutanixabs-provisioner\n---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: nutanixabs-provisioner-runner\nrules:\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumes\"]\n    verbs: [\"get\", \"list\", \"watch\", \"create\", \"delete\"]\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumeclaims\"]\n    verbs: [\"get\", \"list\", \"watch\", \"update\"]\n  - apiGroups: [\"storage.k8s.io\"]\n    resources: [\"storageclasses\"]\n    verbs: [\"get\", \"list\", \"watch\"]\n  - apiGroups: [\"\"]\n    resources: [\"events\"]\n    verbs: [\"list\", \"watch\", \"create\", \"update\", \"patch\"]\n  - apiGroups: [\"\"]\n    resources: [\"services\"]\n    verbs: [\"get\"]\n  - apiGroups: [\"\"]\n    resources: [\"secrets\"]\n    verbs: [\"get\", \"create\", \"delete\"]\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: run-nutanixabs-provisioner\nsubjects:\n  - kind: ServiceAccount\n    name: nutanixabs-provisioner\n    namespace: default\nroleRef:\n  kind: ClusterRole\n  name: nutanixabs-provisioner-runner\n  apiGroup: rbac.authorization.k8s.io\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: nutanixabs-provisioner\nspec:\n  replicas: 1\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: nutanixabs-provisioner\n    spec:\n      serviceAccount: nutanixabs-provisioner\n      hostNetwork: true\n      containers:\n        -\n          image: \"subodh73/nutanixabs-provisioner\"\n          name: nutanixabs-provisioner\n          args: [\"--v=4\"]\n          imagePullPolicy: IfNotPresent\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: ntnx-secret\n  namespace: default\ndata:\n  key: <SECRET>\ntype: nutanix/abs\n---\nkind: StorageClass\napiVersion: storage.k8s.io/v1\nmetadata:\n  name: silver \nprovisioner: nutanix/abs\nparameters:\n     prismEndPoint: @@{PRISM_CLUSTER_IP}@@:9440\n     dataServiceEndPoint: @@{PRISM_DATA_SERVICE_IP}@@:3260\n     user: @@{PRISM_USERNAME}@@\n     password: @@{PRISM_PASSWORD}@@\n     secretName: ntnx-secret\n     storageContainer: @@{CONTAINER_NAME}@@\n     fsType: ext4\n     chapAuthEnabled: \"false\"' | tee volume_plugin/nutanix-provisioner.yaml\n\nsed -i \"s/<SECRET>/${NTNX_SECRET}/\" volume_plugin/nutanix-provisioner.yaml\nkubectl create -f volume_plugin/nutanix-provisioner.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "e6ded23c-e8de-4f30-afde-85d977311f76"}], "description": "", "name": "ec49e982_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "3a7a0f2a_dag", "uuid": "b8f07b54-16aa-4c45-acf7-a717c4bb7d63"}, "message_list": [], "variable_list": [], "uuid": "ea443da9-8633-414a-9848-5cbc90210734"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "8c63b8c6-d889-48fe-b719-2a6545c8a23c", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "990f28cf_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "c4af3d42-73cf-4532-9dfa-71768fc1e63b"}], "description": "", "name": "e34ef8d6_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "990f28cf_dag", "uuid": "c4af3d42-73cf-4532-9dfa-71768fc1e63b"}, "message_list": [], "variable_list": [], "uuid": "f66bf8ec-0169-4729-b9d8-5897308824bc"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "9648e093-fc03-47b8-8867-682f74c338f3", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "9afd1d8b_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "c59a34f3-8679-4725-b8b6-adece31f4b28"}], "description": "", "name": "3c8f0554_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "9afd1d8b_dag", "uuid": "c59a34f3-8679-4725-b8b6-adece31f4b28"}, "message_list": [], "variable_list": [], "uuid": "1517ef05-34e7-4ee9-b507-90c9ba60a6c8"}, "message_list": [], "name": "action_soft_delete"}], "depends_on_list": [], "name": "Kubernetes_Master", "state": "ACTIVE", "port_list": [], "editables": {}, "tier": "", "message_list": [], "variable_list": [], "description": ""}, {"singleton": false, "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "56dfab0e-5b1a-4d97-89be-cb15dca4ca4f", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "ConfigureMinion", "uuid": "8c87dd53-4e7d-4f71-b622-0eaa6602c437"}, {"kind": "app_task", "name": "SetFlag", "uuid": "16d17676-9777-406c-a0d6-49f10e199dfb"}], "name": "2a209891_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "ConfigureMinion", "uuid": "8c87dd53-4e7d-4f71-b622-0eaa6602c437"}, "edge_type": "user_defined", "type": "", "uuid": "7a04783b-da20-41f0-bd78-e2c0d9f0e23e", "to_task_reference": {"kind": "app_task", "name": "SetFlag", "uuid": "16d17676-9777-406c-a0d6-49f10e199dfb"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "4b734062-5ff7-4f35-b189-b3afa22e2de3"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ConfigureMinion", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nCONTROLLER_IP=@@{K8SC.address}@@\nKUBERNETES_CLUSTER_DNS=\"@@{KUBE_CLUSTER_DNS}@@\"\nUSERNAME=\"@@{CENTOS.username}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\necho \"@@{CENTOS.secret}@@\" | tee centos.pem\nchmod 400 centos.pem\n\nsleep 60\n# -*- Bootstrapping Kubernetes Workers\nHOSTNAME=$(hostname -s)\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.pem ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:kube-proxy.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:ca.pem ./\n\nsudo mkdir -p /var/lib/{kubelet,kube-proxy,kubernetes} /var/run/kubernetes\nsudo mv kubectl kube-proxy kubelet /usr/bin/\n\nsudo mv ${HOSTNAME}-key.pem ${HOSTNAME}.pem /var/lib/kubelet/\nsudo mv ${HOSTNAME}.kubeconfig /var/lib/kubelet/kubeconfig\nsudo mv ca.pem /var/lib/kubernetes/\n\n# -*- Install Docker\ntar -xvf docker-1.12.6.tgz\nsudo cp docker/docker* /usr/bin/\necho \"[Unit]\nDescription=Docker Application Container Engine\nDocumentation=http://docs.docker.com\n\n[Service]\nExecStart=/usr/bin/docker daemon \\\\\n  --iptables=false \\\\\n  --ip-masq=false \\\\\n  --host=unix:///var/run/docker.sock \\\\\n  --log-level=error \\\\\n  --storage-driver=overlay\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/docker.service\n\necho \"[Unit]\nDescription=Kubernetes Kubelet\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nExecStart=/usr/bin/kubelet \\\n  --allow-privileged=true \\\n  --cluster-dns=${KUBERNETES_CLUSTER_DNS} \\\n  --cluster-domain=cluster.local \\\n  --container-runtime=docker \\\n  --enable-custom-metrics \\\n  --kubeconfig=/var/lib/kubelet/kubeconfig \\\n  --network-plugin=cni \\\n  --pod-cidr=${CLUSTER_SUBNET} \\\n  --register-node=true \\\n  --require-kubeconfig \\\n  --runtime-request-timeout=10m \\\n  --tls-cert-file=/var/lib/kubelet/${HOSTNAME}.pem \\\n  --tls-private-key-file=/var/lib/kubelet/${HOSTNAME}-key.pem \\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kubelet.service\n\nsudo mv kube-proxy.kubeconfig /var/lib/kube-proxy/kubeconfig\n\necho \"[Unit]\nDescription=Kubernetes Kube Proxy\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-proxy \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --masquerade-all=true \\\n  --kubeconfig=/var/lib/kube-proxy/kubeconfig \\\\\n  --proxy-mode=iptables \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-proxy.service\n\nsudo mkdir -p /etc/cni/net.d\necho '{\n  \"name\": \"cbr0\",\n  \"type\": \"flannel\",\n  \"delegate\": {\n    \"isDefaultGateway\": true\n  }\n}' | sudo tee /etc/cni/net.d/10-flannel.conf\n\nsudo mkdir -p /opt/cni/bin\nsudo tar -zxvf cni-plugins-amd64-v0.6.0.tgz -C /opt/cni/bin\n\n# -*- Configure Iscsi iqn\necho \"InitiatorName=iqn.1994-05.com.nutanix:k8s-worker\" | sudo tee /etc/iscsi/initiatorname.iscsi \n\nsudo systemctl daemon-reload\nsudo systemctl enable docker kubelet kube-proxy iscsid\nsudo systemctl start docker kubelet kube-proxy iscsid", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "8c87dd53-4e7d-4f71-b622-0eaa6602c437"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetFlag", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#script\nprint \"COMPLETE=True\"", "eval_variables": ["COMPLETE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "", "type": "SET_VARIABLE", "variable_list": [], "uuid": "16d17676-9777-406c-a0d6-49f10e199dfb"}], "description": "", "name": "658fecfa_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "2a209891_dag", "uuid": "4b734062-5ff7-4f35-b189-b3afa22e2de3"}, "message_list": [], "variable_list": [], "uuid": "199e8ff4-9c43-4ddd-856d-a7757097b1d8"}, "message_list": [], "name": "action_create"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "dddb4644-25b6-4442-8ed8-f6ed00e77a6b", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "1ca74521_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2c2a617e-df0c-4fca-9bd6-f274b66ec14c"}], "description": "", "name": "4356ce2d_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "1ca74521_dag", "uuid": "2c2a617e-df0c-4fca-9bd6-f274b66ec14c"}, "message_list": [], "variable_list": [], "uuid": "1f0f7e64-583d-4d10-8311-4821fa50e553"}, "message_list": [], "name": "action_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "6ca5c312-4176-4507-9456-4c58e5c79207", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "983862b1_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "61450d56-32dc-4940-ba1d-2b77607edede"}], "description": "", "name": "6583643e_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "983862b1_dag", "uuid": "61450d56-32dc-4940-ba1d-2b77607edede"}, "message_list": [], "variable_list": [], "uuid": "805f6a7b-16a9-4d5d-bd88-91e2f35da06e"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "4529bf19-ab9d-41fa-9501-40a33713db60", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "cba58264_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "c9190887-a58e-4336-8b83-4812339ca859"}], "description": "", "name": "3cee8199_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "cba58264_dag", "uuid": "c9190887-a58e-4336-8b83-4812339ca859"}, "message_list": [], "variable_list": [], "uuid": "20b9af03-467d-48cf-b12f-5fceadcb7091"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "fc2e659e-f356-4c82-9b64-daf37eb50f65", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "389a6493_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "869baee3-242a-435c-a66a-cf681546c64a"}], "description": "", "name": "25b466fc_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "389a6493_dag", "uuid": "869baee3-242a-435c-a66a-cf681546c64a"}, "message_list": [], "variable_list": [], "uuid": "e1828d22-8260-4ca3-be26-d391ae9b069f"}, "message_list": [], "name": "action_soft_delete"}], "depends_on_list": [], "name": "Kubernetes_Minion", "state": "ACTIVE", "port_list": [], "editables": {}, "tier": "", "message_list": [], "variable_list": [], "description": ""}], "substrate_definition_list": [{"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "f9d9cb6f-ae09-488e-a82e-df9f447b256b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "51685e80-9e7e-401b-bed2-1e630a88bb13"}, {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SC_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "fdb9a4ee-a834-44a6-be9e-f8692447d4fb"}], "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "51685e80-9e7e-401b-bed2-1e630a88bb13"}, "edge_type": "inherent", "type": "", "uuid": "e4c0ca49-3cc9-4fb9-9528-a444e0bccdf0", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SC_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "fdb9a4ee-a834-44a6-be9e-f8692447d4fb"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2acee1ba-84b4-48c2-8542-9c266304402f"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Provision_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"name": "Challange-K8SC", "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [{"ip": "10.21.81.90", "type": "ASSIGNED"}], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "8598bf41-ed07-4386-af89-8d0c99fc9539"}, "type": ""}], "power_state": "ON", "guest_tools": null, "num_vcpus_per_socket": 2, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 2048, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": {"meta_data": "", "type": "", "user_data": "#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{INSTANCE_PUBLIC_KEY}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"}, "type": "", "sysprep": null}, "type": "", "boot_config": null, "disk_list": [{"data_source_reference": {"kind": "app_package", "type": "", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "type": "", "disk_size_mib": 1, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}}, "timeout_secs": "", "type": "PROVISION_NUTANIX", "variable_list": [], "uuid": "51685e80-9e7e-401b-bed2-1e630a88bb13"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__check_login_for_K8SC_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "fdb9a4ee-a834-44a6-be9e-f8692447d4fb"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "2acee1ba-84b4-48c2-8542-9c266304402f"}, "message_list": [], "variable_list": [], "uuid": "8034a373-84b1-4136-80fc-c5164dcd698c"}, "message_list": [], "name": "action_create"}, {"description": "System action for powering on an application", "type": "system", "uuid": "7512de5d-bdd5-401c-af2c-657d97fc4a4a", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "fd2a9c84-6581-40df-84b8-8d239def3935"}, {"kind": "app_task", "name": "check_login_for_K8SC_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "e2fb3a33-dfe8-49eb-bfe0-8d21bf65a064"}], "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "fd2a9c84-6581-40df-84b8-8d239def3935"}, "edge_type": "inherent", "type": "", "uuid": "ba0cd2e4-7304-4a05-81d5-7a58bc6bb62b", "to_task_reference": {"kind": "app_task", "name": "check_login_for_K8SC_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "e2fb3a33-dfe8-49eb-bfe0-8d21bf65a064"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "1799dac0-3566-47aa-b914-b337bd354832"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOn_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "fd2a9c84-6581-40df-84b8-8d239def3935"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_K8SC_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "e2fb3a33-dfe8-49eb-bfe0-8d21bf65a064"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "1799dac0-3566-47aa-b914-b337bd354832"}, "message_list": [], "variable_list": [], "uuid": "f6353094-d23b-4f56-9e44-b0424e4597de"}, "message_list": [], "name": "action_poweron"}, {"description": "System action for suspending an application", "type": "system", "uuid": "41412b9a-29fe-4fdd-b790-bb30106bc6e3", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "9b6fd614-c013-4e0b-a406-4ab29e0ef3e4"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "9b6fd614-c013-4e0b-a406-4ab29e0ef3e4"}, "message_list": [], "variable_list": [], "uuid": "9f6d59a4-04f6-46af-859f-64303ece8df8"}, "message_list": [], "name": "action_suspend"}, {"description": "System action for modifying an application", "type": "system", "uuid": "6aefbe2f-42c3-456f-8e7c-aad59346ca77", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "a6a2a8ed-1587-4627-be9c-8790c168cd6a"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "a6a2a8ed-1587-4627-be9c-8790c168cd6a"}, "message_list": [], "variable_list": [], "uuid": "337159d8-61f2-422f-a77b-0cf0d9ebcf0c"}, "message_list": [], "name": "action_modify"}, {"description": "System action for powering off an application", "type": "system", "uuid": "a08657f4-39c6-4f7c-89e1-c380dde92c86", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOff_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "c1f23727-e753-44a7-b65e-b37eda6c475a"}], "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "d8df0fc9-ff60-44e6-9765-0520adc06867"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOff_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "c1f23727-e753-44a7-b65e-b37eda6c475a"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "d8df0fc9-ff60-44e6-9765-0520adc06867"}, "message_list": [], "variable_list": [], "uuid": "8020804a-139d-47a4-b728-9ae9cd56bc12"}, "message_list": [], "name": "action_poweroff"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "9551d15d-e38a-4b3f-bdb2-b13b616ee7a1", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Delete_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "eaf3b47b-3e9f-4c5d-9e60-a6ac7d729fce"}], "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "c10847f2-408d-4f62-b40c-eaed0f034555"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Delete_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_NUTANIX", "variable_list": [], "uuid": "eaf3b47b-3e9f-4c5d-9e60-a6ac7d729fce"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "c10847f2-408d-4f62-b40c-eaed0f034555"}, "message_list": [], "variable_list": [], "uuid": "057e02a9-36bc-4376-90c0-5f8c91b276bd"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "f4f71066-e793-425d-bb99-f0932f647b05", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Substrate_Element_Delete_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "7ffb896b-95f2-43b7-a780-5bb069a11966"}], "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "f81ae4a6-21bb-4932-ad6b-3174b816585b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Substrate_Element_Delete_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "7ffb896b-95f2-43b7-a780-5bb069a11966"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "f81ae4a6-21bb-4932-ad6b-3174b816585b"}, "message_list": [], "variable_list": [], "uuid": "5f65265b-d542-41b1-9d58-42d74012643a"}, "message_list": [], "name": "action_soft_delete"}], "type": "AHV_VM", "name": "K8SC", "state": "ACTIVE", "readiness_probe": {"connection_type": "SSH", "disable_readiness_probe": false, "timeout_secs": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "connection_port": 22, "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "editables": {"readiness_probe": {"connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {"nic_list": {}, "num_vcpus_per_socket": true, "num_sockets": true, "memory_size_mib": true, "guest_customization": true, "disk_list": {}}}}, "os_type": "Linux", "message_list": [], "create_spec": {"name": "Challange-K8SC", "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [{"ip": "10.21.81.90", "type": "ASSIGNED"}], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "8598bf41-ed07-4386-af89-8d0c99fc9539"}, "type": ""}], "power_state": "ON", "guest_tools": null, "num_vcpus_per_socket": 2, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 2048, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": {"meta_data": "", "type": "", "user_data": "#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{INSTANCE_PUBLIC_KEY}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"}, "type": "", "sysprep": null}, "type": "", "boot_config": null, "disk_list": [{"data_source_reference": {"kind": "app_package", "type": "", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "type": "", "disk_size_mib": 1, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}}, "variable_list": [], "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, {"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "a791272b-ec26-46ba-8b5d-01a67311f5e9", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "5ae37f90-364a-476d-b3a0-0331209e631b"}, {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SM_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "6b75db5d-c641-4b12-80ec-66c580751700"}], "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "5ae37f90-364a-476d-b3a0-0331209e631b"}, "edge_type": "inherent", "type": "", "uuid": "68b5b8e5-282b-427b-afa2-09542d3b43fb", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SM_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "6b75db5d-c641-4b12-80ec-66c580751700"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "96479d94-37d0-4bf6-88b2-c34d70f10223"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Provision_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"name": "Challange-K8SM@@{calm_array_index}@@", "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [{"ip": "10.21.81.91", "type": "ASSIGNED"}], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "8598bf41-ed07-4386-af89-8d0c99fc9539"}, "type": ""}], "power_state": "ON", "guest_tools": null, "num_vcpus_per_socket": 2, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": {"meta_data": "", "type": "", "user_data": "#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{INSTANCE_PUBLIC_KEY}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"}, "type": "", "sysprep": null}, "type": "", "boot_config": null, "disk_list": [{"data_source_reference": {"kind": "app_package", "type": "", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "type": "", "disk_size_mib": 1, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 2, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 3, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}}, "timeout_secs": "", "type": "PROVISION_NUTANIX", "variable_list": [], "uuid": "5ae37f90-364a-476d-b3a0-0331209e631b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__check_login_for_K8SM_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "6b75db5d-c641-4b12-80ec-66c580751700"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "96479d94-37d0-4bf6-88b2-c34d70f10223"}, "message_list": [], "variable_list": [], "uuid": "1fba8fa8-d94a-4f97-927a-b43045eab938"}, "message_list": [], "name": "action_create"}, {"description": "System action for powering on an application", "type": "system", "uuid": "eb57c2b5-4bd7-462d-87e9-e8a623e66deb", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "307ec7f3-a0cc-4b57-be8a-ac9756857c08"}, {"kind": "app_task", "name": "check_login_for_K8SM_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "272b45d8-c361-49ce-b330-9c5a573e2671"}], "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "307ec7f3-a0cc-4b57-be8a-ac9756857c08"}, "edge_type": "inherent", "type": "", "uuid": "fee50d55-391a-4dfb-8adf-1d3abe70e341", "to_task_reference": {"kind": "app_task", "name": "check_login_for_K8SM_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "272b45d8-c361-49ce-b330-9c5a573e2671"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "e6bcc0f9-879d-43e8-8175-80c985443e4e"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOn_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "307ec7f3-a0cc-4b57-be8a-ac9756857c08"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_K8SM_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "272b45d8-c361-49ce-b330-9c5a573e2671"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "e6bcc0f9-879d-43e8-8175-80c985443e4e"}, "message_list": [], "variable_list": [], "uuid": "001a2554-51a5-4af4-82a9-eaeb673b233f"}, "message_list": [], "name": "action_poweron"}, {"description": "System action for suspending an application", "type": "system", "uuid": "2f2b151b-d87c-495e-b2d3-7285548e324f", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "ef8a8ed9-7589-4d6e-8e22-b68c95d68ed4"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "ef8a8ed9-7589-4d6e-8e22-b68c95d68ed4"}, "message_list": [], "variable_list": [], "uuid": "0abac869-f290-4e9a-a20b-82ea4e9fd50f"}, "message_list": [], "name": "action_suspend"}, {"description": "System action for modifying an application", "type": "system", "uuid": "f3fdb929-3e58-46b2-9084-1132456c84a4", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "59eb440b-8e69-4665-b982-3ed851ae559d"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "59eb440b-8e69-4665-b982-3ed851ae559d"}, "message_list": [], "variable_list": [], "uuid": "5e0b198f-eea9-443e-b4e7-0dff4e3319fa"}, "message_list": [], "name": "action_modify"}, {"description": "System action for powering off an application", "type": "system", "uuid": "e1c27d00-c1ef-49d8-845b-351753ae07b4", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOff_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "b57d884d-b0e5-4680-977c-ebe411f62cf6"}], "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "ef1cdad6-5e76-44dc-b37d-f685732a1558"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOff_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "b57d884d-b0e5-4680-977c-ebe411f62cf6"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "ef1cdad6-5e76-44dc-b37d-f685732a1558"}, "message_list": [], "variable_list": [], "uuid": "801f1d06-0cdf-481e-a9f0-9bcedd05a969"}, "message_list": [], "name": "action_poweroff"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "9eb9c3ac-b94a-4581-b4c3-5bce77dfa4df", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Delete_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "8e478f81-401c-46be-8f83-11632abab525"}], "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "3020c43d-8445-4d54-8483-9de8524ec507"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Delete_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_NUTANIX", "variable_list": [], "uuid": "8e478f81-401c-46be-8f83-11632abab525"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "3020c43d-8445-4d54-8483-9de8524ec507"}, "message_list": [], "variable_list": [], "uuid": "cb215b2e-d97c-44fe-96be-d7ee27172c8c"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "daa100fb-8798-4b64-91b6-c996b9f31c44", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Substrate_Element_Delete_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "b8ee7809-0b8b-4d74-a7c1-d3c3fc2a301b"}], "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "7c7d9129-b720-43b0-b1bd-3b8231367434"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Substrate_Element_Delete_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "b8ee7809-0b8b-4d74-a7c1-d3c3fc2a301b"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "7c7d9129-b720-43b0-b1bd-3b8231367434"}, "message_list": [], "variable_list": [], "uuid": "0ea89944-1802-4423-b9a2-3996ae737ca0"}, "message_list": [], "name": "action_soft_delete"}], "type": "AHV_VM", "name": "K8SM", "state": "ACTIVE", "readiness_probe": {"connection_type": "SSH", "disable_readiness_probe": false, "timeout_secs": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "connection_port": 22, "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "editables": {"readiness_probe": {"connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {"nic_list": {}, "num_vcpus_per_socket": true, "num_sockets": true, "memory_size_mib": true, "guest_customization": true, "disk_list": {}}}}, "os_type": "Linux", "message_list": [], "create_spec": {"name": "Challange-K8SM@@{calm_array_index}@@", "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [{"ip": "10.21.81.91", "type": "ASSIGNED"}], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "8598bf41-ed07-4386-af89-8d0c99fc9539"}, "type": ""}], "power_state": "ON", "guest_tools": null, "num_vcpus_per_socket": 2, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 4096, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": {"meta_data": "", "type": "", "user_data": "#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{INSTANCE_PUBLIC_KEY}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"}, "type": "", "sysprep": null}, "type": "", "boot_config": null, "disk_list": [{"data_source_reference": {"kind": "app_package", "type": "", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "type": "", "disk_size_mib": 1, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 2, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 3, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}}, "variable_list": [], "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}], "credential_definition_list": [{"username": "centos", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "CENTOS", "state": "ACTIVE", "editables": {"username": true, "secret": true}, "type": "KEY", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}], "app_profile_list": [{"deployment_create_list": [{"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "ac1509e4-e217-4842-b496-9827e1c0c11c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "9242e4e1-9101-4b20-8e22-6877bdc5629b"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "04611c61-02e6-48ff-8ea8-137d79dbdf28"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "ce4df65c-1a98-4361-b668-96c1067e2bf6"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "c90a0ae7-756b-4cef-ae33-86650bc41000"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "ebcca84c-0e39-4bbe-87d9-841e90882845"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "0f88a6a4-1cea-4c0d-906e-042f12dcd1e2"}], "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "ebcca84c-0e39-4bbe-87d9-841e90882845"}, "edge_type": "inherent", "type": "", "uuid": "d5cb4a61-c7a3-4fb9-836e-b6b8f7440102", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "0f88a6a4-1cea-4c0d-906e-042f12dcd1e2"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "c90a0ae7-756b-4cef-ae33-86650bc41000"}, "edge_type": "inherent", "type": "", "uuid": "0088c06a-2eda-413c-b466-ce174465c062", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "ebcca84c-0e39-4bbe-87d9-841e90882845"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "ce4df65c-1a98-4361-b668-96c1067e2bf6"}, "edge_type": "inherent", "type": "", "uuid": "bc628d21-20ef-4812-888e-b3e3d32ac6ac", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "c90a0ae7-756b-4cef-ae33-86650bc41000"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "9242e4e1-9101-4b20-8e22-6877bdc5629b"}, "edge_type": "inherent", "type": "", "uuid": "80d1db2d-162f-460b-bb8b-bff63a1fc5db", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "04611c61-02e6-48ff-8ea8-137d79dbdf28"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "9242e4e1-9101-4b20-8e22-6877bdc5629b"}, "edge_type": "inherent", "type": "", "uuid": "44f8e020-b88f-46ce-8754-6bb27de97a84", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "ce4df65c-1a98-4361-b668-96c1067e2bf6"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "04611c61-02e6-48ff-8ea8-137d79dbdf28"}, "edge_type": "inherent", "type": "", "uuid": "06f3075b-7e1d-4a90-ac91-28b6fa1ddd27", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "ce4df65c-1a98-4361-b668-96c1067e2bf6"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "ca63a723-7a4c-47a1-93f5-660672d25cd3"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "9242e4e1-9101-4b20-8e22-6877bdc5629b"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "3f758093-68e1-4d3f-bef6-6868d4ab7a7b"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "04611c61-02e6-48ff-8ea8-137d79dbdf28"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "8034a373-84b1-4136-80fc-c5164dcd698c"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ce4df65c-1a98-4361-b668-96c1067e2bf6"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "c747f16b-a5f6-4b24-b10b-f401eeda5e2a"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c90a0ae7-756b-4cef-ae33-86650bc41000"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "80edfe72_runbook", "uuid": "63e53c88-2560-4cf2-a8c6-e06448448e02"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ebcca84c-0e39-4bbe-87d9-841e90882845"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "ea443da9-8633-414a-9848-5cbc90210734"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0f88a6a4-1cea-4c0d-906e-042f12dcd1e2"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "ca63a723-7a4c-47a1-93f5-660672d25cd3"}, "message_list": [], "variable_list": [], "uuid": "77e033a0-abe9-4051-8586-94a631d1037c"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "2a8e902a-c7f7-45a8-85ed-6e3d08a8e1a0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "7fa3bf3c-8854-4f68-bbe9-b823b3cab735"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "daba4a27-3043-48b4-8606-a7cc194481c5"}], "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "7fa3bf3c-8854-4f68-bbe9-b823b3cab735"}, "edge_type": "inherent", "type": "", "uuid": "5708d8ae-8925-488c-b928-a147e9aa4db4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "daba4a27-3043-48b4-8606-a7cc194481c5"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "e26e225e-9e3b-4a35-8954-74a69a5244ba"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "f6353094-d23b-4f56-9e44-b0424e4597de"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7fa3bf3c-8854-4f68-bbe9-b823b3cab735"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "ea443da9-8633-414a-9848-5cbc90210734"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "daba4a27-3043-48b4-8606-a7cc194481c5"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "e26e225e-9e3b-4a35-8954-74a69a5244ba"}, "message_list": [], "variable_list": [], "uuid": "d622edd6-503c-4d77-a873-4754c83b9fb8"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "4f7a37fd-5e21-4993-8b82-7391772c4a61", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "ce6a7b93-1e14-41e5-9895-0280ecdf748e"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "26eea454-10e6-4916-aa24-eddc03f2946a"}], "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "ce6a7b93-1e14-41e5-9895-0280ecdf748e"}, "edge_type": "inherent", "type": "", "uuid": "986bd506-889e-4b01-8809-7b4b7039eae7", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "26eea454-10e6-4916-aa24-eddc03f2946a"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "70626c5c-c0db-4344-a1e2-b9149255336f"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "f66bf8ec-0169-4729-b9d8-5897308824bc"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ce6a7b93-1e14-41e5-9895-0280ecdf748e"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "8020804a-139d-47a4-b728-9ae9cd56bc12"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "26eea454-10e6-4916-aa24-eddc03f2946a"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "70626c5c-c0db-4344-a1e2-b9149255336f"}, "message_list": [], "variable_list": [], "uuid": "200c6195-0adf-497c-a1d1-3e2de295b1f7"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "475a8635-c4f2-4f8b-94dd-3c3a1f5a4ef1", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "3277a397-c66f-4ec2-9642-02ee1850a6d4"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "7b48ba12-e7e5-4df8-9e5e-10f674396ab0"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "328aa5c9-3cad-4018-b591-2a23aaa2d312"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "382c708a-d573-4d75-8a72-5491392c0606"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "e08f6620-3476-4083-aa45-2efa27e3d095"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "d2e4297b-6807-4a65-99d3-df9f6772205c"}], "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "3277a397-c66f-4ec2-9642-02ee1850a6d4"}, "edge_type": "inherent", "type": "", "uuid": "d0dd32d4-2ee7-4065-a2c5-3c6c3d76cae9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "7b48ba12-e7e5-4df8-9e5e-10f674396ab0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "7b48ba12-e7e5-4df8-9e5e-10f674396ab0"}, "edge_type": "inherent", "type": "", "uuid": "fe0282f2-0ce6-41c7-ad01-ad0b0650c25c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "328aa5c9-3cad-4018-b591-2a23aaa2d312"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "382c708a-d573-4d75-8a72-5491392c0606"}, "edge_type": "inherent", "type": "", "uuid": "250e21bf-45fa-4ab2-a294-943edd103a24", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "d2e4297b-6807-4a65-99d3-df9f6772205c"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "328aa5c9-3cad-4018-b591-2a23aaa2d312"}, "edge_type": "inherent", "type": "", "uuid": "01d2ffea-1235-4d94-ae9b-79bb16697f2b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "382c708a-d573-4d75-8a72-5491392c0606"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "382c708a-d573-4d75-8a72-5491392c0606"}, "edge_type": "inherent", "type": "", "uuid": "f073319a-2ae6-453f-b98a-586781bf72ce", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "e08f6620-3476-4083-aa45-2efa27e3d095"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "e08f6620-3476-4083-aa45-2efa27e3d095"}, "edge_type": "inherent", "type": "", "uuid": "215cbc7b-fc38-4249-8757-47b2d3dd4526", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "d2e4297b-6807-4a65-99d3-df9f6772205c"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "559a5a34-fe8c-4fb2-9a9c-6a763676c9f3"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "f66bf8ec-0169-4729-b9d8-5897308824bc"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3277a397-c66f-4ec2-9642-02ee1850a6d4"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c9c07e72_runbook", "uuid": "feb878b1-4fe1-473a-8fce-91681f732eba"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7b48ba12-e7e5-4df8-9e5e-10f674396ab0"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "2a57e096-c65b-4c82-9686-7d519e2a25a3"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "328aa5c9-3cad-4018-b591-2a23aaa2d312"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "057e02a9-36bc-4376-90c0-5f8c91b276bd"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "382c708a-d573-4d75-8a72-5491392c0606"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "06360b02-add6-4789-9894-3ba13861e35e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e08f6620-3476-4083-aa45-2efa27e3d095"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "d2e4297b-6807-4a65-99d3-df9f6772205c"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "559a5a34-fe8c-4fb2-9a9c-6a763676c9f3"}, "message_list": [], "variable_list": [], "uuid": "9648d634-5122-405c-90b3-b9fdd031029d"}, "message_list": [], "name": "action_delete"}, {"description": "System action for scaleout", "type": "system", "uuid": "5964c90b-1f33-4c42-9b66-2559685cb79e", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scaleout_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "e78508b4-3e81-45ea-bbb9-a7cba239d4d0"}], "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "6578394e-31b6-436c-844b-790342cf87d1"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scaleout_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEOUT"}, "timeout_secs": "", "type": "SCALING", "variable_list": [], "uuid": "e78508b4-3e81-45ea-bbb9-a7cba239d4d0"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "6578394e-31b6-436c-844b-790342cf87d1"}, "message_list": [], "variable_list": [], "uuid": "1f06b99b-8d7a-4aaa-b53a-481420e512ff"}, "message_list": [], "name": "action_scaleout"}, {"description": "System action for scalein", "type": "system", "uuid": "ea7130b4-89f0-45cc-8286-42825ae1dbf6", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scalein_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "f3628215-5cca-4c6c-b744-86028fa9dc44"}], "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "0f92869a-549a-4d06-982d-02753209ba30"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scalein_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEIN"}, "timeout_secs": "", "type": "SCALING", "variable_list": [], "uuid": "f3628215-5cca-4c6c-b744-86028fa9dc44"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "0f92869a-549a-4d06-982d-02753209ba30"}, "message_list": [], "variable_list": [], "uuid": "c660863c-b786-4d85-b2f1-d0e5d9e8055b"}, "message_list": [], "name": "action_scalein"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "8b0464cf-9cf8-4665-9aa7-dc24e25817c5", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "bb86915c-4bf3-4cbd-b659-b00a38489f83"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "2061d102-0822-4c43-9dcd-b901637786e0"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "4db11fea-27ee-47e9-84b1-7c336cfcc56d"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "82a651a6-4cf3-4e71-a2bf-a5bdcd78e8f3"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "79d37461-c4d3-4261-96f1-fa26236ac149"}], "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "bb86915c-4bf3-4cbd-b659-b00a38489f83"}, "edge_type": "inherent", "type": "", "uuid": "3cf2f56f-98a3-4728-b2e4-e110b4732fad", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "2061d102-0822-4c43-9dcd-b901637786e0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "4db11fea-27ee-47e9-84b1-7c336cfcc56d"}, "edge_type": "inherent", "type": "", "uuid": "30979ee7-365a-4193-9e1f-3ad65a90de54", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "79d37461-c4d3-4261-96f1-fa26236ac149"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "4db11fea-27ee-47e9-84b1-7c336cfcc56d"}, "edge_type": "inherent", "type": "", "uuid": "d99827f5-e727-4e4e-8715-4099cff04073", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "82a651a6-4cf3-4e71-a2bf-a5bdcd78e8f3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "2061d102-0822-4c43-9dcd-b901637786e0"}, "edge_type": "inherent", "type": "", "uuid": "323f249e-07b7-4f0e-a4dd-3b2f63f9f7f2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "4db11fea-27ee-47e9-84b1-7c336cfcc56d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "82a651a6-4cf3-4e71-a2bf-a5bdcd78e8f3"}, "edge_type": "inherent", "type": "", "uuid": "1c1154b3-6315-40fb-b314-e9a3a0cbefa0", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "79d37461-c4d3-4261-96f1-fa26236ac149"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "ae3422b1-cf4c-4475-9004-2442e02e3c66"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3c8f0554_runbook", "uuid": "1517ef05-34e7-4ee9-b507-90c9ba60a6c8"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "bb86915c-4bf3-4cbd-b659-b00a38489f83"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "2061d102-0822-4c43-9dcd-b901637786e0"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "5f65265b-d542-41b1-9d58-42d74012643a"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4db11fea-27ee-47e9-84b1-7c336cfcc56d"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "82a651a6-4cf3-4e71-a2bf-a5bdcd78e8f3"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "79d37461-c4d3-4261-96f1-fa26236ac149"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "ae3422b1-cf4c-4475-9004-2442e02e3c66"}, "message_list": [], "variable_list": [], "uuid": "9db44811-f9a0-44c2-932c-4f7353eef2ba"}, "message_list": [], "name": "action_soft_delete"}], "message_list": [], "editables": {}, "name": "d584b567_deployment", "state": "ACTIVE", "max_replicas": "1", "package_local_reference_list": [{"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}], "substrate_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "min_replicas": "1", "variable_list": [], "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, {"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "2f73f06f-61db-4314-ae55-f50b02add1b2", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "e019ed19-e4b6-4874-b4df-2a2550564824"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "b30882c8-b092-4efe-8fc2-a7a5f6611757"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "63d86217-1fcc-44ad-b1d6-4a5d1be2e575"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "0b353186-d428-4078-a86c-921e982ba537"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "00994d1b-4578-47e0-ab85-5a93c3a93e85"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "5206a8c9-2d4a-40e9-bee8-c8a397a23ec5"}], "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "00994d1b-4578-47e0-ab85-5a93c3a93e85"}, "edge_type": "inherent", "type": "", "uuid": "73c86e1f-c3b8-4fd3-833a-c6799af82b8d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "5206a8c9-2d4a-40e9-bee8-c8a397a23ec5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "0b353186-d428-4078-a86c-921e982ba537"}, "edge_type": "inherent", "type": "", "uuid": "68bbfa62-fd29-4cc0-9857-90cdad7bfdc2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "00994d1b-4578-47e0-ab85-5a93c3a93e85"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "e019ed19-e4b6-4874-b4df-2a2550564824"}, "edge_type": "inherent", "type": "", "uuid": "78dd89fc-17cc-4609-bc91-5e6061022732", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "63d86217-1fcc-44ad-b1d6-4a5d1be2e575"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "e019ed19-e4b6-4874-b4df-2a2550564824"}, "edge_type": "inherent", "type": "", "uuid": "09382a2c-e79e-40e8-a16c-1295f2fbc479", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "b30882c8-b092-4efe-8fc2-a7a5f6611757"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "63d86217-1fcc-44ad-b1d6-4a5d1be2e575"}, "edge_type": "inherent", "type": "", "uuid": "12f1719d-753a-48b0-b8c8-09475e91bee8", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "0b353186-d428-4078-a86c-921e982ba537"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "b30882c8-b092-4efe-8fc2-a7a5f6611757"}, "edge_type": "inherent", "type": "", "uuid": "9834bd89-ad78-454a-aa96-e35cf1d53497", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "63d86217-1fcc-44ad-b1d6-4a5d1be2e575"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "6951f498-30f3-41cd-9de4-1339df8359de"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "e019ed19-e4b6-4874-b4df-2a2550564824"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "44d21222-8795-4ab2-8f5d-d81859c6a1a8"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b30882c8-b092-4efe-8fc2-a7a5f6611757"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "1fba8fa8-d94a-4f97-927a-b43045eab938"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "63d86217-1fcc-44ad-b1d6-4a5d1be2e575"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "f629e825-0e0c-4266-a03e-10d26baab25c"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0b353186-d428-4078-a86c-921e982ba537"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "658fecfa_runbook", "uuid": "199e8ff4-9c43-4ddd-856d-a7757097b1d8"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "00994d1b-4578-47e0-ab85-5a93c3a93e85"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "805f6a7b-16a9-4d5d-bd88-91e2f35da06e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5206a8c9-2d4a-40e9-bee8-c8a397a23ec5"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "6951f498-30f3-41cd-9de4-1339df8359de"}, "message_list": [], "variable_list": [], "uuid": "fa855d3e-dc06-427e-abfb-c9fde63bcbe2"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "b985bdb3-f11b-48d3-a13f-eb65d3854c0c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "15499be1-21d1-4e5c-9920-370b80dd728b"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "da2efb16-93d1-4934-9209-ec7f141a4716"}], "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "15499be1-21d1-4e5c-9920-370b80dd728b"}, "edge_type": "inherent", "type": "", "uuid": "d4aff68d-58ae-4ec5-b090-1d36660222b9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "da2efb16-93d1-4934-9209-ec7f141a4716"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "e350cc1c-3211-4f0c-9e6a-0928d07f8c2b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "001a2554-51a5-4af4-82a9-eaeb673b233f"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "15499be1-21d1-4e5c-9920-370b80dd728b"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "805f6a7b-16a9-4d5d-bd88-91e2f35da06e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "da2efb16-93d1-4934-9209-ec7f141a4716"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "e350cc1c-3211-4f0c-9e6a-0928d07f8c2b"}, "message_list": [], "variable_list": [], "uuid": "92851f65-2c93-4a39-9821-16786b6c1d44"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "76e16e35-a864-47f5-ac3b-abd0ada091bd", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "30ad813b-d8fa-4064-b334-3df6ddb8e284"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "6968635a-180b-4b7e-b1f5-a7c58cf0639d"}], "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "30ad813b-d8fa-4064-b334-3df6ddb8e284"}, "edge_type": "inherent", "type": "", "uuid": "3bc9e30c-5b11-41f6-8594-bb111d7c4572", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "6968635a-180b-4b7e-b1f5-a7c58cf0639d"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "c8184aa9-f6fe-48a2-a174-d47a79f565d7"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "20b9af03-467d-48cf-b12f-5fceadcb7091"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "30ad813b-d8fa-4064-b334-3df6ddb8e284"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "801f1d06-0cdf-481e-a9f0-9bcedd05a969"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6968635a-180b-4b7e-b1f5-a7c58cf0639d"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "c8184aa9-f6fe-48a2-a174-d47a79f565d7"}, "message_list": [], "variable_list": [], "uuid": "4e070764-7512-41e5-a42a-299f2c464fb8"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "e20d0355-9f4e-48da-91cc-9b0d61ca9bb0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "daf891c8-745d-4051-b3b5-6c53a4d95bc6"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "6e8f5e7d-047f-4e8e-95a3-301342733098"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "eae90aa0-2af4-430a-bfbe-a31bac006148"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "a8ea97d2-71f3-4ea2-bee6-fc05527d4c04"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "a72d3e57-c488-4be0-9458-e47ecdc6a7d6"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "ee23e7ef-9f42-484c-9515-191898a23253"}], "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "daf891c8-745d-4051-b3b5-6c53a4d95bc6"}, "edge_type": "inherent", "type": "", "uuid": "0d1e2229-0e7c-4db0-a5aa-6299a351c183", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "6e8f5e7d-047f-4e8e-95a3-301342733098"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "6e8f5e7d-047f-4e8e-95a3-301342733098"}, "edge_type": "inherent", "type": "", "uuid": "620edae7-677b-48d4-888e-c5043d0e8ba0", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "eae90aa0-2af4-430a-bfbe-a31bac006148"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "a8ea97d2-71f3-4ea2-bee6-fc05527d4c04"}, "edge_type": "inherent", "type": "", "uuid": "bbec92eb-f240-4e51-96e2-b82d4a4d646c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "a72d3e57-c488-4be0-9458-e47ecdc6a7d6"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "eae90aa0-2af4-430a-bfbe-a31bac006148"}, "edge_type": "inherent", "type": "", "uuid": "de8ba258-056b-4850-8b26-ee49dfc73911", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "a8ea97d2-71f3-4ea2-bee6-fc05527d4c04"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "a8ea97d2-71f3-4ea2-bee6-fc05527d4c04"}, "edge_type": "inherent", "type": "", "uuid": "9461f202-6baf-49f3-a746-5a29cb48d320", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "ee23e7ef-9f42-484c-9515-191898a23253"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "a72d3e57-c488-4be0-9458-e47ecdc6a7d6"}, "edge_type": "inherent", "type": "", "uuid": "3e412a7c-a28f-4626-84a6-19fbe978a0a2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "ee23e7ef-9f42-484c-9515-191898a23253"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "8b34ef70-b8ec-4358-a19c-97ae76cfbc24"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "20b9af03-467d-48cf-b12f-5fceadcb7091"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "daf891c8-745d-4051-b3b5-6c53a4d95bc6"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4356ce2d_runbook", "uuid": "1f0f7e64-583d-4d10-8311-4821fa50e553"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6e8f5e7d-047f-4e8e-95a3-301342733098"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "b5236296-bfb3-41f6-bc4c-9428cffb894d"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "eae90aa0-2af4-430a-bfbe-a31bac006148"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "cb215b2e-d97c-44fe-96be-d7ee27172c8c"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a8ea97d2-71f3-4ea2-bee6-fc05527d4c04"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "6d2dc801-671a-4351-8ff9-6736575392ef"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a72d3e57-c488-4be0-9458-e47ecdc6a7d6"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "ee23e7ef-9f42-484c-9515-191898a23253"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "8b34ef70-b8ec-4358-a19c-97ae76cfbc24"}, "message_list": [], "variable_list": [], "uuid": "c65c5b67-1bf1-4c1d-8839-dbf740dec230"}, "message_list": [], "name": "action_delete"}, {"description": "System action for scaleout", "type": "system", "uuid": "ac9e586d-4569-4857-9889-31fb96b90e5e", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scaleout_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "cfc3acaf-2701-4169-8447-c653386ea392"}], "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "62ff5d67-58ad-405d-9344-f19be1a35581"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scaleout_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEOUT"}, "timeout_secs": "", "type": "SCALING", "variable_list": [], "uuid": "cfc3acaf-2701-4169-8447-c653386ea392"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "62ff5d67-58ad-405d-9344-f19be1a35581"}, "message_list": [], "variable_list": [], "uuid": "d4b4ad1d-edbf-4278-b184-f4112089764d"}, "message_list": [], "name": "action_scaleout"}, {"description": "System action for scalein", "type": "system", "uuid": "308be9a6-531d-482f-bcdf-96f1314d4f06", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scalein_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "31f1f4e1-5b45-47a1-9acd-f37bc384d1c6"}], "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "cd2246fe-4648-4caf-af74-d319697a459b"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scalein_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEIN"}, "timeout_secs": "", "type": "SCALING", "variable_list": [], "uuid": "31f1f4e1-5b45-47a1-9acd-f37bc384d1c6"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "cd2246fe-4648-4caf-af74-d319697a459b"}, "message_list": [], "variable_list": [], "uuid": "e88a5a14-ae52-41d1-91a9-b3b7cbc8e71b"}, "message_list": [], "name": "action_scalein"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "14f26319-7169-412e-9e0a-d314a1c74f9f", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "2921e845-5e50-456f-87ce-3f4830644650"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "e2cb4e42-4eb9-4f55-a450-6011486923f0"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "4c1cd200-145f-4637-ab70-93b77efb0930"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "5bfa0d8f-98b9-495d-b890-f1c3659bd24a"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "c8bd147c-daa0-4754-bd9f-bb69f4b61188"}], "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "2921e845-5e50-456f-87ce-3f4830644650"}, "edge_type": "inherent", "type": "", "uuid": "0a33b15d-d8f6-4cd0-9066-96eef87f18d4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "e2cb4e42-4eb9-4f55-a450-6011486923f0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "4c1cd200-145f-4637-ab70-93b77efb0930"}, "edge_type": "inherent", "type": "", "uuid": "3db7a0c3-24c4-416d-a8f9-4c3b48e50baf", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "c8bd147c-daa0-4754-bd9f-bb69f4b61188"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "e2cb4e42-4eb9-4f55-a450-6011486923f0"}, "edge_type": "inherent", "type": "", "uuid": "266cac3b-e221-4939-a64a-5f92c9b8ef69", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "4c1cd200-145f-4637-ab70-93b77efb0930"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "4c1cd200-145f-4637-ab70-93b77efb0930"}, "edge_type": "inherent", "type": "", "uuid": "2c78a356-197d-42d3-b893-21f3e0cd5996", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "5bfa0d8f-98b9-495d-b890-f1c3659bd24a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "5bfa0d8f-98b9-495d-b890-f1c3659bd24a"}, "edge_type": "inherent", "type": "", "uuid": "91eaa1d9-aa14-4db8-a0f9-a5967bb6c8d0", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "c8bd147c-daa0-4754-bd9f-bb69f4b61188"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "831d6bd7-c344-4430-a92e-f052f0703de2"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "25b466fc_runbook", "uuid": "e1828d22-8260-4ca3-be26-d391ae9b069f"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2921e845-5e50-456f-87ce-3f4830644650"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "e2cb4e42-4eb9-4f55-a450-6011486923f0"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "0ea89944-1802-4423-b9a2-3996ae737ca0"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4c1cd200-145f-4637-ab70-93b77efb0930"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "5bfa0d8f-98b9-495d-b890-f1c3659bd24a"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "c8bd147c-daa0-4754-bd9f-bb69f4b61188"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "831d6bd7-c344-4430-a92e-f052f0703de2"}, "message_list": [], "variable_list": [], "uuid": "cae0eb71-b10f-44b4-b9e8-d937ae9c5b12"}, "message_list": [], "name": "action_soft_delete"}], "message_list": [], "editables": {"min_replicas": true}, "name": "ff8e191c_deployment", "state": "ACTIVE", "max_replicas": "1", "package_local_reference_list": [{"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}], "substrate_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "min_replicas": "1", "variable_list": [], "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}], "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "7005448e-0e75-4dbf-8215-efddef5a8d79", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "8fabd4af-626b-4491-8197-0c04bdb1a3d3"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "4f01df28-2b74-49b4-aa7d-1c3660f155e8"}, {"kind": "app_task", "name": "SYS_GEN__DE_Provision_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "eac9e746-8400-498b-9f8a-83c7e6d8ced5"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "496168fa-0cbb-4f6b-85dd-6ea7ab0fb111"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "b188cdf0-7da1-4843-962d-24690ebefc84"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "1630a9ce-32a6-42ed-8af8-0b9439fd00a4"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "735e4e24-8db7-4b52-aad9-53855e5cc61b"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "48d395f3-c95a-4b66-b822-cebb896aeab0"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "c400f9b3-4e30-4bd9-96ca-1ace3a2643c6"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "4f81bced-8c7c-4fef-b16d-0e8c94656a75"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "21b7ba7f-6396-4e47-87c7-24c61b69158d"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "e22eed45-808c-40a4-8b1b-bb7f7d8698ea"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "768d4892-2474-41ee-b520-4656395079d9"}], "name": "SYS_GEN__Composite_DAG_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "e22eed45-808c-40a4-8b1b-bb7f7d8698ea"}, "edge_type": "inherent", "type": "", "uuid": "6c1ba65a-2a6d-4419-8159-afbf9145a87f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "768d4892-2474-41ee-b520-4656395079d9"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "48d395f3-c95a-4b66-b822-cebb896aeab0"}, "edge_type": "inherent", "type": "", "uuid": "ec966b76-1f19-4b2f-b6aa-1ef7c4a3d34c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "e22eed45-808c-40a4-8b1b-bb7f7d8698ea"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "1630a9ce-32a6-42ed-8af8-0b9439fd00a4"}, "edge_type": "inherent", "type": "", "uuid": "b3f05223-552c-42dc-884c-1b3cede42846", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "48d395f3-c95a-4b66-b822-cebb896aeab0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "eac9e746-8400-498b-9f8a-83c7e6d8ced5"}, "edge_type": "inherent", "type": "", "uuid": "132c26c7-5483-449f-8529-acf7d9607875", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "496168fa-0cbb-4f6b-85dd-6ea7ab0fb111"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "eac9e746-8400-498b-9f8a-83c7e6d8ced5"}, "edge_type": "inherent", "type": "", "uuid": "90eb8e9c-9813-4dd0-97aa-a4e0bdf55412", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "1630a9ce-32a6-42ed-8af8-0b9439fd00a4"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "496168fa-0cbb-4f6b-85dd-6ea7ab0fb111"}, "edge_type": "inherent", "type": "", "uuid": "06e4ad9a-dc8b-469e-8c12-60607d2170ee", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "1630a9ce-32a6-42ed-8af8-0b9439fd00a4"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "4f81bced-8c7c-4fef-b16d-0e8c94656a75"}, "edge_type": "inherent", "type": "", "uuid": "2dac1e8f-9557-43ea-bc66-f2a5b0b123c6", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "21b7ba7f-6396-4e47-87c7-24c61b69158d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "c400f9b3-4e30-4bd9-96ca-1ace3a2643c6"}, "edge_type": "inherent", "type": "", "uuid": "c6bc3c7f-7e82-41a0-9d49-f4d766d08042", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "4f81bced-8c7c-4fef-b16d-0e8c94656a75"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "4f01df28-2b74-49b4-aa7d-1c3660f155e8"}, "edge_type": "inherent", "type": "", "uuid": "cffb197c-180f-48a5-a96a-fa007dc9bbfd", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "735e4e24-8db7-4b52-aad9-53855e5cc61b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "4f01df28-2b74-49b4-aa7d-1c3660f155e8"}, "edge_type": "inherent", "type": "", "uuid": "3dd10617-1252-4ac1-99ea-612649311d50", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "b188cdf0-7da1-4843-962d-24690ebefc84"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "735e4e24-8db7-4b52-aad9-53855e5cc61b"}, "edge_type": "inherent", "type": "", "uuid": "466ebc22-e8e3-4ada-b048-c355ea88f06e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "c400f9b3-4e30-4bd9-96ca-1ace3a2643c6"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "b188cdf0-7da1-4843-962d-24690ebefc84"}, "edge_type": "inherent", "type": "", "uuid": "fc338d47-b65b-470c-92be-7a56f4142991", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "735e4e24-8db7-4b52-aad9-53855e5cc61b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "735e4e24-8db7-4b52-aad9-53855e5cc61b"}, "edge_type": "dependency", "type": "", "uuid": "29efa491-4602-4593-9eaf-9c22f3b3895f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "48d395f3-c95a-4b66-b822-cebb896aeab0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "1630a9ce-32a6-42ed-8af8-0b9439fd00a4"}, "edge_type": "dependency", "type": "", "uuid": "5ac873f8-a57e-4cf1-affb-b5898c14b73b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "c400f9b3-4e30-4bd9-96ca-1ace3a2643c6"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "1630a9ce-32a6-42ed-8af8-0b9439fd00a4"}, "edge_type": "dependency", "type": "", "uuid": "86659881-baaf-4293-832a-5a6a52c6cc39", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "4f81bced-8c7c-4fef-b16d-0e8c94656a75"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "21b7ba7f-6396-4e47-87c7-24c61b69158d"}, "edge_type": "dependency", "type": "", "uuid": "728c16f7-085b-48df-87ea-7aa7cbe4a4a1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "e22eed45-808c-40a4-8b1b-bb7f7d8698ea"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "c24b8769-6f33-4b6f-9272-7182e0f5b281"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "4f01df28-2b74-49b4-aa7d-1c3660f155e8"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "eac9e746-8400-498b-9f8a-83c7e6d8ced5"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "3f758093-68e1-4d3f-bef6-6868d4ab7a7b"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "496168fa-0cbb-4f6b-85dd-6ea7ab0fb111"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "44d21222-8795-4ab2-8f5d-d81859c6a1a8"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b188cdf0-7da1-4843-962d-24690ebefc84"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "8034a373-84b1-4136-80fc-c5164dcd698c"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "1630a9ce-32a6-42ed-8af8-0b9439fd00a4"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "1fba8fa8-d94a-4f97-927a-b43045eab938"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "735e4e24-8db7-4b52-aad9-53855e5cc61b"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "c747f16b-a5f6-4b24-b10b-f401eeda5e2a"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "48d395f3-c95a-4b66-b822-cebb896aeab0"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "f629e825-0e0c-4266-a03e-10d26baab25c"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c400f9b3-4e30-4bd9-96ca-1ace3a2643c6"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "658fecfa_runbook", "uuid": "199e8ff4-9c43-4ddd-856d-a7757097b1d8"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4f81bced-8c7c-4fef-b16d-0e8c94656a75"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "805f6a7b-16a9-4d5d-bd88-91e2f35da06e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "21b7ba7f-6396-4e47-87c7-24c61b69158d"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "80edfe72_runbook", "uuid": "63e53c88-2560-4cf2-a8c6-e06448448e02"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e22eed45-808c-40a4-8b1b-bb7f7d8698ea"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "ea443da9-8633-414a-9848-5cbc90210734"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "768d4892-2474-41ee-b520-4656395079d9"}], "description": "", "name": "SYS_GEN__Runbook_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "uuid": "c24b8769-6f33-4b6f-9272-7182e0f5b281"}, "message_list": [], "variable_list": [], "uuid": "34b65778-ad45-4396-973e-5b2f91b952e7"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "a435ee2d-d6b0-4219-80f7-03072c211f09", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "8fabd4af-626b-4491-8197-0c04bdb1a3d3"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "ba3d0e60-d78c-4aca-b119-f436a0d54ee4"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "a0d434f8-a2db-4c1e-8411-848085a5ccc0"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "262a2105-574a-4095-839a-f9370608aaa4"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "cb720feb-7119-4f37-8e51-a27aaf047caf"}], "name": "SYS_GEN__Composite_DAG_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "ba3d0e60-d78c-4aca-b119-f436a0d54ee4"}, "edge_type": "inherent", "type": "", "uuid": "770559fb-6a74-4c19-8f3e-3dc157fbb4ca", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "cb720feb-7119-4f37-8e51-a27aaf047caf"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "a0d434f8-a2db-4c1e-8411-848085a5ccc0"}, "edge_type": "inherent", "type": "", "uuid": "54bf8265-d407-49ec-8e33-fe52d73af814", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "262a2105-574a-4095-839a-f9370608aaa4"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "ba3d0e60-d78c-4aca-b119-f436a0d54ee4"}, "edge_type": "create_action_edge", "type": "", "uuid": "b02477df-8da5-4a6f-a9c1-94fc2d8c9cd8", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "262a2105-574a-4095-839a-f9370608aaa4"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "262a2105-574a-4095-839a-f9370608aaa4"}, "edge_type": "create_action_edge", "type": "", "uuid": "0d7e16f0-a636-4430-a225-7e4f25cdf09f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "cb720feb-7119-4f37-8e51-a27aaf047caf"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "8e05c876-d528-4f39-a407-4d1ddde7e84d"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "f6353094-d23b-4f56-9e44-b0424e4597de"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ba3d0e60-d78c-4aca-b119-f436a0d54ee4"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "001a2554-51a5-4af4-82a9-eaeb673b233f"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a0d434f8-a2db-4c1e-8411-848085a5ccc0"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "805f6a7b-16a9-4d5d-bd88-91e2f35da06e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "262a2105-574a-4095-839a-f9370608aaa4"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "ea443da9-8633-414a-9848-5cbc90210734"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "cb720feb-7119-4f37-8e51-a27aaf047caf"}], "description": "", "name": "SYS_GEN__Runbook_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "uuid": "8e05c876-d528-4f39-a407-4d1ddde7e84d"}, "message_list": [], "variable_list": [], "uuid": "b354a6d6-27b6-4176-a4e6-ab450286da1d"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "3e964fa9-af87-431b-ad2e-9e79ee886052", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "8fabd4af-626b-4491-8197-0c04bdb1a3d3"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "4b4f372d-1c83-4fe3-af8c-f2c210e22374"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "bd839ecd-a3ff-4d4d-ae32-aa0cfc3d2dcc"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "03eb0745-0c33-47fa-a678-3bc1817bd4fe"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "61da9aa7-a781-4c8b-b7bc-8e1bc329fa80"}], "name": "SYS_GEN__Composite_DAG_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "4b4f372d-1c83-4fe3-af8c-f2c210e22374"}, "edge_type": "inherent", "type": "", "uuid": "2308d042-152b-4747-9c85-1adaf45644c5", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "61da9aa7-a781-4c8b-b7bc-8e1bc329fa80"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "bd839ecd-a3ff-4d4d-ae32-aa0cfc3d2dcc"}, "edge_type": "inherent", "type": "", "uuid": "50ead795-5a04-477f-a2da-9060a0c406e5", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "03eb0745-0c33-47fa-a678-3bc1817bd4fe"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "bd839ecd-a3ff-4d4d-ae32-aa0cfc3d2dcc"}, "edge_type": "create_action_edge", "type": "", "uuid": "db359a72-41ef-4d0c-8223-eefcc1275099", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "61da9aa7-a781-4c8b-b7bc-8e1bc329fa80"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "4b4f372d-1c83-4fe3-af8c-f2c210e22374"}, "edge_type": "create_action_edge", "type": "", "uuid": "46110580-a2c6-4e24-8bfc-c57c8be68f59", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "bd839ecd-a3ff-4d4d-ae32-aa0cfc3d2dcc"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "3a389869-42a3-4304-8c9b-78e05669d0fb"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "f66bf8ec-0169-4729-b9d8-5897308824bc"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4b4f372d-1c83-4fe3-af8c-f2c210e22374"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "20b9af03-467d-48cf-b12f-5fceadcb7091"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "bd839ecd-a3ff-4d4d-ae32-aa0cfc3d2dcc"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "801f1d06-0cdf-481e-a9f0-9bcedd05a969"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "03eb0745-0c33-47fa-a678-3bc1817bd4fe"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "8020804a-139d-47a4-b728-9ae9cd56bc12"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "61da9aa7-a781-4c8b-b7bc-8e1bc329fa80"}], "description": "", "name": "SYS_GEN__Runbook_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "uuid": "3a389869-42a3-4304-8c9b-78e05669d0fb"}, "message_list": [], "variable_list": [], "uuid": "78265878-d153-4397-8ff8-16e75971e92d"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "25415eff-3071-4b93-994b-29e494e1f0d0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "8fabd4af-626b-4491-8197-0c04bdb1a3d3"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "fb726ac8-5ef3-466b-939d-7b789731bbd9"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "ac16f22e-40e1-4e00-99d7-777e7b5b2743"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "6e4de0b3-07fa-4994-b91e-a5e99ddffa2d"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "7a858099-cc3f-4a48-8883-27fb6f5639d4"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "2e75a156-1069-484c-ae6c-cc243246bba7"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "cdcb2f1e-a096-4380-8ed0-2039bf5d65f1"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "523ba44c-9f99-461e-adc5-f23f9b8f610a"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "82268dc7-0cb0-4af9-a7b7-12f9a95e67c9"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "35fed271-2d4f-4cb5-8931-72bf4dce7dd3"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "b2e3e909-988d-4f7e-9238-a883100b6153"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "5b6abb5f-b063-4fb5-aaad-e04f7f1787f6"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "4435cfbd-1daf-4db0-ad14-8ec1c6a2ac83"}], "name": "SYS_GEN__Composite_DAG_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "fb726ac8-5ef3-466b-939d-7b789731bbd9"}, "edge_type": "inherent", "type": "", "uuid": "d9d9c030-3d5b-4887-873f-1aeea7a75eef", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "ac16f22e-40e1-4e00-99d7-777e7b5b2743"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "ac16f22e-40e1-4e00-99d7-777e7b5b2743"}, "edge_type": "inherent", "type": "", "uuid": "6c9bb9af-79d0-4f3b-a2ed-c6e318e2bb6f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "6e4de0b3-07fa-4994-b91e-a5e99ddffa2d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "523ba44c-9f99-461e-adc5-f23f9b8f610a"}, "edge_type": "inherent", "type": "", "uuid": "72a6c16e-6c9d-4647-9930-aefeddc27bd6", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "4435cfbd-1daf-4db0-ad14-8ec1c6a2ac83"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "6e4de0b3-07fa-4994-b91e-a5e99ddffa2d"}, "edge_type": "inherent", "type": "", "uuid": "e55070af-85c6-44df-ba21-ba7c6d46b330", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "523ba44c-9f99-461e-adc5-f23f9b8f610a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "523ba44c-9f99-461e-adc5-f23f9b8f610a"}, "edge_type": "inherent", "type": "", "uuid": "22305d66-7c64-4bef-9059-9760a96ed214", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "35fed271-2d4f-4cb5-8931-72bf4dce7dd3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "35fed271-2d4f-4cb5-8931-72bf4dce7dd3"}, "edge_type": "inherent", "type": "", "uuid": "67374148-f170-48c6-b089-61a888287e30", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "4435cfbd-1daf-4db0-ad14-8ec1c6a2ac83"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "7a858099-cc3f-4a48-8883-27fb6f5639d4"}, "edge_type": "inherent", "type": "", "uuid": "164d8fea-e9c6-4214-982e-b1f206efff7f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "2e75a156-1069-484c-ae6c-cc243246bba7"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "2e75a156-1069-484c-ae6c-cc243246bba7"}, "edge_type": "inherent", "type": "", "uuid": "d2c80c49-8f91-4e06-aaad-428b0fd46e3a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "cdcb2f1e-a096-4380-8ed0-2039bf5d65f1"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "82268dc7-0cb0-4af9-a7b7-12f9a95e67c9"}, "edge_type": "inherent", "type": "", "uuid": "033ef394-c77a-490d-aa3d-332f3c0b0575", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "b2e3e909-988d-4f7e-9238-a883100b6153"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "cdcb2f1e-a096-4380-8ed0-2039bf5d65f1"}, "edge_type": "inherent", "type": "", "uuid": "43fb3fbf-c2d4-4028-8187-ff8cec54961f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "82268dc7-0cb0-4af9-a7b7-12f9a95e67c9"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "82268dc7-0cb0-4af9-a7b7-12f9a95e67c9"}, "edge_type": "inherent", "type": "", "uuid": "62b2cadb-4a3d-4e99-b050-3bd1bc779474", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "5b6abb5f-b063-4fb5-aaad-e04f7f1787f6"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "b2e3e909-988d-4f7e-9238-a883100b6153"}, "edge_type": "inherent", "type": "", "uuid": "74d586fe-f953-4448-8053-8ec66fd9cc6e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "5b6abb5f-b063-4fb5-aaad-e04f7f1787f6"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "6e4de0b3-07fa-4994-b91e-a5e99ddffa2d"}, "edge_type": "create_action_edge", "type": "", "uuid": "42efe6e4-4d2e-4c44-95d8-08429b0276b5", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "82268dc7-0cb0-4af9-a7b7-12f9a95e67c9"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "cdcb2f1e-a096-4380-8ed0-2039bf5d65f1"}, "edge_type": "create_action_edge", "type": "", "uuid": "8f006527-879e-40f2-b05d-e43677def887", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "523ba44c-9f99-461e-adc5-f23f9b8f610a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "2e75a156-1069-484c-ae6c-cc243246bba7"}, "edge_type": "create_action_edge", "type": "", "uuid": "c524140e-c45c-4244-985b-04f3a72e666f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "523ba44c-9f99-461e-adc5-f23f9b8f610a"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "ac16f22e-40e1-4e00-99d7-777e7b5b2743"}, "edge_type": "create_action_edge", "type": "", "uuid": "75bef101-3b13-4fad-8d14-2c2c7ee1a617", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "7a858099-cc3f-4a48-8883-27fb6f5639d4"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2b06619f-ffe3-4571-8bf8-77bbfdcdd49d"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "f66bf8ec-0169-4729-b9d8-5897308824bc"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "fb726ac8-5ef3-466b-939d-7b789731bbd9"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c9c07e72_runbook", "uuid": "feb878b1-4fe1-473a-8fce-91681f732eba"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ac16f22e-40e1-4e00-99d7-777e7b5b2743"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "2a57e096-c65b-4c82-9686-7d519e2a25a3"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6e4de0b3-07fa-4994-b91e-a5e99ddffa2d"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "20b9af03-467d-48cf-b12f-5fceadcb7091"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7a858099-cc3f-4a48-8883-27fb6f5639d4"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4356ce2d_runbook", "uuid": "1f0f7e64-583d-4d10-8311-4821fa50e553"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2e75a156-1069-484c-ae6c-cc243246bba7"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "b5236296-bfb3-41f6-bc4c-9428cffb894d"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "cdcb2f1e-a096-4380-8ed0-2039bf5d65f1"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "057e02a9-36bc-4376-90c0-5f8c91b276bd"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "523ba44c-9f99-461e-adc5-f23f9b8f610a"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "cb215b2e-d97c-44fe-96be-d7ee27172c8c"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "82268dc7-0cb0-4af9-a7b7-12f9a95e67c9"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "06360b02-add6-4789-9894-3ba13861e35e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "35fed271-2d4f-4cb5-8931-72bf4dce7dd3"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "6d2dc801-671a-4351-8ff9-6736575392ef"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b2e3e909-988d-4f7e-9238-a883100b6153"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "5b6abb5f-b063-4fb5-aaad-e04f7f1787f6"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "4435cfbd-1daf-4db0-ad14-8ec1c6a2ac83"}], "description": "", "name": "SYS_GEN__Runbook_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "uuid": "2b06619f-ffe3-4571-8bf8-77bbfdcdd49d"}, "message_list": [], "variable_list": [], "uuid": "ba88fc4b-44c1-4f75-aeeb-9383199caaf7"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "2842e95c-630b-4996-8394-057da7d75b05", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "8fabd4af-626b-4491-8197-0c04bdb1a3d3"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "6eaf0c05-0f7a-49a1-915a-595d816d7d66"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "fed5e362-0c10-47ab-ba35-f1410a57fc46"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "bd3f26aa-d66d-44b4-84eb-f80e6e6edcd5"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "dc06e786-9c0d-4e6d-b327-ea498166ae2f"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "5065aaef-5066-4213-8139-edbd4b8f6059"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "215ada1c-f32d-45a1-a20f-f3ac2089796b"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "2dc21e3d-19b5-4112-9843-39d751fae18e"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "26bd6b8c-530e-4fc2-9556-df760be9bda1"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "87d3927d-6360-4a4c-bd70-f60f734d0cbf"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "b75eba4e-68f3-4ac4-b141-40a93aac1ecb"}], "name": "SYS_GEN__Composite_DAG_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "6eaf0c05-0f7a-49a1-915a-595d816d7d66"}, "edge_type": "inherent", "type": "", "uuid": "6bedd5d1-0ed3-4cce-a122-e5bdba2b1f68", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "bd3f26aa-d66d-44b4-84eb-f80e6e6edcd5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "5065aaef-5066-4213-8139-edbd4b8f6059"}, "edge_type": "inherent", "type": "", "uuid": "9b1c7314-d681-42ce-8f8e-ae51f390be01", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "b75eba4e-68f3-4ac4-b141-40a93aac1ecb"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "5065aaef-5066-4213-8139-edbd4b8f6059"}, "edge_type": "inherent", "type": "", "uuid": "abdc5f21-8452-489d-a2d9-f2b4ee7327c3", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "2dc21e3d-19b5-4112-9843-39d751fae18e"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "bd3f26aa-d66d-44b4-84eb-f80e6e6edcd5"}, "edge_type": "inherent", "type": "", "uuid": "8d741f27-a3de-4008-9ea7-8277b506a33f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "5065aaef-5066-4213-8139-edbd4b8f6059"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "2dc21e3d-19b5-4112-9843-39d751fae18e"}, "edge_type": "inherent", "type": "", "uuid": "50417275-2fb8-46c9-8132-ff1dc1bf943e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "uuid": "b75eba4e-68f3-4ac4-b141-40a93aac1ecb"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "fed5e362-0c10-47ab-ba35-f1410a57fc46"}, "edge_type": "inherent", "type": "", "uuid": "23155dbe-28ae-44e8-bb40-7d6353054f17", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "dc06e786-9c0d-4e6d-b327-ea498166ae2f"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "215ada1c-f32d-45a1-a20f-f3ac2089796b"}, "edge_type": "inherent", "type": "", "uuid": "70647e08-8f52-4c45-8a94-97f7b1b4c5ef", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "87d3927d-6360-4a4c-bd70-f60f734d0cbf"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "dc06e786-9c0d-4e6d-b327-ea498166ae2f"}, "edge_type": "inherent", "type": "", "uuid": "9da35f92-7811-4e7e-b57a-c12f7f87dda3", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "215ada1c-f32d-45a1-a20f-f3ac2089796b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "215ada1c-f32d-45a1-a20f-f3ac2089796b"}, "edge_type": "inherent", "type": "", "uuid": "2320186e-85dc-4c42-afcd-03b8b34de2e0", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "26bd6b8c-530e-4fc2-9556-df760be9bda1"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "26bd6b8c-530e-4fc2-9556-df760be9bda1"}, "edge_type": "inherent", "type": "", "uuid": "533ae229-4b17-43df-bc88-1f2d1a5c0505", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "uuid": "87d3927d-6360-4a4c-bd70-f60f734d0cbf"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "bd3f26aa-d66d-44b4-84eb-f80e6e6edcd5"}, "edge_type": "create_action_edge", "type": "", "uuid": "ce0a25cb-a04f-4812-8eaa-625af2f6d603", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "215ada1c-f32d-45a1-a20f-f3ac2089796b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "dc06e786-9c0d-4e6d-b327-ea498166ae2f"}, "edge_type": "create_action_edge", "type": "", "uuid": "0dc7c32d-2c1a-41e8-b0dd-d3bff8aca8cc", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "5065aaef-5066-4213-8139-edbd4b8f6059"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "fed5e362-0c10-47ab-ba35-f1410a57fc46"}, "edge_type": "create_action_edge", "type": "", "uuid": "dc8e16d5-e844-4b26-a2b7-4713e8e2e2c1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "5065aaef-5066-4213-8139-edbd4b8f6059"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "6eaf0c05-0f7a-49a1-915a-595d816d7d66"}, "edge_type": "create_action_edge", "type": "", "uuid": "65b4dcb5-0cc5-49f8-88d2-48922dde103f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "fed5e362-0c10-47ab-ba35-f1410a57fc46"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "dbc552b1-a14c-4432-934e-f03ffede1348"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3c8f0554_runbook", "uuid": "1517ef05-34e7-4ee9-b507-90c9ba60a6c8"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6eaf0c05-0f7a-49a1-915a-595d816d7d66"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "25b466fc_runbook", "uuid": "e1828d22-8260-4ca3-be26-d391ae9b069f"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "fed5e362-0c10-47ab-ba35-f1410a57fc46"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "bd3f26aa-d66d-44b4-84eb-f80e6e6edcd5"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "dc06e786-9c0d-4e6d-b327-ea498166ae2f"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "3908ef79-f685-4f20-a356-a452e1a0fb90"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_3908ef79_f685_4f20_a356_a452e1a0fb90", "uuid": "5f65265b-d542-41b1-9d58-42d74012643a"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5065aaef-5066-4213-8139-edbd4b8f6059"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "a4499bd7-31f7-4705-84e1-3a9ce764324e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_a4499bd7_31f7_4705_84e1_3a9ce764324e", "uuid": "0ea89944-1802-4423-b9a2-3996ae737ca0"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "215ada1c-f32d-45a1-a20f-f3ac2089796b"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "2dc21e3d-19b5-4112-9843-39d751fae18e"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "26bd6b8c-530e-4fc2-9556-df760be9bda1"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "83b63515-00a7-4fbc-8ca4-66ccf6914891"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_83b63515_00a7_4fbc_8ca4_66ccf6914891", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "87d3927d-6360-4a4c-bd70-f60f734d0cbf"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "fae6fd4b-9912-4170-88aa-6c159aaca0de"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_fae6fd4b_9912_4170_88aa_6c159aaca0de", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "b75eba4e-68f3-4ac4-b141-40a93aac1ecb"}], "description": "", "name": "SYS_GEN__Runbook_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_8fabd4af_626b_4491_8197_0c04bdb1a3d3", "uuid": "dbc552b1-a14c-4432-934e-f03ffede1348"}, "message_list": [], "variable_list": [], "uuid": "5d5f589f-df4c-47e7-9e3f-322976ec346e"}, "message_list": [], "name": "action_soft_delete"}], "name": "Nutanix", "state": "ACTIVE", "message_list": [], "dependency_list": [{"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SM", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "K8SCP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "K8SCP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SM", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "K8SMP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "K8SMP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "ServiceCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "Kubernetes_Minion", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "ServiceCfg", "setter_resource_attr": "COMPLETE", "setter_resource_kind": "ServiceCfg", "setter_resource_name": "Kubernetes_Minion", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "Kubernetes_Master", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "ServiceCfg", "setter_resource_attr": "COMPLETE", "setter_resource_kind": "ServiceCfg", "setter_resource_name": "Kubernetes_Minion", "action_name": "action_start", "action_resource_name": "Nutanix", "getter_resource_name": "Kubernetes_Master", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "d584b567_deployment", "getter_resource_name": "K8SCP", "action_resource_kind": "DeploymentCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SM", "action_name": "action_create", "action_resource_name": "ff8e191c_deployment", "getter_resource_name": "K8SMP", "action_resource_kind": "DeploymentCfg"}], "variable_list": [{"val_type": "STRING", "description": "", "name": "KUBERNETES_VERSION", "type": "LOCAL", "value": "v1.7.7", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {}, "message_list": [], "uuid": "62e68e7c-c526-4d19-9981-2b23bfb44565"}, {"val_type": "STRING", "description": "", "name": "CLUSTER_SUBNET", "type": "LOCAL", "value": "10.200.0.0/16", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "00736349-ac63-47a4-acd2-f13cdeea789a"}, {"val_type": "STRING", "description": "", "name": "SERVICE_SUBNET", "type": "LOCAL", "value": "10.32.0.0/24", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "b01fbaa9-3c8a-4048-874c-17518be39d1a"}, {"val_type": "STRING", "description": "", "name": "KUBE_CLUSTER_DNS", "type": "LOCAL", "value": "10.32.0.10", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "382cb9a9-8f2d-497f-9ffb-b7db02e9c826"}, {"val_type": "STRING", "description": "", "name": "PRISM_CLUSTER_IP", "type": "LOCAL", "value": "10.21.81.37", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "dd3c9ef9-21a1-442f-9ecd-b766fe687e55"}, {"val_type": "STRING", "description": "", "name": "PRISM_DATA_SERVICE_IP", "type": "LOCAL", "value": "10.21.81.38", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "ac1f1819-139e-40c1-9eb4-22fe353e9d37"}, {"val_type": "STRING", "description": "", "name": "PRISM_USERNAME", "type": "LOCAL", "value": "admin", "label": "", "state": "ACTIVE", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "a9c93a16-3247-4685-a768-c32f334d3e06"}, {"val_type": "STRING", "description": "", "name": "PRISM_PASSWORD", "type": "SECRET", "value": "", "label": "", "state": "ACTIVE", "attrs": {"is_secret_modified": false, "secret_reference": {"uuid": "56fbaee4-7265-4c2f-a153-dcdc70a5d115"}, "type": ""}, "editables": {}, "message_list": [], "uuid": "01f582e4-6ea5-461f-89c5-34b240828cec"}, {"val_type": "STRING", "description": "", "name": "CONTAINER_NAME", "type": "LOCAL", "value": "Kubernetes-Container", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "b1322055-2371-4319-9059-e034c7e0bd8f"}, {"val_type": "STRING", "description": "", "name": "INSTANCE_PUBLIC_KEY", "type": "LOCAL", "value": "ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEAnAA/ZWcC6tLvxm1blk7LXcoLw4MFDWaWKMvCnHKGB4eGKQNwP/ZPDAydPVBE4iihSjrNQmwheP5Z7ZYp8Z0NVh00YBchfdg3HXqb6ISFP8PThOZv4v6EWPuzflV5M39evN5wbUyGHFLDbvEHOgGxz3BlTPAytC3nwdaYPc+vyTjNglPLEnHlsFszED7L1yDa5Z8H4P8ljvEAoxTfYrtK3rfpm7D7ANdvzkmg/MN5pJ74q0C3euAFIE+YL+M5FD9cHMM2IYmy57F1V6quXY4p0FemyuEUPVRDcrdcRGvouzBs27HERTySpJUDZ1uGH5ilJhyXy8qfHtj7OwHWn5K3Iw== rsa-key-20171206", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "d87c8486-9655-4262-ba08-e2f873bf5615"}], "uuid": "8fabd4af-626b-4491-8197-0c04bdb1a3d3"}], "default_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}, "package_definition_list": [{"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "5334adad-40b6-41ee-911a-9c5f53f996d2", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Install_Crb_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "80b3f9bd-83a1-4f47-a174-6a09fdc336f5"}], "name": "SYS_GEN__DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "8063ddd3-c1e8-4fca-b25e-8fc6fc291610"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Install_Crb_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "4911a95e-8e61-4f2e-a051-40f1d5a78b56"}], "name": "eaae934f_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "b5d9a3ef-1887-45fb-bf0e-1d375a841144"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "4911a95e-8e61-4f2e-a051-40f1d5a78b56"}], "description": "", "name": "250a0dd1_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag", "uuid": "b5d9a3ef-1887-45fb-bf0e-1d375a841144"}, "message_list": [], "variable_list": [], "uuid": "a4d671c5-c39f-403a-a6cf-7111fe930484"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "c3687576-2fbc-4b39-af19-c0ed50e6f369"}], "name": "cfa35d5b_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "143952d9-0e9b-4939-840e-562272ff8475"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "c3687576-2fbc-4b39-af19-c0ed50e6f369"}], "description": "", "name": "6f5a2b1c_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag", "uuid": "143952d9-0e9b-4939-840e-562272ff8475"}, "message_list": [], "variable_list": [], "uuid": "cc433eb3-379e-4ead-bc1a-7a8e2ec2bd1a"}}, "timeout_secs": "", "type": "CUSTOM_PACKAGE_INSTALL", "variable_list": [], "uuid": "80b3f9bd-83a1-4f47-a174-6a09fdc336f5"}], "description": "", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "8063ddd3-c1e8-4fca-b25e-8fc6fc291610"}, "message_list": [], "variable_list": [], "uuid": "c747f16b-a5f6-4b24-b10b-f401eeda5e2a"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "0508493e-9c29-4ff1-9ced-05c38077a90a", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "338d6298-c4e9-45c3-9231-da8540a864aa"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "a9b6b111-8dd4-4cb2-b97b-5eb5fc39da5d"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "57383bb2-cf6c-4827-ba9f-53f197d34f20"}], "name": "SYS_GEN__Composite_DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "a9b6b111-8dd4-4cb2-b97b-5eb5fc39da5d"}, "edge_type": "inherent", "type": "", "uuid": "d3421158-3d6d-4d10-9d9f-8f6b3523bb47", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "57383bb2-cf6c-4827-ba9f-53f197d34f20"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "338d6298-c4e9-45c3-9231-da8540a864aa"}, "edge_type": "inherent", "type": "", "uuid": "7c710926-fbd2-4e4f-86b1-3d8103d5309a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "a9b6b111-8dd4-4cb2-b97b-5eb5fc39da5d"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "dcb64c2a-2aef-40da-99b6-5c43e6437eea"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "c747f16b-a5f6-4b24-b10b-f401eeda5e2a"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "338d6298-c4e9-45c3-9231-da8540a864aa"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "80edfe72_runbook", "uuid": "63e53c88-2560-4cf2-a8c6-e06448448e02"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a9b6b111-8dd4-4cb2-b97b-5eb5fc39da5d"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "ea443da9-8633-414a-9848-5cbc90210734"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "57383bb2-cf6c-4827-ba9f-53f197d34f20"}], "description": "", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "dcb64c2a-2aef-40da-99b6-5c43e6437eea"}, "message_list": [], "variable_list": [], "uuid": "cfc55cf6-2064-459f-9ab3-d983336ad401"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "b8f129bf-2705-4179-abe2-78b5454a52a6", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Uninstall_Crb_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "c74f00d0-8f1e-475b-a8d1-ad01b94129f3"}], "name": "SYS_GEN__DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "f869025a-3575-4590-a463-299f68ea1282"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Uninstall_Crb_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "4911a95e-8e61-4f2e-a051-40f1d5a78b56"}], "name": "eaae934f_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "b5d9a3ef-1887-45fb-bf0e-1d375a841144"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "4911a95e-8e61-4f2e-a051-40f1d5a78b56"}], "description": "", "name": "250a0dd1_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag", "uuid": "b5d9a3ef-1887-45fb-bf0e-1d375a841144"}, "message_list": [], "variable_list": [], "uuid": "a4d671c5-c39f-403a-a6cf-7111fe930484"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "c3687576-2fbc-4b39-af19-c0ed50e6f369"}], "name": "cfa35d5b_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "143952d9-0e9b-4939-840e-562272ff8475"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "c3687576-2fbc-4b39-af19-c0ed50e6f369"}], "description": "", "name": "6f5a2b1c_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag", "uuid": "143952d9-0e9b-4939-840e-562272ff8475"}, "message_list": [], "variable_list": [], "uuid": "cc433eb3-379e-4ead-bc1a-7a8e2ec2bd1a"}}, "timeout_secs": "", "type": "CUSTOM_PACKAGE_UNINSTALL", "variable_list": [], "uuid": "c74f00d0-8f1e-475b-a8d1-ad01b94129f3"}], "description": "", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "f869025a-3575-4590-a463-299f68ea1282"}, "message_list": [], "variable_list": [], "uuid": "2a57e096-c65b-4c82-9686-7d519e2a25a3"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "2d7b9079-f76e-4a74-aeb9-7e458077b5e2", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "c3c2aca6-a465-41cb-b1b8-8d284e325849"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "c20f3c80-d182-4a1c-b056-f6019253a6af"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "46ee8fb2-5350-40da-8391-a7b75f31d792"}], "name": "SYS_GEN__Composite_DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "c3c2aca6-a465-41cb-b1b8-8d284e325849"}, "edge_type": "inherent", "type": "", "uuid": "3edd2fa4-09f3-4c8c-88fe-c18198ea8e54", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "c20f3c80-d182-4a1c-b056-f6019253a6af"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "c20f3c80-d182-4a1c-b056-f6019253a6af"}, "edge_type": "inherent", "type": "", "uuid": "d9605ad4-f473-4e7b-be38-d1957b491264", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "46ee8fb2-5350-40da-8391-a7b75f31d792"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "b1010f76-3fa8-4c1b-8fbb-b3dcbc0bb6ba"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "f66bf8ec-0169-4729-b9d8-5897308824bc"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c3c2aca6-a465-41cb-b1b8-8d284e325849"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c9c07e72_runbook", "uuid": "feb878b1-4fe1-473a-8fce-91681f732eba"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c20f3c80-d182-4a1c-b056-f6019253a6af"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "2a57e096-c65b-4c82-9686-7d519e2a25a3"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "46ee8fb2-5350-40da-8391-a7b75f31d792"}], "description": "", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "b1010f76-3fa8-4c1b-8fbb-b3dcbc0bb6ba"}, "message_list": [], "variable_list": [], "uuid": "f7881458-15ef-4ed7-8dc8-4a080f01db31"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "462ccc59-3ce9-4aa1-9027-4a03713e4a1b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "a47ef30e-01c2-48d9-9153-7e3054d63370"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "4d95d09b-71d7-479b-986c-d57ec8ead6cc"}], "name": "SYS_GEN__Composite_DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "a47ef30e-01c2-48d9-9153-7e3054d63370"}, "edge_type": "inherent", "type": "", "uuid": "b37c2628-9f38-43d7-9267-379f2b5f3006", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "4d95d09b-71d7-479b-986c-d57ec8ead6cc"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "1abb853b-7861-49eb-9df8-7052e060294d"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3c8f0554_runbook", "uuid": "1517ef05-34e7-4ee9-b507-90c9ba60a6c8"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a47ef30e-01c2-48d9-9153-7e3054d63370"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "4d95d09b-71d7-479b-986c-d57ec8ead6cc"}], "description": "", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "1abb853b-7861-49eb-9df8-7052e060294d"}, "message_list": [], "variable_list": [], "uuid": "254d6394-e430-4a48-a43d-abcb0a2ba362"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "d861424c-02e8-475f-93e1-d9489af68327", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "2b0d26dd-6c23-40d6-9e0f-4787d10f028f"}], "name": "SYS_GEN__Composite_DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "69575970-2d93-4ba8-9e96-688aaa7eb14b"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "ea443da9-8633-414a-9848-5cbc90210734"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2b0d26dd-6c23-40d6-9e0f-4787d10f028f"}], "description": "", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "69575970-2d93-4ba8-9e96-688aaa7eb14b"}, "message_list": [], "variable_list": [], "uuid": "eb1542e6-553f-4f5d-8945-8b727c5fd15d"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "23f598ec-2caf-467c-b409-eb7646c8885f", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "uuid": "df354c98-faf2-4250-a53d-a841e506a5a0"}], "name": "SYS_GEN__Composite_DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "c2ae8a37-be3d-4867-ac6d-7e351053092c"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_427f5e41_d963_474c_8873_c1651717271c", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "f66bf8ec-0169-4729-b9d8-5897308824bc"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "df354c98-faf2-4250-a53d-a841e506a5a0"}], "description": "", "name": "SYS_GEN__Runbook_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_80e95470_8bc5_41d6_8b76_deee71afd0fc", "uuid": "c2ae8a37-be3d-4867-ac6d-7e351053092c"}, "message_list": [], "variable_list": [], "uuid": "856d15e1-a00c-4ae0-a20f-5e35e44b0d25"}, "message_list": [], "name": "action_stop"}], "type": "DEB", "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Master", "uuid": "427f5e41-d963-474c-8873-c1651717271c"}], "name": "K8SCP", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "4911a95e-8e61-4f2e-a051-40f1d5a78b56"}], "name": "eaae934f_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "b5d9a3ef-1887-45fb-bf0e-1d375a841144"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "4911a95e-8e61-4f2e-a051-40f1d5a78b56"}], "description": "", "name": "250a0dd1_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag", "uuid": "b5d9a3ef-1887-45fb-bf0e-1d375a841144"}, "message_list": [], "variable_list": [], "uuid": "a4d671c5-c39f-403a-a6cf-7111fe930484"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "c3687576-2fbc-4b39-af19-c0ed50e6f369"}], "name": "cfa35d5b_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "143952d9-0e9b-4939-840e-562272ff8475"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "c3687576-2fbc-4b39-af19-c0ed50e6f369"}], "description": "", "name": "6f5a2b1c_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag", "uuid": "143952d9-0e9b-4939-840e-562272ff8475"}, "message_list": [], "variable_list": [], "uuid": "cc433eb3-379e-4ead-bc1a-7a8e2ec2bd1a"}}, "variable_list": [], "uuid": "80e95470-8bc5-41d6-8b76-deee71afd0fc"}, {"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "95bd4c3e-c98f-4bfc-9ee2-c51031c36933", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Install_Crb_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "99971d34-e939-42ad-bcff-c45b72068790"}], "name": "SYS_GEN__DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "a55a478e-4dff-49e0-a53e-edf30ca2388c"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Install_Crb_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "1887ab58-f661-4b8c-aece-7c9d04088ad4"}], "name": "f9943e3a_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "167b28df-f41c-440a-97ba-871bbb631e3e"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "1887ab58-f661-4b8c-aece-7c9d04088ad4"}], "description": "", "name": "e6dd38ad_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag", "uuid": "167b28df-f41c-440a-97ba-871bbb631e3e"}, "message_list": [], "variable_list": [], "uuid": "609db6d6-5110-4569-bdec-bc4084bc7a77"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "ba12bd46-d07c-4129-9a99-5584be0d9893"}], "name": "f5f5341c_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2ede6d70-3de8-4e72-a1fa-e5053c7abde1"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "ba12bd46-d07c-4129-9a99-5584be0d9893"}], "description": "", "name": "7f8d209b_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag", "uuid": "2ede6d70-3de8-4e72-a1fa-e5053c7abde1"}, "message_list": [], "variable_list": [], "uuid": "1b1052aa-f2c2-4f18-9425-9b1ea3611970"}}, "timeout_secs": "", "type": "CUSTOM_PACKAGE_INSTALL", "variable_list": [], "uuid": "99971d34-e939-42ad-bcff-c45b72068790"}], "description": "", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "a55a478e-4dff-49e0-a53e-edf30ca2388c"}, "message_list": [], "variable_list": [], "uuid": "f629e825-0e0c-4266-a03e-10d26baab25c"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "e64cf6c7-8512-4133-a2c6-3b89754c212d", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "8db788ad-f2a4-4dad-8661-5ee1c350af27"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "d89feaa7-0222-4af3-aed7-d6fc7d39418f"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "9eef2378-e7da-4d20-b4b6-f2a6dddef62b"}], "name": "SYS_GEN__Composite_DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "d89feaa7-0222-4af3-aed7-d6fc7d39418f"}, "edge_type": "inherent", "type": "", "uuid": "a9c33f0d-e00a-45ae-8c66-8dfe59351fe7", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "9eef2378-e7da-4d20-b4b6-f2a6dddef62b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "8db788ad-f2a4-4dad-8661-5ee1c350af27"}, "edge_type": "inherent", "type": "", "uuid": "f6d54480-f0c1-4cde-a6de-c76b5026a56a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "d89feaa7-0222-4af3-aed7-d6fc7d39418f"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "b9162ef5-b46f-4241-875d-4f671b13a979"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "f629e825-0e0c-4266-a03e-10d26baab25c"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8db788ad-f2a4-4dad-8661-5ee1c350af27"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "658fecfa_runbook", "uuid": "199e8ff4-9c43-4ddd-856d-a7757097b1d8"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d89feaa7-0222-4af3-aed7-d6fc7d39418f"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "805f6a7b-16a9-4d5d-bd88-91e2f35da06e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9eef2378-e7da-4d20-b4b6-f2a6dddef62b"}], "description": "", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "b9162ef5-b46f-4241-875d-4f671b13a979"}, "message_list": [], "variable_list": [], "uuid": "2d9577e3-540d-47d9-8067-874ea20a9768"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "98a5ca31-8495-4cbd-b414-4f9ca92330b1", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Uninstall_Crb_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "d4abb3a0-cfe1-427f-aa89-28f9a3ea056d"}], "name": "SYS_GEN__DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "421d7606-869b-4f1f-98cd-483a665e02c4"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Uninstall_Crb_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "1887ab58-f661-4b8c-aece-7c9d04088ad4"}], "name": "f9943e3a_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "167b28df-f41c-440a-97ba-871bbb631e3e"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "1887ab58-f661-4b8c-aece-7c9d04088ad4"}], "description": "", "name": "e6dd38ad_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag", "uuid": "167b28df-f41c-440a-97ba-871bbb631e3e"}, "message_list": [], "variable_list": [], "uuid": "609db6d6-5110-4569-bdec-bc4084bc7a77"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "ba12bd46-d07c-4129-9a99-5584be0d9893"}], "name": "f5f5341c_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2ede6d70-3de8-4e72-a1fa-e5053c7abde1"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "ba12bd46-d07c-4129-9a99-5584be0d9893"}], "description": "", "name": "7f8d209b_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag", "uuid": "2ede6d70-3de8-4e72-a1fa-e5053c7abde1"}, "message_list": [], "variable_list": [], "uuid": "1b1052aa-f2c2-4f18-9425-9b1ea3611970"}}, "timeout_secs": "", "type": "CUSTOM_PACKAGE_UNINSTALL", "variable_list": [], "uuid": "d4abb3a0-cfe1-427f-aa89-28f9a3ea056d"}], "description": "", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "421d7606-869b-4f1f-98cd-483a665e02c4"}, "message_list": [], "variable_list": [], "uuid": "b5236296-bfb3-41f6-bc4c-9428cffb894d"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "05151a2e-fe67-4958-b8b4-cef93e5450cc", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "38cc757c-1a49-41b9-8fac-1b37e38ef8b3"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "f8121006-6526-43f0-a45f-f727188e13bb"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "069011cd-5e25-4da5-95bf-17fe4ebb541f"}], "name": "SYS_GEN__Composite_DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "38cc757c-1a49-41b9-8fac-1b37e38ef8b3"}, "edge_type": "inherent", "type": "", "uuid": "4401c6ba-09b0-4795-8e4b-37503a72dab4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "f8121006-6526-43f0-a45f-f727188e13bb"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "f8121006-6526-43f0-a45f-f727188e13bb"}, "edge_type": "inherent", "type": "", "uuid": "bc28d857-abd2-40e1-b0df-65e387e8d064", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "069011cd-5e25-4da5-95bf-17fe4ebb541f"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "47e41f96-5e59-4b85-ada9-229ad7bb320a"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "20b9af03-467d-48cf-b12f-5fceadcb7091"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "38cc757c-1a49-41b9-8fac-1b37e38ef8b3"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4356ce2d_runbook", "uuid": "1f0f7e64-583d-4d10-8311-4821fa50e553"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f8121006-6526-43f0-a45f-f727188e13bb"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "b5236296-bfb3-41f6-bc4c-9428cffb894d"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "069011cd-5e25-4da5-95bf-17fe4ebb541f"}], "description": "", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "47e41f96-5e59-4b85-ada9-229ad7bb320a"}, "message_list": [], "variable_list": [], "uuid": "6f318c6b-fbf2-47d5-88d1-ef004dfa41bd"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "0719ed50-c667-4f9a-8ca5-f4ea95cbd75a", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "3168c6a6-8a81-4d2f-a12d-11f525a5927e"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "0db2be6a-0204-418f-adc8-0a7a96b80971"}], "name": "SYS_GEN__Composite_DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "3168c6a6-8a81-4d2f-a12d-11f525a5927e"}, "edge_type": "inherent", "type": "", "uuid": "8dd1171e-c532-403f-8ad0-09770971cddb", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "0db2be6a-0204-418f-adc8-0a7a96b80971"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "1865a2d1-50fc-49b5-845c-ba1498cc5982"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "25b466fc_runbook", "uuid": "e1828d22-8260-4ca3-be26-d391ae9b069f"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3168c6a6-8a81-4d2f-a12d-11f525a5927e"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "0db2be6a-0204-418f-adc8-0a7a96b80971"}], "description": "", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "1865a2d1-50fc-49b5-845c-ba1498cc5982"}, "message_list": [], "variable_list": [], "uuid": "bd6f255e-7db7-43c7-8ae3-0be90ceb0b23"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "10e4e5d9-1634-45bc-93a6-de7a0df15f4f", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "e7df2f4c-55f6-4ec6-b8ee-4d7c8fbfcbe5"}], "name": "SYS_GEN__Composite_DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "e46de8ee-df3e-464f-b873-678be99f40d1"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "805f6a7b-16a9-4d5d-bd88-91e2f35da06e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e7df2f4c-55f6-4ec6-b8ee-4d7c8fbfcbe5"}], "description": "", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "e46de8ee-df3e-464f-b873-678be99f40d1"}, "message_list": [], "variable_list": [], "uuid": "5905b435-e7d2-411e-9ea6-6b5e99f953ba"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "e874e34d-847a-4457-845a-bf9df393f742", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "uuid": "5867b44d-aa4a-4c73-a14e-41252af49c63"}], "name": "SYS_GEN__Composite_DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "aa0713a7-fc2f-487b-9a58-4b0cf4725544"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_c17d45bc_3c6a_412b_96b9_7c468938894f", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "20b9af03-467d-48cf-b12f-5fceadcb7091"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5867b44d-aa4a-4c73-a14e-41252af49c63"}], "description": "", "name": "SYS_GEN__Runbook_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_03a51a5a_d96a_4ad7_a524_3fa6ecada6bf", "uuid": "aa0713a7-fc2f-487b-9a58-4b0cf4725544"}, "message_list": [], "variable_list": [], "uuid": "fb62ead3-950b-4481-b3f9-9a1cabac2e1a"}, "message_list": [], "name": "action_stop"}], "type": "DEB", "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "c17d45bc-3c6a-412b-96b9-7c468938894f"}], "name": "K8SMP", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "1887ab58-f661-4b8c-aece-7c9d04088ad4"}], "name": "f9943e3a_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "167b28df-f41c-440a-97ba-871bbb631e3e"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "1887ab58-f661-4b8c-aece-7c9d04088ad4"}], "description": "", "name": "e6dd38ad_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag", "uuid": "167b28df-f41c-440a-97ba-871bbb631e3e"}, "message_list": [], "variable_list": [], "uuid": "609db6d6-5110-4569-bdec-bc4084bc7a77"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "ba12bd46-d07c-4129-9a99-5584be0d9893"}], "name": "f5f5341c_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2ede6d70-3de8-4e72-a1fa-e5053c7abde1"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "9a694a46-bc34-4240-b98f-0ba63d547fd1"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "ba12bd46-d07c-4129-9a99-5584be0d9893"}], "description": "", "name": "7f8d209b_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag", "uuid": "2ede6d70-3de8-4e72-a1fa-e5053c7abde1"}, "message_list": [], "variable_list": [], "uuid": "1b1052aa-f2c2-4f18-9425-9b1ea3611970"}}, "variable_list": [], "uuid": "03a51a5a-d96a-4ad7-a524-3fa6ecada6bf"}, {"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "5c6119b7-499e-4a49-9323-3a4112af76ae", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Image Fetch task for VM", "uuid": "c986f0f4-18e1-4f20-87ae-181cfd0836be"}], "name": "SYS_GEN__DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "50a23435-8158-472c-b33c-5caa4110fa11"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Image Fetch task for VM", "state": "ACTIVE", "attrs": {"type": "", "name": "CENTOS-7.4-Controller", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "timeout_secs": "", "type": "SUBSTRATE_IMAGE_FETCH", "variable_list": [], "uuid": "c986f0f4-18e1-4f20-87ae-181cfd0836be"}], "description": "", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "50a23435-8158-472c-b33c-5caa4110fa11"}, "message_list": [], "variable_list": [], "uuid": "3f758093-68e1-4d3f-bef6-6868d4ab7a7b"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "da9c3ebb-b2e0-43c3-b7a0-4a7e322bec87", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "5a6b280b-3883-49ec-8ad7-11723a2173bc"}], "name": "SYS_GEN__Composite_DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "9298b851-b613-4505-9e96-46ea1b220ad0"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "3f758093-68e1-4d3f-bef6-6868d4ab7a7b"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5a6b280b-3883-49ec-8ad7-11723a2173bc"}], "description": "", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "9298b851-b613-4505-9e96-46ea1b220ad0"}, "message_list": [], "variable_list": [], "uuid": "158fdfeb-498e-4353-acf1-63475bbdee64"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "4e4d789c-49c7-42d4-aa48-862a2eec6268", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "b8cd9a1b-d069-43e9-bce5-1c0aba7aa316"}], "description": "", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "b8cd9a1b-d069-43e9-bce5-1c0aba7aa316"}, "message_list": [], "variable_list": [], "uuid": "06360b02-add6-4789-9894-3ba13861e35e"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "87f6a2d5-0945-448d-9096-cd79ba94d841", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "e1073b79-958f-445c-a513-403af5dc7ca7"}], "name": "SYS_GEN__Composite_DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "6ad99cfc-3378-46ac-9694-4453cbe4743e"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "06360b02-add6-4789-9894-3ba13861e35e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e1073b79-958f-445c-a513-403af5dc7ca7"}], "description": "", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "6ad99cfc-3378-46ac-9694-4453cbe4743e"}, "message_list": [], "variable_list": [], "uuid": "0cf01931-5595-405e-bec9-02bd7f6bea01"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "c5870e9b-f286-465e-b743-d53961cc1f1c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "d612d4eb-9104-4445-bbd4-a01b5e217d3e"}], "name": "SYS_GEN__Composite_DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2d605c85-e173-4204-8708-0b23ad4db29b"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "d612d4eb-9104-4445-bbd4-a01b5e217d3e"}], "description": "", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "2d605c85-e173-4204-8708-0b23ad4db29b"}, "message_list": [], "variable_list": [], "uuid": "ca44a436-6666-4bb3-9f82-a125f67bb1c4"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "6878dc9b-00e9-4af7-b77f-46cb9c24e44e", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "8c401e54-14d3-406b-b86e-51709fe89260"}], "description": "", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "8c401e54-14d3-406b-b86e-51709fe89260"}, "message_list": [], "variable_list": [], "uuid": "4efe7091-5c9b-4b9e-828d-aab354318bb0"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "b9600060-b355-465c-be09-02fe8e6a6bcc", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "6a597382-8920-4316-afed-6305d23c80aa"}], "description": "", "name": "SYS_GEN__Runbook_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_5246b901_bf6e_4c2a_830b_aeb0b33594a2", "uuid": "6a597382-8920-4316-afed-6305d23c80aa"}, "message_list": [], "variable_list": [], "uuid": "c6a653be-af61-42a4-bc91-8b9a688e25c5"}, "message_list": [], "name": "action_stop"}], "type": "SUBSTRATE_IMAGE", "service_local_reference_list": [], "name": "CENTOS_IMAGE_CONTROLLER", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"type": "", "name": "CENTOS-7.4-Controller", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "uuid": "5246b901-bf6e-4c2a-830b-aeb0b33594a2"}, {"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "5240f59b-bd34-4779-898f-6d5663827c16", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Image Fetch task for VM", "uuid": "347e7a58-c4e2-4331-8d5c-b0db03c1b1ab"}], "name": "SYS_GEN__DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "d49bc5f9-e7ba-4af6-a82f-7a0e2186a723"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Image Fetch task for VM", "state": "ACTIVE", "attrs": {"type": "", "name": "CENTOS-7.4-Minion", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "timeout_secs": "", "type": "SUBSTRATE_IMAGE_FETCH", "variable_list": [], "uuid": "347e7a58-c4e2-4331-8d5c-b0db03c1b1ab"}], "description": "", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "d49bc5f9-e7ba-4af6-a82f-7a0e2186a723"}, "message_list": [], "variable_list": [], "uuid": "44d21222-8795-4ab2-8f5d-d81859c6a1a8"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "3e5cd073-ee65-498d-890f-1c485c54ff47", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "20586b6d-08e2-41f3-bd28-8ddceac1f508"}], "name": "SYS_GEN__Composite_DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "ce145e00-7b6b-4c65-a227-c35ddc7f08f6"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "44d21222-8795-4ab2-8f5d-d81859c6a1a8"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "20586b6d-08e2-41f3-bd28-8ddceac1f508"}], "description": "", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "ce145e00-7b6b-4c65-a227-c35ddc7f08f6"}, "message_list": [], "variable_list": [], "uuid": "c78375c8-b5b7-4047-8741-ea1fa82f9cd9"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "d633b6c2-b7f0-4dd9-9e58-b53a18304e32", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "622ac794-ecdd-4faa-a32f-41acea0edfa3"}], "description": "", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "622ac794-ecdd-4faa-a32f-41acea0edfa3"}, "message_list": [], "variable_list": [], "uuid": "6d2dc801-671a-4351-8ff9-6736575392ef"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "9fc46e0a-1764-494c-8e3e-5a44e4b2f7b8", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "f493c6ca-fa83-4b31-81c0-ddd54e68ffce"}], "name": "SYS_GEN__Composite_DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "d4b7cecd-7f80-4825-8dcd-1938b8f0c3d7"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "6d2dc801-671a-4351-8ff9-6736575392ef"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f493c6ca-fa83-4b31-81c0-ddd54e68ffce"}], "description": "", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "d4b7cecd-7f80-4825-8dcd-1938b8f0c3d7"}, "message_list": [], "variable_list": [], "uuid": "bbacc410-74a3-4783-8b37-3ab32e872ac8"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "0ed7ad67-5132-4511-8f65-d3627bf582ac", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "f5576a7e-4032-441a-9079-80f9cec45f4c"}], "name": "SYS_GEN__Composite_DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "58cf40c9-9ae9-48bf-bcc2-23c2fd45fa14"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "f5576a7e-4032-441a-9079-80f9cec45f4c"}], "description": "", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "58cf40c9-9ae9-48bf-bcc2-23c2fd45fa14"}, "message_list": [], "variable_list": [], "uuid": "4b78ad5a-9cd2-4081-8a69-41b78164659a"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "5f9a1ff1-3cb7-4913-9bca-449d5b0a4569", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "33ed066e-d1b1-4f46-8110-d4b6efb4653c"}], "description": "", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "33ed066e-d1b1-4f46-8110-d4b6efb4653c"}, "message_list": [], "variable_list": [], "uuid": "6f315225-1da0-4f9a-b4f2-1dc2047c71af"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "b9c04ce5-ab48-42a5-8405-5286a45518be", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "011a6db3-65c3-4a6e-a724-aa1e43984101"}], "description": "", "name": "SYS_GEN__Runbook_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_229c88b2_ebcf_4ad8_afff_83c9c82b60a7", "uuid": "011a6db3-65c3-4a6e-a724-aa1e43984101"}, "message_list": [], "variable_list": [], "uuid": "3b8cf17a-76f6-4804-a69a-2d4718fa9d74"}, "message_list": [], "name": "action_stop"}], "type": "SUBSTRATE_IMAGE", "service_local_reference_list": [], "name": "CENTOS_IMAGE_MINION", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"type": "", "name": "CENTOS-7.4-Minion", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "uuid": "229c88b2-ebcf-4ad8-afff-83c9c82b60a7"}]}, "name": "Kubernetes - Challange"}, "spec": {"description": "Accessibility: \n* https://[CONTROLLER_IP]:6443\n* Admin certificates are available in controller node $HOME/CA\n", "resources": {"service_definition_list": [{"singleton": false, "name": "Kubernetes_Master", "action_list": [{"critical": false, "type": "system", "description": "System action for creating an application", "name": "action_create", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "GenerateEncryptionKey"}, {"kind": "app_task", "name": "ConfigureController"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "GenerateEncryptionKey"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "ConfigureController"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "16c98103_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\n\nENCRYPTION_KEY=$(head -c 32 /dev/urandom | base64)\necho \"kind: EncryptionConfig\napiVersion: v1\nresources:\n  - resources:\n      - secrets\n    providers:\n      - aescbc:\n          keys:\n            - name: key1\n              secret: ${ENCRYPTION_KEY}\n      - identity: {}\" | tee encryption-config.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "GenerateEncryptionKey"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nETCD_SERVER_PORT=2379\nETCD_CLIENT_PORT=2380\nMASTER_API_PORT=8080\nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\n\ncount=0\nfor i in $(echo \"@@{address}@@\" | tr \",\" \"\\n\"); do\n  CON+=\"controller${count}=https://${i}:${ETCD_CLIENT_PORT}\",\n  ETCD+=\"https://${i}:${ETCD_SERVER_PORT}\",\n  count=$((count+1))\ndone\nALL_CONTROLLERS=$(echo $CON | sed  's/,$//')\nETCD_SERVERS=$(echo $ETCD | sed  's/,$//')\n\n# -*- Bootstrapping a H/A etcd cluster.\nETCD_NAME=controller@@{calm_array_index}@@\nsudo mkdir -p /etc/etcd/ /var/lib/etcd\ntar -xvf etcd-v3.2.6-linux-amd64.tar.gz\nsudo mv etcd-v3.2.6-linux-amd64/etcd* /usr/bin/\nsudo cp ca.pem kubernetes-key.pem kubernetes.pem /etc/etcd/\nrm -rf etcd-v3.2.6-linux-amd64*\n\necho \"[Unit]\nDescription=etcd\nDocumentation=https://github.com/coreos\n\n[Service]\nExecStart=/usr/bin/etcd \\\\\n  --name ${ETCD_NAME} \\\\\n  --cert-file=/etc/etcd/kubernetes.pem \\\\\n  --key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --peer-cert-file=/etc/etcd/kubernetes.pem \\\\\n  --peer-key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-client-cert-auth \\\\\n  --client-cert-auth \\\\\n  --initial-advertise-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT},http://127.0.0.1:${ETCD_SERVER_PORT} \\\\\n  --advertise-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT} \\\\\n  --initial-cluster-token etcd-cluster-0 \\\\\n  --initial-cluster ${ALL_CONTROLLERS} \\\\\n  --initial-cluster-state new \\\\\n  --data-dir=/var/lib/etcd\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/etcd.service\n\n# -*- Bootstrapping an H/A Kubernetes Control Plane\nsudo mkdir -p /var/lib/kubernetes/\nsudo mv kube-apiserver kube-controller-manager kube-scheduler /usr/bin/ \nsudo cp ca.pem /var/lib/kubernetes/\nsudo mv ca-key.pem kubernetes-key.pem kubernetes.pem encryption-config.yaml /var/lib/kubernetes/\n\necho \"[Unit]\nDescription=Kubernetes API Server\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-apiserver \\\\\n  --admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,ResourceQuota \\\\\n  --advertise-address=${INTERNAL_IP} \\\\\n  --allow-privileged=true \\\\\n  --apiserver-count=3 \\\\\n  --audit-log-maxage=30 \\\\\n  --audit-log-maxbackup=3 \\\\\n  --audit-log-maxsize=100 \\\\\n  --audit-log-path=/var/lib/audit.log \\\\\n  --authorization-mode=RBAC \\\\\n  --bind-address=0.0.0.0 \\\\\n  --client-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --enable-swagger-ui=true \\\\\n  --etcd-cafile=/var/lib/kubernetes/ca.pem \\\\\n  --etcd-certfile=/var/lib/kubernetes/kubernetes.pem \\\\\n  --etcd-keyfile=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --etcd-servers=${ETCD_SERVERS} \\\\\n  --event-ttl=1h \\\\\n  --experimental-encryption-provider-config=/var/lib/kubernetes/encryption-config.yaml \\\\\n  --insecure-bind-address=0.0.0.0 \\\\\n  --kubelet-certificate-authority=/var/lib/kubernetes/ca.pem \\\\\n  --kubelet-client-certificate=/var/lib/kubernetes/kubernetes.pem \\\\\n  --kubelet-client-key=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --kubelet-https=true \\\\\n  --runtime-config=rbac.authorization.k8s.io/v1alpha1 \\\\\n  --service-account-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --service-node-port-range=30000-32767 \\\\\n  --tls-cert-file=/var/lib/kubernetes/kubernetes.pem \\\\\n  --tls-private-key-file=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-apiserver.service\n\necho \"[Unit]\nDescription=Kubernetes Controller Manager\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-controller-manager \\\\\n  --address=0.0.0.0 \\\\\n  --allocate-node-cidrs=true \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --cluster-name=kubernetes \\\\\n  --cluster-signing-cert-file=/var/lib/kubernetes/ca.pem \\\\\n  --cluster-signing-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --root-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --service-account-private-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-controller-manager.service\n\necho \"[Unit]\nDescription=Kubernetes Scheduler\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-scheduler \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-scheduler.service\n\nsudo systemctl daemon-reload\nsudo systemctl enable etcd\nsudo systemctl start etcd\nsleep 5\nsudo systemctl enable kube-apiserver kube-controller-manager kube-scheduler\nsudo systemctl start kube-apiserver kube-controller-manager kube-scheduler", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "ConfigureController"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "16c98103_dag"}, "name": "80edfe72_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Deletes physical machines as well", "name": "action_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "d83d296d_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "d83d296d_dag"}, "name": "c9c07e72_runbook"}}, {"critical": false, "type": "system", "description": "System action for starting an application", "name": "action_start", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "FinalSteps"}, {"kind": "app_task", "name": "SetupFlannel"}, {"kind": "app_task", "name": "SetupKubeDns"}, {"kind": "app_task", "name": "SetupNutanixVolumePlugin"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "FinalSteps"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetupFlannel"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupFlannel"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetupKubeDns"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupKubeDns"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetupNutanixVolumePlugin"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "3a7a0f2a_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho \"@@{Kubernetes_Minion.COMPLETE}@@\"\nINTERNAL_IP=@@{address}@@\n\nsleep 20\n\nmkdir -p CA Net DNS\nmv *.pem *.csr *.json *.kubeconfig CA/\n\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=$HOME/CA/ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:6443\nkubectl config set-credentials admin --client-certificate=$HOME/CA/admin.pem --client-key=$HOME/CA/admin-key.pem\nkubectl config set-context kubernetes-prod-cluster --cluster=kubernetes-prod-cluster --user=admin\nkubectl config use-context kubernetes-prod-cluster\n\nkubectl get componentstatuses\nkubectl get nodes", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "FinalSteps"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho '---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nrules:\n  - apiGroups:\n      - \"\"\n    resources:\n      - pods\n    verbs:\n      - get\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes\n    verbs:\n      - list\n      - watch\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes/status\n    verbs:\n      - patch\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: flannel\nsubjects:\n- kind: ServiceAccount\n  name: flannel\n  namespace: kube-system\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: flannel\n  namespace: kube-system\n---\nkind: ConfigMap\napiVersion: v1\nmetadata:\n  name: kube-flannel-cfg\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\ndata:\n  cni-conf.json: |\n    {\n      \"name\": \"cbr0\",\n      \"type\": \"flannel\",\n      \"delegate\": {\n        \"isDefaultGateway\": true\n      }\n    }\n  net-conf.json: |\n    {\n      \"Network\": \"@@{CLUSTER_SUBNET}@@\",\n      \"Backend\": {\n        \"Type\": \"vxlan\"\n      }\n    }\n---\napiVersion: extensions/v1beta1\nkind: DaemonSet\nmetadata:\n  name: kube-flannel-ds\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\nspec:\n  template:\n    metadata:\n      labels:\n        tier: node\n        app: flannel\n    spec:\n      hostNetwork: true\n      nodeSelector:\n        beta.kubernetes.io/arch: amd64\n      tolerations:\n      - key: node-role.kubernetes.io/master\n        operator: Exists\n        effect: NoSchedule\n      serviceAccountName: flannel\n      initContainers:\n      - name: install-cni\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command:\n        - cp\n        args:\n        - -f\n        - /etc/kube-flannel/cni-conf.json\n        - /etc/cni/net.d/10-flannel.conf\n        volumeMounts:\n        - name: cni\n          mountPath: /etc/cni/net.d\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      containers:\n      - name: kube-flannel\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command: [ \"/opt/bin/flanneld\", \"--ip-masq\", \"--kube-subnet-mgr\" ]\n        securityContext:\n          privileged: true\n        env:\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: POD_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        volumeMounts:\n        - name: run\n          mountPath: /run\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      volumes:\n        - name: run\n          hostPath:\n            path: /run\n        - name: cni\n          hostPath:\n            path: /etc/cni/net.d\n        - name: flannel-cfg\n          configMap:\n            name: kube-flannel-cfg' | tee kube-flannel.yml\nkubectl create -f kube-flannel.yml\nmv kube-flannel.yml Net/\n\nkubectl get nodes --output=jsonpath='{range .items[*]}{.spec.podCIDR} via {.status.addresses[?(@.type==\"InternalIP\")].address} {\"\\n\"}{end}' | sudo tee /etc/sysconfig/network-scripts/route-eth0\necho \"@@{SERVICE_SUBNET}@@ via $(kubectl get nodes kubernetes-minion0 --output=jsonpath='{.status.addresses[?(@.type==\"InternalIP\")].address}')\" | sudo tee -a /etc/sysconfig/network-scripts/route-eth0\nsleep 5\nsudo systemctl restart network", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "SetupFlannel"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    addonmanager.kubernetes.io/mode: EnsureExists\ndata:\n  upstreamNameservers: |\n    [\"8.8.8.8\", \"4.2.2.2\"]\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    kubernetes.io/name: \"KubeDNS\"\nspec:\n  selector:\n    k8s-app: kube-dns\n  clusterIP: @@{KUBE_CLUSTER_DNS}@@\n  ports:\n    - name: dns\n      port: 53\n      protocol: UDP\n    - name: dns-tcp\n      port: 53\n      protocol: TCP\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\nspec:\n  strategy:\n    rollingUpdate:\n      maxSurge: 10%\n      maxUnavailable: 0\n  selector:\n    matchLabels:\n      k8s-app: kube-dns\n  template:\n    metadata:\n      labels:\n        k8s-app: kube-dns\n      annotations:\n        scheduler.alpha.kubernetes.io/critical-pod: ''\n    spec:\n      tolerations:\n      - key: \"CriticalAddonsOnly\"\n        operator: \"Exists\"\n      volumes:\n      - name: kube-dns-config\n        configMap:\n          name: kube-dns\n          optional: true\n      containers:\n      - name: kubedns\n        image: gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.4\n        resources:\n          limits:\n            memory: 170Mi\n          requests:\n            cpu: 100m\n            memory: 70Mi\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/kubedns\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        readinessProbe:\n          httpGet:\n            path: /readiness\n            port: 8081\n            scheme: HTTP\n          initialDelaySeconds: 3\n          timeoutSeconds: 5\n        args:\n        - --domain=cluster.local.\n        - --dns-port=10053\n        - --config-dir=/kube-dns-config\n        - --v=2\n        env:\n        - name: PROMETHEUS_PORT\n          value: \"10055\"\n        ports:\n        - containerPort: 10053\n          name: dns-local\n          protocol: UDP\n        - containerPort: 10053\n          name: dns-tcp-local\n          protocol: TCP\n        - containerPort: 10055\n          name: metrics\n          protocol: TCP\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /kube-dns-config\n      - name: dnsmasq\n        image: gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/dnsmasq\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - -v=2\n        - -logtostderr\n        - -configDir=/etc/k8s/dns/dnsmasq-nanny\n        - -restartDnsmasq=true\n        - --\n        - -k\n        - --cache-size=1000\n        - --log-facility=-\n        - --server=/cluster.local./127.0.0.1#10053\n        - --server=/in-addr.arpa/127.0.0.1#10053\n        - --server=/ip6.arpa/127.0.0.1#10053\n        ports:\n        - containerPort: 53\n          name: dns\n          protocol: UDP\n        - containerPort: 53\n          name: dns-tcp\n          protocol: TCP\n        resources:\n          requests:\n            cpu: 150m\n            memory: 20Mi\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /etc/k8s/dns/dnsmasq-nanny\n      - name: sidecar\n        image: gcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /metrics\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - --v=2\n        - --logtostderr\n        - --probe=kubedns,127.0.0.1:10053,kubernetes.default.svc.cluster.local.,5,A\n        - --probe=dnsmasq,127.0.0.1:53,kubernetes.default.svc.cluster.local.,5,A\n        ports:\n        - containerPort: 10054\n          name: metrics\n          protocol: TCP\n        resources:\n          requests:\n            memory: 20Mi\n            cpu: 10m\n      dnsPolicy:\n      serviceAccountName: kube-dns' | tee kube-dns.yaml\n      \nkubectl create -f kube-dns.yaml\nmv kube-dns.yaml DNS/", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "SetupKubeDns"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nif [ \"@@{PRISM_CLUSTER_IP}@@\" == \"\" ] && [ \"@@{PRISM_USERNAME}@@\" == \"\" ] && [ \"@@{PRISM_PASSWORD}@@\" == \"\" ]; then\n\texit\nfi\nmkdir volume_plugin\nNTNX_SECRET=$(echo -n \"@@{PRISM_USERNAME}@@:@@{PRISM_PASSWORD}@@\" | base64)\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: nutanixabs-provisioner\n---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: nutanixabs-provisioner-runner\nrules:\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumes\"]\n    verbs: [\"get\", \"list\", \"watch\", \"create\", \"delete\"]\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumeclaims\"]\n    verbs: [\"get\", \"list\", \"watch\", \"update\"]\n  - apiGroups: [\"storage.k8s.io\"]\n    resources: [\"storageclasses\"]\n    verbs: [\"get\", \"list\", \"watch\"]\n  - apiGroups: [\"\"]\n    resources: [\"events\"]\n    verbs: [\"list\", \"watch\", \"create\", \"update\", \"patch\"]\n  - apiGroups: [\"\"]\n    resources: [\"services\"]\n    verbs: [\"get\"]\n  - apiGroups: [\"\"]\n    resources: [\"secrets\"]\n    verbs: [\"get\", \"create\", \"delete\"]\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: run-nutanixabs-provisioner\nsubjects:\n  - kind: ServiceAccount\n    name: nutanixabs-provisioner\n    namespace: default\nroleRef:\n  kind: ClusterRole\n  name: nutanixabs-provisioner-runner\n  apiGroup: rbac.authorization.k8s.io\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: nutanixabs-provisioner\nspec:\n  replicas: 1\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: nutanixabs-provisioner\n    spec:\n      serviceAccount: nutanixabs-provisioner\n      hostNetwork: true\n      containers:\n        -\n          image: \"subodh73/nutanixabs-provisioner\"\n          name: nutanixabs-provisioner\n          args: [\"--v=4\"]\n          imagePullPolicy: IfNotPresent\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: ntnx-secret\n  namespace: default\ndata:\n  key: <SECRET>\ntype: nutanix/abs\n---\nkind: StorageClass\napiVersion: storage.k8s.io/v1\nmetadata:\n  name: silver \nprovisioner: nutanix/abs\nparameters:\n     prismEndPoint: @@{PRISM_CLUSTER_IP}@@:9440\n     dataServiceEndPoint: @@{PRISM_DATA_SERVICE_IP}@@:3260\n     user: @@{PRISM_USERNAME}@@\n     password: @@{PRISM_PASSWORD}@@\n     secretName: ntnx-secret\n     storageContainer: @@{CONTAINER_NAME}@@\n     fsType: ext4\n     chapAuthEnabled: \"false\"' | tee volume_plugin/nutanix-provisioner.yaml\n\nsed -i \"s/<SECRET>/${NTNX_SECRET}/\" volume_plugin/nutanix-provisioner.yaml\nkubectl create -f volume_plugin/nutanix-provisioner.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "SetupNutanixVolumePlugin"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "3a7a0f2a_dag"}, "name": "ec49e982_runbook"}}, {"critical": false, "type": "system", "description": "System action for stopping an application", "name": "action_stop", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "990f28cf_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "990f28cf_dag"}, "name": "e34ef8d6_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Does not delete physical machines", "name": "action_soft_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "9afd1d8b_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "9afd1d8b_dag"}, "name": "3c8f0554_runbook"}}], "description": "", "port_list": [], "tier": "", "variable_list": [], "depends_on_list": []}, {"singleton": false, "name": "Kubernetes_Minion", "action_list": [{"critical": false, "type": "system", "description": "System action for creating an application", "name": "action_create", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "ConfigureMinion"}, {"kind": "app_task", "name": "SetFlag"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "ConfigureMinion"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetFlag"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "2a209891_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nCONTROLLER_IP=@@{K8SC.address}@@\nKUBERNETES_CLUSTER_DNS=\"@@{KUBE_CLUSTER_DNS}@@\"\nUSERNAME=\"@@{CENTOS.username}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\necho \"@@{CENTOS.secret}@@\" | tee centos.pem\nchmod 400 centos.pem\n\nsleep 60\n# -*- Bootstrapping Kubernetes Workers\nHOSTNAME=$(hostname -s)\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.pem ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:kube-proxy.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:ca.pem ./\n\nsudo mkdir -p /var/lib/{kubelet,kube-proxy,kubernetes} /var/run/kubernetes\nsudo mv kubectl kube-proxy kubelet /usr/bin/\n\nsudo mv ${HOSTNAME}-key.pem ${HOSTNAME}.pem /var/lib/kubelet/\nsudo mv ${HOSTNAME}.kubeconfig /var/lib/kubelet/kubeconfig\nsudo mv ca.pem /var/lib/kubernetes/\n\n# -*- Install Docker\ntar -xvf docker-1.12.6.tgz\nsudo cp docker/docker* /usr/bin/\necho \"[Unit]\nDescription=Docker Application Container Engine\nDocumentation=http://docs.docker.com\n\n[Service]\nExecStart=/usr/bin/docker daemon \\\\\n  --iptables=false \\\\\n  --ip-masq=false \\\\\n  --host=unix:///var/run/docker.sock \\\\\n  --log-level=error \\\\\n  --storage-driver=overlay\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/docker.service\n\necho \"[Unit]\nDescription=Kubernetes Kubelet\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nExecStart=/usr/bin/kubelet \\\n  --allow-privileged=true \\\n  --cluster-dns=${KUBERNETES_CLUSTER_DNS} \\\n  --cluster-domain=cluster.local \\\n  --container-runtime=docker \\\n  --enable-custom-metrics \\\n  --kubeconfig=/var/lib/kubelet/kubeconfig \\\n  --network-plugin=cni \\\n  --pod-cidr=${CLUSTER_SUBNET} \\\n  --register-node=true \\\n  --require-kubeconfig \\\n  --runtime-request-timeout=10m \\\n  --tls-cert-file=/var/lib/kubelet/${HOSTNAME}.pem \\\n  --tls-private-key-file=/var/lib/kubelet/${HOSTNAME}-key.pem \\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kubelet.service\n\nsudo mv kube-proxy.kubeconfig /var/lib/kube-proxy/kubeconfig\n\necho \"[Unit]\nDescription=Kubernetes Kube Proxy\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-proxy \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --masquerade-all=true \\\n  --kubeconfig=/var/lib/kube-proxy/kubeconfig \\\\\n  --proxy-mode=iptables \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-proxy.service\n\nsudo mkdir -p /etc/cni/net.d\necho '{\n  \"name\": \"cbr0\",\n  \"type\": \"flannel\",\n  \"delegate\": {\n    \"isDefaultGateway\": true\n  }\n}' | sudo tee /etc/cni/net.d/10-flannel.conf\n\nsudo mkdir -p /opt/cni/bin\nsudo tar -zxvf cni-plugins-amd64-v0.6.0.tgz -C /opt/cni/bin\n\n# -*- Configure Iscsi iqn\necho \"InitiatorName=iqn.1994-05.com.nutanix:k8s-worker\" | sudo tee /etc/iscsi/initiatorname.iscsi \n\nsudo systemctl daemon-reload\nsudo systemctl enable docker kubelet kube-proxy iscsid\nsudo systemctl start docker kubelet kube-proxy iscsid", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "ConfigureMinion"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#script\nprint \"COMPLETE=True\"", "eval_variables": ["COMPLETE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "", "type": "SET_VARIABLE", "variable_list": [], "name": "SetFlag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "2a209891_dag"}, "name": "658fecfa_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Deletes physical machines as well", "name": "action_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "1ca74521_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "1ca74521_dag"}, "name": "4356ce2d_runbook"}}, {"critical": false, "type": "system", "description": "System action for starting an application", "name": "action_start", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "983862b1_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "983862b1_dag"}, "name": "6583643e_runbook"}}, {"critical": false, "type": "system", "description": "System action for stopping an application", "name": "action_stop", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "cba58264_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "cba58264_dag"}, "name": "3cee8199_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Does not delete physical machines", "name": "action_soft_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "389a6493_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "389a6493_dag"}, "name": "25b466fc_runbook"}}], "description": "", "port_list": [], "tier": "", "variable_list": [], "depends_on_list": []}], "substrate_definition_list": [{"description": "", "action_list": [], "readiness_probe": {"connection_type": "SSH", "disable_readiness_probe": false, "timeout_secs": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "connection_port": 22, "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "editables": {"readiness_probe": {"connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {}}}, "os_type": "Linux", "type": "AHV_VM", "create_spec": {"backup_policy": null, "type": "", "name": "Challange-K8SC", "resources": {"hardware_clock_timezone": "", "type": "", "boot_config": null, "power_state": "ON", "guest_tools": null}, "availability_zone_reference": null}, "variable_list": [], "name": "K8SC"}, {"description": "", "action_list": [], "readiness_probe": {"connection_type": "SSH", "disable_readiness_probe": false, "timeout_secs": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "connection_port": 22, "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "editables": {"readiness_probe": {"connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {}}}, "os_type": "Linux", "type": "AHV_VM", "create_spec": {"backup_policy": null, "type": "", "name": "Challange-K8SM@@{calm_array_index}@@", "resources": {"hardware_clock_timezone": "", "type": "", "boot_config": null, "power_state": "ON", "guest_tools": null}, "availability_zone_reference": null}, "variable_list": [], "name": "K8SM"}], "credential_definition_list": [{"username": "centos", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "editables": {"username": true, "secret": true}, "type": "KEY", "name": "CENTOS"}], "package_definition_list": [{"description": "", "action_list": [], "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Master"}], "version": "", "type": "DEB", "options": {"install_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask"}], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "eaae934f_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "PackageInstallTask"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag"}, "name": "250a0dd1_runbook"}, "type": "", "uninstall_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask"}], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "cfa35d5b_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "PackageUninstallTask"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag"}, "name": "6f5a2b1c_runbook"}}, "variable_list": [], "name": "K8SCP"}, {"description": "", "action_list": [], "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Minion"}], "version": "", "type": "DEB", "options": {"install_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask"}], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "f9943e3a_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "PackageInstallTask"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag"}, "name": "e6dd38ad_runbook"}, "type": "", "uninstall_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask"}], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "f5f5341c_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "PackageUninstallTask"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag"}, "name": "7f8d209b_runbook"}}, "variable_list": [], "name": "K8SMP"}, {"description": "", "action_list": [], "service_local_reference_list": [], "version": "", "type": "SUBSTRATE_IMAGE", "options": {"type": "", "name": "CENTOS-7.4-Controller", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "name": "CENTOS_IMAGE_CONTROLLER"}, {"description": "", "action_list": [], "service_local_reference_list": [], "version": "", "type": "SUBSTRATE_IMAGE", "options": {"type": "", "name": "CENTOS-7.4-Minion", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "name": "CENTOS_IMAGE_MINION"}], "app_profile_list": [{"deployment_create_list": [{"description": "", "action_list": [], "package_local_reference_list": [{"kind": "app_package", "name": "K8SCP"}], "max_replicas": "1", "substrate_local_reference": {"kind": "app_substrate", "name": "K8SC"}, "min_replicas": "1", "variable_list": [], "name": "d584b567_deployment"}, {"name": "ff8e191c_deployment", "action_list": [], "package_local_reference_list": [{"kind": "app_package", "name": "K8SMP"}], "editables": {"min_replicas": true}, "max_replicas": "1", "substrate_local_reference": {"kind": "app_substrate", "name": "K8SM"}, "min_replicas": "1", "variable_list": [], "description": ""}], "variable_list": [{"val_type": "STRING", "description": "", "value": "v1.7.7", "label": "", "attrs": {"type": ""}, "type": "LOCAL", "name": "KUBERNETES_VERSION"}, {"val_type": "STRING", "description": "", "value": "10.200.0.0/16", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "CLUSTER_SUBNET"}, {"val_type": "STRING", "description": "", "value": "10.32.0.0/24", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "SERVICE_SUBNET"}, {"val_type": "STRING", "description": "", "value": "10.32.0.10", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "KUBE_CLUSTER_DNS"}, {"val_type": "STRING", "description": "", "value": "10.21.81.37", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "PRISM_CLUSTER_IP"}, {"val_type": "STRING", "description": "", "value": "10.21.81.38", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "PRISM_DATA_SERVICE_IP"}, {"val_type": "STRING", "description": "", "value": "admin", "label": "", "editables": {"value": true}, "type": "LOCAL", "name": "PRISM_USERNAME"}, {"val_type": "STRING", "description": "", "value": "", "label": "", "attrs": {"is_secret_modified": false, "secret_reference": {}, "type": ""}, "type": "SECRET", "name": "PRISM_PASSWORD"}, {"val_type": "STRING", "description": "", "value": "Kubernetes-Container", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "CONTAINER_NAME"}, {"val_type": "STRING", "description": "", "value": "ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEAnAA/ZWcC6tLvxm1blk7LXcoLw4MFDWaWKMvCnHKGB4eGKQNwP/ZPDAydPVBE4iihSjrNQmwheP5Z7ZYp8Z0NVh00YBchfdg3HXqb6ISFP8PThOZv4v6EWPuzflV5M39evN5wbUyGHFLDbvEHOgGxz3BlTPAytC3nwdaYPc+vyTjNglPLEnHlsFszED7L1yDa5Z8H4P8ljvEAoxTfYrtK3rfpm7D7ANdvzkmg/MN5pJ74q0C3euAFIE+YL+M5FD9cHMM2IYmy57F1V6quXY4p0FemyuEUPVRDcrdcRGvouzBs27HERTySpJUDZ1uGH5ilJhyXy8qfHtj7OwHWn5K3Iw== rsa-key-20171206", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "INSTANCE_PUBLIC_KEY"}], "description": "", "action_list": [], "name": "Nutanix"}], "default_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}, "client_attrs": {"Kubernetes_Master": {"y": 240, "x": 420}, "Kubernetes_Minion": {"y": 240, "x": 740}}}, "name": "Kubernetes - Challange"}, "api_version": "3.0", "metadata": {"last_update_time": "1521004145497743", "creation_time": "1521001454238193", "kind": "blueprint", "spec_version": 7, "name": "Kubernetes - Challange"}}