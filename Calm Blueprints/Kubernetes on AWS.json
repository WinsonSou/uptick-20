{"status": {"state": "ACTIVE", "message_list": [], "description": "Accessibility: \n* https://[CONTROLLER_IP]:6443\n* Admin certificates are available in controller node $HOME/CA\n", "resources": {"service_definition_list": [{"singleton": false, "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "d9a69c21-6f47-4da2-b188-eaea3dbd6040", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "GenerateEncryptionKey", "uuid": "4f74adf3-cb4c-46e8-8c05-1c8757184698"}, {"kind": "app_task", "name": "ConfigureController", "uuid": "b7efc67b-b27c-4a40-80f8-40ffcad7cd56"}], "name": "16c98103_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "GenerateEncryptionKey", "uuid": "4f74adf3-cb4c-46e8-8c05-1c8757184698"}, "edge_type": "user_defined", "type": "", "uuid": "e691b8ce-cc5d-49e5-9b00-c7f258d98b86", "to_task_reference": {"kind": "app_task", "name": "ConfigureController", "uuid": "b7efc67b-b27c-4a40-80f8-40ffcad7cd56"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "998b2f51-ab6c-48a3-883e-573071703446"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "GenerateEncryptionKey", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\n\nENCRYPTION_KEY=$(head -c 32 /dev/urandom | base64)\necho \"kind: EncryptionConfig\napiVersion: v1\nresources:\n  - resources:\n      - secrets\n    providers:\n      - aescbc:\n          keys:\n            - name: key1\n              secret: ${ENCRYPTION_KEY}\n      - identity: {}\" | tee encryption-config.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "4f74adf3-cb4c-46e8-8c05-1c8757184698"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ConfigureController", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nETCD_SERVER_PORT=2379\nETCD_CLIENT_PORT=2380\nMASTER_API_PORT=8080\nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\n\ncount=0\nfor i in $(echo \"@@{address}@@\" | tr \",\" \"\\n\"); do\n  CON+=\"controller${count}=https://${i}:${ETCD_CLIENT_PORT}\",\n  ETCD+=\"https://${i}:${ETCD_SERVER_PORT}\",\n  count=$((count+1))\ndone\nALL_CONTROLLERS=$(echo $CON | sed  's/,$//')\nETCD_SERVERS=$(echo $ETCD | sed  's/,$//')\n\n# -*- Bootstrapping a H/A etcd cluster.\nETCD_NAME=controller@@{calm_array_index}@@\nsudo mkdir -p /etc/etcd/ /var/lib/etcd\ntar -xvf etcd-v3.2.6-linux-amd64.tar.gz\nsudo mv etcd-v3.2.6-linux-amd64/etcd* /usr/bin/\nsudo cp ca.pem kubernetes-key.pem kubernetes.pem /etc/etcd/\nrm -rf etcd-v3.2.6-linux-amd64*\n\necho \"[Unit]\nDescription=etcd\nDocumentation=https://github.com/coreos\n\n[Service]\nExecStart=/usr/bin/etcd \\\\\n  --name ${ETCD_NAME} \\\\\n  --cert-file=/etc/etcd/kubernetes.pem \\\\\n  --key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --peer-cert-file=/etc/etcd/kubernetes.pem \\\\\n  --peer-key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-client-cert-auth \\\\\n  --client-cert-auth \\\\\n  --initial-advertise-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT},http://127.0.0.1:${ETCD_SERVER_PORT} \\\\\n  --advertise-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT} \\\\\n  --initial-cluster-token etcd-cluster-0 \\\\\n  --initial-cluster ${ALL_CONTROLLERS} \\\\\n  --initial-cluster-state new \\\\\n  --data-dir=/var/lib/etcd\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/etcd.service\n\n# -*- Bootstrapping an H/A Kubernetes Control Plane\nsudo mkdir -p /var/lib/kubernetes/\nsudo mv kube-apiserver kube-controller-manager kube-scheduler /usr/bin/ \nsudo cp ca.pem /var/lib/kubernetes/\nsudo mv ca-key.pem kubernetes-key.pem kubernetes.pem encryption-config.yaml /var/lib/kubernetes/\n\necho \"[Unit]\nDescription=Kubernetes API Server\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-apiserver \\\\\n  --admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,ResourceQuota \\\\\n  --advertise-address=${INTERNAL_IP} \\\\\n  --allow-privileged=true \\\\\n  --apiserver-count=3 \\\\\n  --audit-log-maxage=30 \\\\\n  --audit-log-maxbackup=3 \\\\\n  --audit-log-maxsize=100 \\\\\n  --audit-log-path=/var/lib/audit.log \\\\\n  --authorization-mode=RBAC \\\\\n  --bind-address=0.0.0.0 \\\\\n  --client-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --enable-swagger-ui=true \\\\\n  --etcd-cafile=/var/lib/kubernetes/ca.pem \\\\\n  --etcd-certfile=/var/lib/kubernetes/kubernetes.pem \\\\\n  --etcd-keyfile=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --etcd-servers=${ETCD_SERVERS} \\\\\n  --event-ttl=1h \\\\\n  --experimental-encryption-provider-config=/var/lib/kubernetes/encryption-config.yaml \\\\\n  --insecure-bind-address=0.0.0.0 \\\\\n  --kubelet-certificate-authority=/var/lib/kubernetes/ca.pem \\\\\n  --kubelet-client-certificate=/var/lib/kubernetes/kubernetes.pem \\\\\n  --kubelet-client-key=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --kubelet-https=true \\\\\n  --runtime-config=rbac.authorization.k8s.io/v1alpha1 \\\\\n  --service-account-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --service-node-port-range=30000-32767 \\\\\n  --tls-cert-file=/var/lib/kubernetes/kubernetes.pem \\\\\n  --tls-private-key-file=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-apiserver.service\n\necho \"[Unit]\nDescription=Kubernetes Controller Manager\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-controller-manager \\\\\n  --address=0.0.0.0 \\\\\n  --allocate-node-cidrs=true \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --cluster-name=kubernetes \\\\\n  --cluster-signing-cert-file=/var/lib/kubernetes/ca.pem \\\\\n  --cluster-signing-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --root-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --service-account-private-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-controller-manager.service\n\necho \"[Unit]\nDescription=Kubernetes Scheduler\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-scheduler \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-scheduler.service\n\nsudo systemctl daemon-reload\nsudo systemctl enable etcd\nsudo systemctl start etcd\nsleep 5\nsudo systemctl enable kube-apiserver kube-controller-manager kube-scheduler\nsudo systemctl start kube-apiserver kube-controller-manager kube-scheduler", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "b7efc67b-b27c-4a40-80f8-40ffcad7cd56"}], "description": "", "name": "80edfe72_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "16c98103_dag", "uuid": "998b2f51-ab6c-48a3-883e-573071703446"}, "message_list": [], "variable_list": [], "uuid": "5db5b0fd-bd65-4df4-9471-6f2af7e9228a"}, "message_list": [], "name": "action_create"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "e078bb53-0025-4583-922e-da59a3d41169", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "d83d296d_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2d1a3331-405d-4ee4-86e1-28b8154f1070"}], "description": "", "name": "c9c07e72_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "d83d296d_dag", "uuid": "2d1a3331-405d-4ee4-86e1-28b8154f1070"}, "message_list": [], "variable_list": [], "uuid": "c6b6049c-a941-4706-95f0-0e57a4d200c0"}, "message_list": [], "name": "action_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "84625653-2a92-441e-9ae5-2bef3d911aec", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "FinalSteps", "uuid": "db13b176-f9a2-4740-ac12-f2a27865b16a"}, {"kind": "app_task", "name": "SetupFlannel", "uuid": "9ef26b70-9346-4cf4-ae41-af0f78fdd3b0"}, {"kind": "app_task", "name": "SetupKubeDns", "uuid": "e72726f0-7a0e-4c3e-893d-9ef5fd213ebf"}, {"kind": "app_task", "name": "SetupNutanixVolumePlugin", "uuid": "18cec673-2223-4ebd-9f59-6b7538f09428"}], "name": "3a7a0f2a_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "FinalSteps", "uuid": "db13b176-f9a2-4740-ac12-f2a27865b16a"}, "edge_type": "user_defined", "type": "", "uuid": "98297211-5c5a-4e9b-a507-2aa2a622d17d", "to_task_reference": {"kind": "app_task", "name": "SetupFlannel", "uuid": "9ef26b70-9346-4cf4-ae41-af0f78fdd3b0"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupFlannel", "uuid": "9ef26b70-9346-4cf4-ae41-af0f78fdd3b0"}, "edge_type": "user_defined", "type": "", "uuid": "30c6118d-18ea-47a8-b69e-fe7b41ec7186", "to_task_reference": {"kind": "app_task", "name": "SetupKubeDns", "uuid": "e72726f0-7a0e-4c3e-893d-9ef5fd213ebf"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupKubeDns", "uuid": "e72726f0-7a0e-4c3e-893d-9ef5fd213ebf"}, "edge_type": "user_defined", "type": "", "uuid": "b19dfec1-cf0b-4de3-8977-daf64508430c", "to_task_reference": {"kind": "app_task", "name": "SetupNutanixVolumePlugin", "uuid": "18cec673-2223-4ebd-9f59-6b7538f09428"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "84339b3a-1639-4178-b06a-39f0f994941b"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "FinalSteps", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho \"@@{Kubernetes_Minion.COMPLETE}@@\"\nINTERNAL_IP=@@{address}@@\n\nsleep 20\n\nmkdir -p CA Net DNS\nmv *.pem *.csr *.json *.kubeconfig CA/\n\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=$HOME/CA/ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:6443\nkubectl config set-credentials admin --client-certificate=$HOME/CA/admin.pem --client-key=$HOME/CA/admin-key.pem\nkubectl config set-context kubernetes-prod-cluster --cluster=kubernetes-prod-cluster --user=admin\nkubectl config use-context kubernetes-prod-cluster\n\nkubectl get componentstatuses\nkubectl get nodes", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "db13b176-f9a2-4740-ac12-f2a27865b16a"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetupFlannel", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho '---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nrules:\n  - apiGroups:\n      - \"\"\n    resources:\n      - pods\n    verbs:\n      - get\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes\n    verbs:\n      - list\n      - watch\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes/status\n    verbs:\n      - patch\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: flannel\nsubjects:\n- kind: ServiceAccount\n  name: flannel\n  namespace: kube-system\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: flannel\n  namespace: kube-system\n---\nkind: ConfigMap\napiVersion: v1\nmetadata:\n  name: kube-flannel-cfg\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\ndata:\n  cni-conf.json: |\n    {\n      \"name\": \"cbr0\",\n      \"type\": \"flannel\",\n      \"delegate\": {\n        \"isDefaultGateway\": true\n      }\n    }\n  net-conf.json: |\n    {\n      \"Network\": \"@@{CLUSTER_SUBNET}@@\",\n      \"Backend\": {\n        \"Type\": \"vxlan\"\n      }\n    }\n---\napiVersion: extensions/v1beta1\nkind: DaemonSet\nmetadata:\n  name: kube-flannel-ds\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\nspec:\n  template:\n    metadata:\n      labels:\n        tier: node\n        app: flannel\n    spec:\n      hostNetwork: true\n      nodeSelector:\n        beta.kubernetes.io/arch: amd64\n      tolerations:\n      - key: node-role.kubernetes.io/master\n        operator: Exists\n        effect: NoSchedule\n      serviceAccountName: flannel\n      initContainers:\n      - name: install-cni\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command:\n        - cp\n        args:\n        - -f\n        - /etc/kube-flannel/cni-conf.json\n        - /etc/cni/net.d/10-flannel.conf\n        volumeMounts:\n        - name: cni\n          mountPath: /etc/cni/net.d\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      containers:\n      - name: kube-flannel\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command: [ \"/opt/bin/flanneld\", \"--ip-masq\", \"--kube-subnet-mgr\" ]\n        securityContext:\n          privileged: true\n        env:\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: POD_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        volumeMounts:\n        - name: run\n          mountPath: /run\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      volumes:\n        - name: run\n          hostPath:\n            path: /run\n        - name: cni\n          hostPath:\n            path: /etc/cni/net.d\n        - name: flannel-cfg\n          configMap:\n            name: kube-flannel-cfg' | tee kube-flannel.yml\nkubectl create -f kube-flannel.yml\nmv kube-flannel.yml Net/\n\nkubectl get nodes --output=jsonpath='{range .items[*]}{.spec.podCIDR} via {.status.addresses[?(@.type==\"InternalIP\")].address} {\"\\n\"}{end}' | sudo tee /etc/sysconfig/network-scripts/route-eth0\necho \"@@{SERVICE_SUBNET}@@ via $(kubectl get nodes kubernetes-minion0 --output=jsonpath='{.status.addresses[?(@.type==\"InternalIP\")].address}')\" | sudo tee -a /etc/sysconfig/network-scripts/route-eth0\nsleep 5\nsudo systemctl restart network", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "9ef26b70-9346-4cf4-ae41-af0f78fdd3b0"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetupKubeDns", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    addonmanager.kubernetes.io/mode: EnsureExists\ndata:\n  upstreamNameservers: |\n    [\"8.8.8.8\", \"4.2.2.2\"]\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    kubernetes.io/name: \"KubeDNS\"\nspec:\n  selector:\n    k8s-app: kube-dns\n  clusterIP: @@{KUBE_CLUSTER_DNS}@@\n  ports:\n    - name: dns\n      port: 53\n      protocol: UDP\n    - name: dns-tcp\n      port: 53\n      protocol: TCP\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\nspec:\n  strategy:\n    rollingUpdate:\n      maxSurge: 10%\n      maxUnavailable: 0\n  selector:\n    matchLabels:\n      k8s-app: kube-dns\n  template:\n    metadata:\n      labels:\n        k8s-app: kube-dns\n      annotations:\n        scheduler.alpha.kubernetes.io/critical-pod: ''\n    spec:\n      tolerations:\n      - key: \"CriticalAddonsOnly\"\n        operator: \"Exists\"\n      volumes:\n      - name: kube-dns-config\n        configMap:\n          name: kube-dns\n          optional: true\n      containers:\n      - name: kubedns\n        image: gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.4\n        resources:\n          limits:\n            memory: 170Mi\n          requests:\n            cpu: 100m\n            memory: 70Mi\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/kubedns\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        readinessProbe:\n          httpGet:\n            path: /readiness\n            port: 8081\n            scheme: HTTP\n          initialDelaySeconds: 3\n          timeoutSeconds: 5\n        args:\n        - --domain=cluster.local.\n        - --dns-port=10053\n        - --config-dir=/kube-dns-config\n        - --v=2\n        env:\n        - name: PROMETHEUS_PORT\n          value: \"10055\"\n        ports:\n        - containerPort: 10053\n          name: dns-local\n          protocol: UDP\n        - containerPort: 10053\n          name: dns-tcp-local\n          protocol: TCP\n        - containerPort: 10055\n          name: metrics\n          protocol: TCP\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /kube-dns-config\n      - name: dnsmasq\n        image: gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/dnsmasq\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - -v=2\n        - -logtostderr\n        - -configDir=/etc/k8s/dns/dnsmasq-nanny\n        - -restartDnsmasq=true\n        - --\n        - -k\n        - --cache-size=1000\n        - --log-facility=-\n        - --server=/cluster.local./127.0.0.1#10053\n        - --server=/in-addr.arpa/127.0.0.1#10053\n        - --server=/ip6.arpa/127.0.0.1#10053\n        ports:\n        - containerPort: 53\n          name: dns\n          protocol: UDP\n        - containerPort: 53\n          name: dns-tcp\n          protocol: TCP\n        resources:\n          requests:\n            cpu: 150m\n            memory: 20Mi\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /etc/k8s/dns/dnsmasq-nanny\n      - name: sidecar\n        image: gcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /metrics\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - --v=2\n        - --logtostderr\n        - --probe=kubedns,127.0.0.1:10053,kubernetes.default.svc.cluster.local.,5,A\n        - --probe=dnsmasq,127.0.0.1:53,kubernetes.default.svc.cluster.local.,5,A\n        ports:\n        - containerPort: 10054\n          name: metrics\n          protocol: TCP\n        resources:\n          requests:\n            memory: 20Mi\n            cpu: 10m\n      dnsPolicy:\n      serviceAccountName: kube-dns' | tee kube-dns.yaml\n      \nkubectl create -f kube-dns.yaml\nmv kube-dns.yaml DNS/", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "e72726f0-7a0e-4c3e-893d-9ef5fd213ebf"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetupNutanixVolumePlugin", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nif [ \"@@{PRISM_CLUSTER_IP}@@\" == \"\" ] && [ \"@@{PRISM_USERNAME}@@\" == \"\" ] && [ \"@@{PRISM_PASSWORD}@@\" == \"\" ]; then\n\texit\nfi\nmkdir volume_plugin\nNTNX_SECRET=$(echo -n \"@@{PRISM_USERNAME}@@:@@{PRISM_PASSWORD}@@\" | base64)\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: nutanixabs-provisioner\n---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: nutanixabs-provisioner-runner\nrules:\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumes\"]\n    verbs: [\"get\", \"list\", \"watch\", \"create\", \"delete\"]\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumeclaims\"]\n    verbs: [\"get\", \"list\", \"watch\", \"update\"]\n  - apiGroups: [\"storage.k8s.io\"]\n    resources: [\"storageclasses\"]\n    verbs: [\"get\", \"list\", \"watch\"]\n  - apiGroups: [\"\"]\n    resources: [\"events\"]\n    verbs: [\"list\", \"watch\", \"create\", \"update\", \"patch\"]\n  - apiGroups: [\"\"]\n    resources: [\"services\"]\n    verbs: [\"get\"]\n  - apiGroups: [\"\"]\n    resources: [\"secrets\"]\n    verbs: [\"get\", \"create\", \"delete\"]\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: run-nutanixabs-provisioner\nsubjects:\n  - kind: ServiceAccount\n    name: nutanixabs-provisioner\n    namespace: default\nroleRef:\n  kind: ClusterRole\n  name: nutanixabs-provisioner-runner\n  apiGroup: rbac.authorization.k8s.io\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: nutanixabs-provisioner\nspec:\n  replicas: 1\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: nutanixabs-provisioner\n    spec:\n      serviceAccount: nutanixabs-provisioner\n      hostNetwork: true\n      containers:\n        -\n          image: \"subodh73/nutanixabs-provisioner\"\n          name: nutanixabs-provisioner\n          args: [\"--v=4\"]\n          imagePullPolicy: IfNotPresent\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: ntnx-secret\n  namespace: default\ndata:\n  key: <SECRET>\ntype: nutanix/abs\n---\nkind: StorageClass\napiVersion: storage.k8s.io/v1\nmetadata:\n  name: silver \nprovisioner: nutanix/abs\nparameters:\n     prismEndPoint: @@{PRISM_CLUSTER_IP}@@:9440\n     dataServiceEndPoint: @@{PRISM_DATA_SERVICE_IP}@@:3260\n     user: @@{PRISM_USERNAME}@@\n     password: @@{PRISM_PASSWORD}@@\n     secretName: ntnx-secret\n     storageContainer: @@{CONTAINER_NAME}@@\n     fsType: ext4\n     chapAuthEnabled: \"false\"' | tee volume_plugin/nutanix-provisioner.yaml\n\nsed -i \"s/<SECRET>/${NTNX_SECRET}/\" volume_plugin/nutanix-provisioner.yaml\nkubectl create -f volume_plugin/nutanix-provisioner.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "18cec673-2223-4ebd-9f59-6b7538f09428"}], "description": "", "name": "ec49e982_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "3a7a0f2a_dag", "uuid": "84339b3a-1639-4178-b06a-39f0f994941b"}, "message_list": [], "variable_list": [], "uuid": "1ae5ad7c-43dd-4d72-96e7-18e257c08907"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "6531d3e0-e64e-4145-8490-7824f2b0b070", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "990f28cf_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "f20caf71-a08b-43a3-a32d-3cd3e8857620"}], "description": "", "name": "e34ef8d6_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "990f28cf_dag", "uuid": "f20caf71-a08b-43a3-a32d-3cd3e8857620"}, "message_list": [], "variable_list": [], "uuid": "98351c95-23de-461b-a039-56eff73863ff"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "d304efb7-cc08-4685-8d61-ac9ffd2c9ef7", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "9afd1d8b_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "de7f2036-344f-4c6b-868b-2ac4f8f16593"}], "description": "", "name": "3c8f0554_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "9afd1d8b_dag", "uuid": "de7f2036-344f-4c6b-868b-2ac4f8f16593"}, "message_list": [], "variable_list": [], "uuid": "a65bbc0d-9f55-4fe3-a7a3-5a450ff3bb76"}, "message_list": [], "name": "action_soft_delete"}], "depends_on_list": [], "name": "Kubernetes_Master", "state": "ACTIVE", "port_list": [], "editables": {}, "tier": "", "message_list": [], "variable_list": [], "description": ""}, {"singleton": false, "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "45737e9a-23e4-402f-a760-43cacdc1c719", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "ConfigureMinion", "uuid": "379e70da-90da-417f-9ae3-c0df9944bae4"}, {"kind": "app_task", "name": "SetFlag", "uuid": "16a577b8-ac04-4488-ba21-bb202eca0022"}], "name": "2a209891_dag", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "ConfigureMinion", "uuid": "379e70da-90da-417f-9ae3-c0df9944bae4"}, "edge_type": "user_defined", "type": "", "uuid": "9ff3d158-bd43-4bb7-839e-29ba0cc1ddc3", "to_task_reference": {"kind": "app_task", "name": "SetFlag", "uuid": "16a577b8-ac04-4488-ba21-bb202eca0022"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "908de796-7457-4116-ac52-387f5690b685"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ConfigureMinion", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nCONTROLLER_IP=@@{K8SC.address}@@\nKUBERNETES_CLUSTER_DNS=\"@@{KUBE_CLUSTER_DNS}@@\"\nUSERNAME=\"@@{CENTOS.username}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\necho \"@@{CENTOS.secret}@@\" | tee centos.pem\nchmod 400 centos.pem\n\nsleep 60\n# -*- Bootstrapping Kubernetes Workers\nHOSTNAME=$(hostname -s)\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.pem ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:kube-proxy.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:ca.pem ./\n\nsudo mkdir -p /var/lib/{kubelet,kube-proxy,kubernetes} /var/run/kubernetes\nsudo mv kubectl kube-proxy kubelet /usr/bin/\n\nsudo mv ${HOSTNAME}-key.pem ${HOSTNAME}.pem /var/lib/kubelet/\nsudo mv ${HOSTNAME}.kubeconfig /var/lib/kubelet/kubeconfig\nsudo mv ca.pem /var/lib/kubernetes/\n\n# -*- Install Docker\ntar -xvf docker-1.12.6.tgz\nsudo cp docker/docker* /usr/bin/\necho \"[Unit]\nDescription=Docker Application Container Engine\nDocumentation=http://docs.docker.com\n\n[Service]\nExecStart=/usr/bin/docker daemon \\\\\n  --iptables=false \\\\\n  --ip-masq=false \\\\\n  --host=unix:///var/run/docker.sock \\\\\n  --log-level=error \\\\\n  --storage-driver=overlay\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/docker.service\n\necho \"[Unit]\nDescription=Kubernetes Kubelet\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nExecStart=/usr/bin/kubelet \\\n  --allow-privileged=true \\\n  --cluster-dns=${KUBERNETES_CLUSTER_DNS} \\\n  --cluster-domain=cluster.local \\\n  --container-runtime=docker \\\n  --enable-custom-metrics \\\n  --kubeconfig=/var/lib/kubelet/kubeconfig \\\n  --network-plugin=cni \\\n  --pod-cidr=${CLUSTER_SUBNET} \\\n  --register-node=true \\\n  --require-kubeconfig \\\n  --runtime-request-timeout=10m \\\n  --tls-cert-file=/var/lib/kubelet/${HOSTNAME}.pem \\\n  --tls-private-key-file=/var/lib/kubelet/${HOSTNAME}-key.pem \\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kubelet.service\n\nsudo mv kube-proxy.kubeconfig /var/lib/kube-proxy/kubeconfig\n\necho \"[Unit]\nDescription=Kubernetes Kube Proxy\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-proxy \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --masquerade-all=true \\\n  --kubeconfig=/var/lib/kube-proxy/kubeconfig \\\\\n  --proxy-mode=iptables \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-proxy.service\n\nsudo mkdir -p /etc/cni/net.d\necho '{\n  \"name\": \"cbr0\",\n  \"type\": \"flannel\",\n  \"delegate\": {\n    \"isDefaultGateway\": true\n  }\n}' | sudo tee /etc/cni/net.d/10-flannel.conf\n\nsudo mkdir -p /opt/cni/bin\nsudo tar -zxvf cni-plugins-amd64-v0.6.0.tgz -C /opt/cni/bin\n\n# -*- Configure Iscsi iqn\necho \"InitiatorName=iqn.1994-05.com.nutanix:k8s-worker\" | sudo tee /etc/iscsi/initiatorname.iscsi \n\nsudo systemctl daemon-reload\nsudo systemctl enable docker kubelet kube-proxy iscsid\nsudo systemctl start docker kubelet kube-proxy iscsid", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "379e70da-90da-417f-9ae3-c0df9944bae4"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetFlag", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#script\nprint \"COMPLETE=True\"", "eval_variables": ["COMPLETE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "", "type": "SET_VARIABLE", "variable_list": [], "uuid": "16a577b8-ac04-4488-ba21-bb202eca0022"}], "description": "", "name": "658fecfa_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "2a209891_dag", "uuid": "908de796-7457-4116-ac52-387f5690b685"}, "message_list": [], "variable_list": [], "uuid": "44a45841-2fe5-4745-9d72-9e624cb09139"}, "message_list": [], "name": "action_create"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "ba216599-ece7-45c2-a7fd-956aa61d7814", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "1ca74521_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "36cdd392-ca6a-44f9-9d76-b63715241243"}], "description": "", "name": "4356ce2d_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "1ca74521_dag", "uuid": "36cdd392-ca6a-44f9-9d76-b63715241243"}, "message_list": [], "variable_list": [], "uuid": "b8160369-b912-4636-ab61-00f51887a5c4"}, "message_list": [], "name": "action_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "6d0f68b8-020d-4bb9-86dd-9c1d0aa940e8", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "983862b1_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "f35b7bb9-16ec-46f6-a481-8036901aac57"}], "description": "", "name": "6583643e_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "983862b1_dag", "uuid": "f35b7bb9-16ec-46f6-a481-8036901aac57"}, "message_list": [], "variable_list": [], "uuid": "323b3136-fe9e-4d88-b6dc-36627d25d7ca"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "7db4e296-df7f-4d16-82d7-a7611f33b3af", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "cba58264_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "a8c7df0e-14da-4e93-9801-cdb872da29f0"}], "description": "", "name": "3cee8199_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "cba58264_dag", "uuid": "a8c7df0e-14da-4e93-9801-cdb872da29f0"}, "message_list": [], "variable_list": [], "uuid": "7bc8b076-3ec5-49f7-9870-2824dfed4bdf"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "ee081eaa-10a6-4b44-9943-4c6d07f9df4c", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "389a6493_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "d66cfc9b-7e41-4f31-8c92-5f3be94e96b9"}], "description": "", "name": "25b466fc_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "389a6493_dag", "uuid": "d66cfc9b-7e41-4f31-8c92-5f3be94e96b9"}, "message_list": [], "variable_list": [], "uuid": "2d7bcea2-b7c3-427c-8b3d-74c1d7269099"}, "message_list": [], "name": "action_soft_delete"}], "depends_on_list": [], "name": "Kubernetes_Minion", "state": "ACTIVE", "port_list": [], "editables": {}, "tier": "", "message_list": [], "variable_list": [], "description": ""}], "substrate_definition_list": [{"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "2ae6da31-128b-4afd-8a59-cc6146cb20c6", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Aws_Provision_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "febff497-cd01-4470-a1a0-8fd81ff43fae"}, {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SC_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "e5e7f0ba-b24a-40c1-a8c9-f76755ff3223"}], "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Aws_Provision_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "febff497-cd01-4470-a1a0-8fd81ff43fae"}, "edge_type": "inherent", "type": "", "uuid": "e54a7b83-eb25-4fac-84fa-9b0ddd384706", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SC_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "e5e7f0ba-b24a-40c1-a8c9-f76755ff3223"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "b8e9ffa1-2396-41a8-a2e5-b92c8dbd19cd"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Aws_Provision_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"name": "K8_MASTER_AWS", "availability_zone_reference": null, "backup_policy": null, "type": "PROVISION_AWS_VM", "cluster_reference": null, "resources": {"instance_profile_name": "Winson_EC2_Admin", "availability_zone": "ap-southeast-1a", "subnet_id": "subnet-328e357b", "key_name": "Winson-AWS-Keypair", "region": "ap-southeast-1", "instance_initiated_shutdown_behavior": "", "user_data": "", "image_id": "ami-f02d428c", "instance_type": "t2.small", "state": "RUNNING", "security_group_list": [{"type": "", "security_group_id": "sg-3ae6cd5c"}], "block_device_map": {"data_disk_list": [], "type": "", "root_disk": {"size_gb": 20, "volume_type": "GP2", "device_name": "/dev/sda1", "iops": 1, "snapshot_id": "", "type": "", "delete_on_termination": true}}, "private_ip_address": "", "vpc_id": "vpc-1c86417b", "tag_list": [], "type": "", "account_uuid": "a85a34ac-20cc-e879-db9a-f759b458639f", "associate_public_ip_address": true}}, "timeout_secs": "", "type": "PROVISION_AWS_VM", "variable_list": [], "uuid": "febff497-cd01-4470-a1a0-8fd81ff43fae"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__check_login_for_K8SC_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{public_ip_address}@@"}, "timeout_secs": "", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "e5e7f0ba-b24a-40c1-a8c9-f76755ff3223"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "b8e9ffa1-2396-41a8-a2e5-b92c8dbd19cd"}, "message_list": [], "variable_list": [], "uuid": "41e0d71b-81f3-4a62-9c59-fc184189338d"}, "message_list": [], "name": "action_create"}, {"description": "System action for powering on an application", "type": "system", "uuid": "39165441-f8a1-4853-a007-03a8e6393596", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Aws_Operation_PowerOn_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "32c988bb-850a-4949-b82f-d8b788838b15"}, {"kind": "app_task", "name": "check_login_for_K8SC_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "5d48dbac-1497-4736-a4d1-e6517b8031d9"}], "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Aws_Operation_PowerOn_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "32c988bb-850a-4949-b82f-d8b788838b15"}, "edge_type": "inherent", "type": "", "uuid": "dfdd195d-d8ce-4bdd-99f0-afe8088a1441", "to_task_reference": {"kind": "app_task", "name": "check_login_for_K8SC_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "5d48dbac-1497-4736-a4d1-e6517b8031d9"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "ec2e033a-281d-4420-9358-c6801d2cfb1e"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Aws_Operation_PowerOn_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "", "type": "VMOPERATION_AWS_VM", "variable_list": [], "uuid": "32c988bb-850a-4949-b82f-d8b788838b15"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_K8SC_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{public_ip_address}@@"}, "timeout_secs": "", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "5d48dbac-1497-4736-a4d1-e6517b8031d9"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "ec2e033a-281d-4420-9358-c6801d2cfb1e"}, "message_list": [], "variable_list": [], "uuid": "549d9747-acdd-410f-830f-b91f99796c9d"}, "message_list": [], "name": "action_poweron"}, {"description": "System action for suspending an application", "type": "system", "uuid": "7f7025d3-9bbd-449d-b93f-631e32945ed2", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "f5571b41-2d33-4d1f-817c-5de7f16898f0"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "f5571b41-2d33-4d1f-817c-5de7f16898f0"}, "message_list": [], "variable_list": [], "uuid": "87087202-b5e7-4dc7-827d-e0b31df295e6"}, "message_list": [], "name": "action_suspend"}, {"description": "System action for modifying an application", "type": "system", "uuid": "baac9087-dcd5-4c2e-b034-aed08c010d17", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "f66cd120-3afc-4b0b-9d5d-e20db7ff99bf"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "f66cd120-3afc-4b0b-9d5d-e20db7ff99bf"}, "message_list": [], "variable_list": [], "uuid": "fb74733e-2031-4955-9266-cf455797a871"}, "message_list": [], "name": "action_modify"}, {"description": "System action for powering off an application", "type": "system", "uuid": "133a1681-3bbd-4900-9146-7bb9df3de299", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Aws_Operation_PowerOff_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "bdd0a5e5-ca44-48ea-a901-df268ea34524"}], "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "80c1fb07-f51e-4d2f-ab31-fc563b08d720"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Aws_Operation_PowerOff_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "", "type": "VMOPERATION_AWS_VM", "variable_list": [], "uuid": "bdd0a5e5-ca44-48ea-a901-df268ea34524"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "80c1fb07-f51e-4d2f-ab31-fc563b08d720"}, "message_list": [], "variable_list": [], "uuid": "8bc82646-8f47-4c84-a2d2-109ecc5d81fb"}, "message_list": [], "name": "action_poweroff"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "7e5a6376-3da9-43b3-a5c5-ac854ea0d3fd", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Aws_Delete_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "20efca94-4a06-4183-9912-68733042ad9a"}], "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "6259a81f-10f3-49d9-9515-23d84ef54af3"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Aws_Delete_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_AWS_VM", "variable_list": [], "uuid": "20efca94-4a06-4183-9912-68733042ad9a"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "6259a81f-10f3-49d9-9515-23d84ef54af3"}, "message_list": [], "variable_list": [], "uuid": "fa438597-e3a8-4d0d-a386-2759eed6dd75"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "bb0585be-5986-48a6-93b4-36b256bf0444", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Substrate_Element_Delete_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "05047bd9-c603-44a8-8f8f-48d7dc9e31da"}], "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2ce0062b-c51f-40b6-8beb-458c2f22a479"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Substrate_Element_Delete_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "05047bd9-c603-44a8-8f8f-48d7dc9e31da"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "2ce0062b-c51f-40b6-8beb-458c2f22a479"}, "message_list": [], "variable_list": [], "uuid": "e9f28a55-c545-407d-965d-5fc75a127b55"}, "message_list": [], "name": "action_soft_delete"}], "type": "AWS_VM", "name": "K8SC", "state": "ACTIVE", "readiness_probe": {"connection_type": "SSH", "disable_readiness_probe": false, "timeout_secs": "60", "address": "@@{public_ip_address}@@", "connection_port": 22, "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "editables": {}, "os_type": "Linux", "message_list": [], "create_spec": {"name": "K8_MASTER_AWS", "availability_zone_reference": null, "backup_policy": null, "type": "PROVISION_AWS_VM", "cluster_reference": null, "resources": {"instance_profile_name": "Winson_EC2_Admin", "availability_zone": "ap-southeast-1a", "subnet_id": "subnet-328e357b", "key_name": "Winson-AWS-Keypair", "region": "ap-southeast-1", "instance_initiated_shutdown_behavior": "", "user_data": "", "image_id": "ami-f02d428c", "instance_type": "t2.small", "state": "RUNNING", "security_group_list": [{"type": "", "security_group_id": "sg-3ae6cd5c"}], "block_device_map": {"data_disk_list": [], "type": "", "root_disk": {"size_gb": 20, "volume_type": "GP2", "device_name": "/dev/sda1", "iops": 1, "snapshot_id": "", "type": "", "delete_on_termination": true}}, "private_ip_address": "", "vpc_id": "vpc-1c86417b", "tag_list": [], "type": "", "account_uuid": "a85a34ac-20cc-e879-db9a-f759b458639f", "associate_public_ip_address": true}}, "variable_list": [], "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, {"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "e49eaff1-6218-4637-a4cd-53cfdda63369", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Aws_Provision_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "3d4c244e-b752-4e50-91d1-3c5c1196102c"}, {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SM_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "151cc7ba-db98-46a3-b29c-f3d2daae75e8"}], "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Aws_Provision_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "3d4c244e-b752-4e50-91d1-3c5c1196102c"}, "edge_type": "inherent", "type": "", "uuid": "3f52b304-4edd-4861-8cf5-4ccc3589e52d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SM_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "151cc7ba-db98-46a3-b29c-f3d2daae75e8"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "9774b4ff-e49f-4b9b-8480-547e5a7a34d0"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Aws_Provision_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"name": "K8_MINION_AWS", "availability_zone_reference": null, "backup_policy": null, "type": "PROVISION_AWS_VM", "cluster_reference": null, "resources": {"instance_profile_name": "Winson_EC2_Admin", "availability_zone": "ap-southeast-1a", "subnet_id": "subnet-328e357b", "key_name": "Winson-AWS-Keypair", "region": "ap-southeast-1", "instance_initiated_shutdown_behavior": "", "user_data": "", "image_id": "ami-f02d428c", "instance_type": "t2.small", "state": "RUNNING", "security_group_list": [{"type": "", "security_group_id": "sg-3ae6cd5c"}], "block_device_map": {"data_disk_list": [{"size_gb": 8, "volume_type": "STANDARD", "device_name": "/dev/sdc", "iops": 1, "snapshot_id": "", "type": "", "delete_on_termination": true}, {"size_gb": 8, "volume_type": "STANDARD", "device_name": "/dev/sdd", "iops": 1, "snapshot_id": "", "type": "", "delete_on_termination": true}, {"size_gb": 8, "volume_type": "STANDARD", "device_name": "/dev/sdb", "iops": 1, "snapshot_id": "", "type": "", "delete_on_termination": true}], "type": "", "root_disk": {"size_gb": 20, "volume_type": "GP2", "device_name": "/dev/sda1", "iops": 1, "snapshot_id": "", "type": "", "delete_on_termination": true}}, "private_ip_address": "", "vpc_id": "vpc-1c86417b", "tag_list": [], "type": "", "account_uuid": "a85a34ac-20cc-e879-db9a-f759b458639f", "associate_public_ip_address": true}}, "timeout_secs": "", "type": "PROVISION_AWS_VM", "variable_list": [], "uuid": "3d4c244e-b752-4e50-91d1-3c5c1196102c"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__check_login_for_K8SM_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{public_ip_address}@@"}, "timeout_secs": "", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "151cc7ba-db98-46a3-b29c-f3d2daae75e8"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "9774b4ff-e49f-4b9b-8480-547e5a7a34d0"}, "message_list": [], "variable_list": [], "uuid": "f6fb72cc-d23a-45e0-85a1-a9ffca2e7774"}, "message_list": [], "name": "action_create"}, {"description": "System action for powering on an application", "type": "system", "uuid": "0b60c032-db9a-4ab0-9733-0696a63ab2a8", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Aws_Operation_PowerOn_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "c0ec1828-0821-4dc7-8054-475b859c1a83"}, {"kind": "app_task", "name": "check_login_for_K8SM_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "6a0de27f-5910-4ce5-96cc-cd890684fa1f"}], "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Aws_Operation_PowerOn_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "c0ec1828-0821-4dc7-8054-475b859c1a83"}, "edge_type": "inherent", "type": "", "uuid": "bca67d2e-0917-4e10-af07-65d6016c0e10", "to_task_reference": {"kind": "app_task", "name": "check_login_for_K8SM_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "6a0de27f-5910-4ce5-96cc-cd890684fa1f"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2e4b4b8c-f8bf-4416-b12f-990ffc349c7a"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Aws_Operation_PowerOn_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "", "type": "VMOPERATION_AWS_VM", "variable_list": [], "uuid": "c0ec1828-0821-4dc7-8054-475b859c1a83"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_K8SM_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{public_ip_address}@@"}, "timeout_secs": "", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "6a0de27f-5910-4ce5-96cc-cd890684fa1f"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "2e4b4b8c-f8bf-4416-b12f-990ffc349c7a"}, "message_list": [], "variable_list": [], "uuid": "0e03e6eb-419b-4da5-867d-08627bedf136"}, "message_list": [], "name": "action_poweron"}, {"description": "System action for suspending an application", "type": "system", "uuid": "caf78d43-e250-451d-8880-60eb8b635540", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "6a591adb-c5dd-4ac4-bbb7-1b3418fb12f3"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "6a591adb-c5dd-4ac4-bbb7-1b3418fb12f3"}, "message_list": [], "variable_list": [], "uuid": "db744ab3-6b57-4898-9369-cdc19a049b00"}, "message_list": [], "name": "action_suspend"}, {"description": "System action for modifying an application", "type": "system", "uuid": "343f27d0-4b98-4748-b4af-aaa7ca0b92cf", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2fab5e1d-984d-4d2e-9d5c-af775402e565"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "2fab5e1d-984d-4d2e-9d5c-af775402e565"}, "message_list": [], "variable_list": [], "uuid": "c16b4017-cbeb-451a-8e32-2dec032302f2"}, "message_list": [], "name": "action_modify"}, {"description": "System action for powering off an application", "type": "system", "uuid": "3e1af0e8-7edc-4192-b4cd-033a4b540f35", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Aws_Operation_PowerOff_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "8243f2ae-bcbc-41b3-8dd5-0707d607cd44"}], "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "da8b0189-2e23-4ef7-9526-0fe4ed42e217"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Aws_Operation_PowerOff_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "", "type": "VMOPERATION_AWS_VM", "variable_list": [], "uuid": "8243f2ae-bcbc-41b3-8dd5-0707d607cd44"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "da8b0189-2e23-4ef7-9526-0fe4ed42e217"}, "message_list": [], "variable_list": [], "uuid": "d6b6109a-84cd-4e54-88d4-c21aac3e94d8"}, "message_list": [], "name": "action_poweroff"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "1a201841-8fc7-420d-a96a-d6f31164b9ff", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Aws_Delete_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "c51e3379-cc3e-4934-addc-64b3db00fa36"}], "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "63bdbff3-da2a-4951-983c-22e089c00067"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Aws_Delete_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_AWS_VM", "variable_list": [], "uuid": "c51e3379-cc3e-4934-addc-64b3db00fa36"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "63bdbff3-da2a-4951-983c-22e089c00067"}, "message_list": [], "variable_list": [], "uuid": "115d9cb2-8283-4823-8b06-da85e645875b"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "480a5ed5-3bd0-4253-81d4-f321d52ad1d6", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Substrate_Element_Delete_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "f4b71eac-7874-4ca2-9866-de3a90274dc5"}], "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "138d2b68-8106-4c09-a2ab-d950d5474489"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Substrate_Element_Delete_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "f4b71eac-7874-4ca2-9866-de3a90274dc5"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "138d2b68-8106-4c09-a2ab-d950d5474489"}, "message_list": [], "variable_list": [], "uuid": "5453f5d0-bfda-4793-8906-f4545818a03c"}, "message_list": [], "name": "action_soft_delete"}], "type": "AWS_VM", "name": "K8SM", "state": "ACTIVE", "readiness_probe": {"connection_type": "SSH", "disable_readiness_probe": false, "timeout_secs": "60", "address": "@@{public_ip_address}@@", "connection_port": 22, "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "editables": {}, "os_type": "Linux", "message_list": [], "create_spec": {"name": "K8_MINION_AWS", "availability_zone_reference": null, "backup_policy": null, "type": "PROVISION_AWS_VM", "cluster_reference": null, "resources": {"instance_profile_name": "Winson_EC2_Admin", "availability_zone": "ap-southeast-1a", "subnet_id": "subnet-328e357b", "key_name": "Winson-AWS-Keypair", "region": "ap-southeast-1", "instance_initiated_shutdown_behavior": "", "user_data": "", "image_id": "ami-f02d428c", "instance_type": "t2.small", "state": "RUNNING", "security_group_list": [{"type": "", "security_group_id": "sg-3ae6cd5c"}], "block_device_map": {"data_disk_list": [{"size_gb": 8, "volume_type": "STANDARD", "device_name": "/dev/sdc", "iops": 1, "snapshot_id": "", "type": "", "delete_on_termination": true}, {"size_gb": 8, "volume_type": "STANDARD", "device_name": "/dev/sdd", "iops": 1, "snapshot_id": "", "type": "", "delete_on_termination": true}, {"size_gb": 8, "volume_type": "STANDARD", "device_name": "/dev/sdb", "iops": 1, "snapshot_id": "", "type": "", "delete_on_termination": true}], "type": "", "root_disk": {"size_gb": 20, "volume_type": "GP2", "device_name": "/dev/sda1", "iops": 1, "snapshot_id": "", "type": "", "delete_on_termination": true}}, "private_ip_address": "", "vpc_id": "vpc-1c86417b", "tag_list": [], "type": "", "account_uuid": "a85a34ac-20cc-e879-db9a-f759b458639f", "associate_public_ip_address": true}}, "variable_list": [], "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}], "credential_definition_list": [{"username": "centos", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "CENTOS", "state": "ACTIVE", "editables": {"username": true, "secret": true}, "type": "KEY", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}], "app_profile_list": [{"deployment_create_list": [{"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "5611b39a-f3f0-46ad-bc5c-bc4cf1104e98", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "e537b55e-16d2-4c6e-a595-77346ece6dc8"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "caba2d70-022f-4cb4-b30c-17ed506430f8"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "2c3f5fe3-f9a2-4d0d-960c-55a98cfdd886"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "30896b0d-b747-4425-91ad-21f2cd424388"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "4a34c4d5-e6cc-45ce-ac20-b78121bf01a7"}], "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "30896b0d-b747-4425-91ad-21f2cd424388"}, "edge_type": "inherent", "type": "", "uuid": "8ed99fb1-f400-4ea4-8265-381d0571bb31", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "4a34c4d5-e6cc-45ce-ac20-b78121bf01a7"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "2c3f5fe3-f9a2-4d0d-960c-55a98cfdd886"}, "edge_type": "inherent", "type": "", "uuid": "fda3ae54-b64a-4b9d-bb72-6e81e1a7c82d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "30896b0d-b747-4425-91ad-21f2cd424388"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "e537b55e-16d2-4c6e-a595-77346ece6dc8"}, "edge_type": "inherent", "type": "", "uuid": "358bf32d-0856-46d0-b633-526c9a85601f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "caba2d70-022f-4cb4-b30c-17ed506430f8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "caba2d70-022f-4cb4-b30c-17ed506430f8"}, "edge_type": "inherent", "type": "", "uuid": "87b82201-2671-47a0-96cf-060f6c1d7295", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "2c3f5fe3-f9a2-4d0d-960c-55a98cfdd886"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "355eddb4-bb50-4667-bdd3-45702884a37a"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "e537b55e-16d2-4c6e-a595-77346ece6dc8"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "41e0d71b-81f3-4a62-9c59-fc184189338d"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "caba2d70-022f-4cb4-b30c-17ed506430f8"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "973063f2-e43b-4644-8d8c-8344a316170e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2c3f5fe3-f9a2-4d0d-960c-55a98cfdd886"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "80edfe72_runbook", "uuid": "5db5b0fd-bd65-4df4-9471-6f2af7e9228a"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "30896b0d-b747-4425-91ad-21f2cd424388"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "1ae5ad7c-43dd-4d72-96e7-18e257c08907"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4a34c4d5-e6cc-45ce-ac20-b78121bf01a7"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "355eddb4-bb50-4667-bdd3-45702884a37a"}, "message_list": [], "variable_list": [], "uuid": "6995eec7-c90d-4526-95eb-5f8421d148d4"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "670a51d1-4dcc-4e2e-9c3a-b911a8e4df50", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "f72436f7-f0ad-4d14-9127-06e229c7e37a"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "6b5e1eed-4fe5-4ea1-a1c7-0f35f922c2d1"}], "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "f72436f7-f0ad-4d14-9127-06e229c7e37a"}, "edge_type": "inherent", "type": "", "uuid": "f45946bf-0055-4e69-9070-f00d08476c9d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "6b5e1eed-4fe5-4ea1-a1c7-0f35f922c2d1"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2dfb9792-8a3d-4949-bc7b-9bea288e0262"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "549d9747-acdd-410f-830f-b91f99796c9d"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f72436f7-f0ad-4d14-9127-06e229c7e37a"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "1ae5ad7c-43dd-4d72-96e7-18e257c08907"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6b5e1eed-4fe5-4ea1-a1c7-0f35f922c2d1"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "2dfb9792-8a3d-4949-bc7b-9bea288e0262"}, "message_list": [], "variable_list": [], "uuid": "a1e22f77-c3af-4363-994a-b7491da6b633"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "2732ebb5-7777-4f5f-ad44-4f1803cec515", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "d9f33a6b-3482-427f-a7ce-7770222a9982"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "a848d81c-4de8-43b3-b9f0-4f8c617930f1"}], "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "d9f33a6b-3482-427f-a7ce-7770222a9982"}, "edge_type": "inherent", "type": "", "uuid": "85d45e7b-01d9-458b-bbad-3f18c93bb89e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "a848d81c-4de8-43b3-b9f0-4f8c617930f1"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "ac411c32-c53d-4b02-9204-d6cf1d95ed1a"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "98351c95-23de-461b-a039-56eff73863ff"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d9f33a6b-3482-427f-a7ce-7770222a9982"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "8bc82646-8f47-4c84-a2d2-109ecc5d81fb"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a848d81c-4de8-43b3-b9f0-4f8c617930f1"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "ac411c32-c53d-4b02-9204-d6cf1d95ed1a"}, "message_list": [], "variable_list": [], "uuid": "e09610a8-c8f6-49fe-af20-9db70ac9faef"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "b21234bc-9f0e-4e92-b164-be17a13ccad2", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "18da9221-5c84-4821-b66f-ed1428640bd5"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "659e8e06-e5f4-49f4-9cfa-3dcf97e782e0"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "d858def5-5227-42af-8482-37e7608d2906"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "9a8db4ca-726a-428f-af1e-ddbba65a3374"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "9bb7195b-ef55-41c9-bdd0-7c647810ed56"}], "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "18da9221-5c84-4821-b66f-ed1428640bd5"}, "edge_type": "inherent", "type": "", "uuid": "f499045f-3303-44a9-9443-e957ad630c03", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "659e8e06-e5f4-49f4-9cfa-3dcf97e782e0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "659e8e06-e5f4-49f4-9cfa-3dcf97e782e0"}, "edge_type": "inherent", "type": "", "uuid": "bc99f1f2-d906-4fb3-bf36-3bd4255d9a15", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "d858def5-5227-42af-8482-37e7608d2906"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "d858def5-5227-42af-8482-37e7608d2906"}, "edge_type": "inherent", "type": "", "uuid": "1a041f8e-db62-407a-82ce-f0cd44838dd3", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "9a8db4ca-726a-428f-af1e-ddbba65a3374"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "9a8db4ca-726a-428f-af1e-ddbba65a3374"}, "edge_type": "inherent", "type": "", "uuid": "382cad9b-1de8-4396-a4d6-2f21285ea455", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "9bb7195b-ef55-41c9-bdd0-7c647810ed56"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "fc9e4a6b-96f0-4ecf-a7ff-f54f0d9efb4c"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "98351c95-23de-461b-a039-56eff73863ff"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "18da9221-5c84-4821-b66f-ed1428640bd5"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c9c07e72_runbook", "uuid": "c6b6049c-a941-4706-95f0-0e57a4d200c0"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "659e8e06-e5f4-49f4-9cfa-3dcf97e782e0"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "01f3c580-c8cd-4550-af84-53c250a7730f"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d858def5-5227-42af-8482-37e7608d2906"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "fa438597-e3a8-4d0d-a386-2759eed6dd75"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9a8db4ca-726a-428f-af1e-ddbba65a3374"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "9bb7195b-ef55-41c9-bdd0-7c647810ed56"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "fc9e4a6b-96f0-4ecf-a7ff-f54f0d9efb4c"}, "message_list": [], "variable_list": [], "uuid": "94223aa5-0bfa-429c-a6ef-5de5ecfe5639"}, "message_list": [], "name": "action_delete"}, {"description": "System action for scaleout", "type": "system", "uuid": "3498a365-b31b-4f51-9520-7bfcb83d3d21", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scaleout_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "487e5268-a540-45ef-8c64-1e3b4a2b191a"}], "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "52334c24-650c-4a92-917e-2074ad1c1c33"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scaleout_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEOUT"}, "timeout_secs": "", "type": "SCALING", "variable_list": [], "uuid": "487e5268-a540-45ef-8c64-1e3b4a2b191a"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "52334c24-650c-4a92-917e-2074ad1c1c33"}, "message_list": [], "variable_list": [], "uuid": "d2ccd77e-7e1f-492c-a05e-3acb4b0be02f"}, "message_list": [], "name": "action_scaleout"}, {"description": "System action for scalein", "type": "system", "uuid": "ba2d9fe3-fcdb-4318-bec9-de62cdaa99a3", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scalein_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "f920b47c-c667-43e1-8a4c-ac09a1700e47"}], "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "19affb35-9d08-4ced-9e25-28a383f1f3f9"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scalein_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEIN"}, "timeout_secs": "", "type": "SCALING", "variable_list": [], "uuid": "f920b47c-c667-43e1-8a4c-ac09a1700e47"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "19affb35-9d08-4ced-9e25-28a383f1f3f9"}, "message_list": [], "variable_list": [], "uuid": "811474ad-64e7-4259-a919-ba66fa5e9933"}, "message_list": [], "name": "action_scalein"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "c786589d-e518-4624-ad40-9ccd4da17a9e", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "8e53aa48-ed4e-4f93-bf75-fa939abb0ca1"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "76d99206-7da3-4302-b279-339a06a44ccc"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "d7cfdd9d-df4b-4d1c-8dcb-65b4f46aefa2"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "dfb584b5-49e2-4180-a7b7-ec10876b8725"}], "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "8e53aa48-ed4e-4f93-bf75-fa939abb0ca1"}, "edge_type": "inherent", "type": "", "uuid": "b3e13c38-c84a-49d4-bbca-94f0b951dcff", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "76d99206-7da3-4302-b279-339a06a44ccc"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "76d99206-7da3-4302-b279-339a06a44ccc"}, "edge_type": "inherent", "type": "", "uuid": "2eebbd2a-7bda-4920-a574-f6d53c9aab29", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "d7cfdd9d-df4b-4d1c-8dcb-65b4f46aefa2"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "d7cfdd9d-df4b-4d1c-8dcb-65b4f46aefa2"}, "edge_type": "inherent", "type": "", "uuid": "fcdbac8c-3ffb-46ab-a3fe-31af69c9c193", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "dfb584b5-49e2-4180-a7b7-ec10876b8725"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "10d8cd98-c5c5-4f65-a84d-349639599261"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3c8f0554_runbook", "uuid": "a65bbc0d-9f55-4fe3-a7a3-5a450ff3bb76"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8e53aa48-ed4e-4f93-bf75-fa939abb0ca1"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "76d99206-7da3-4302-b279-339a06a44ccc"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "e9f28a55-c545-407d-965d-5fc75a127b55"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d7cfdd9d-df4b-4d1c-8dcb-65b4f46aefa2"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "dfb584b5-49e2-4180-a7b7-ec10876b8725"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "10d8cd98-c5c5-4f65-a84d-349639599261"}, "message_list": [], "variable_list": [], "uuid": "4b679174-a256-4829-8a5c-3c55b88c76d2"}, "message_list": [], "name": "action_soft_delete"}], "message_list": [], "editables": {}, "name": "d584b567_deployment", "state": "ACTIVE", "max_replicas": "1", "package_local_reference_list": [{"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}], "substrate_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "min_replicas": "1", "variable_list": [], "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, {"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "9ec9ef8d-4482-4514-aacf-928c301e7548", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "d6c56f34-846f-4695-a114-addf6a590b46"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "64f9da04-0858-45ab-9eb1-a8a1c4e41145"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "44def9c3-1979-4c4a-84e4-7d6d8fb6a5f0"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "5ffade28-5137-46ff-a421-15c5f1334e09"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "4d1ed209-030c-47d8-9d7a-6829332cf346"}], "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "5ffade28-5137-46ff-a421-15c5f1334e09"}, "edge_type": "inherent", "type": "", "uuid": "ee494378-5b39-4d4a-b028-f1672bfe415c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "4d1ed209-030c-47d8-9d7a-6829332cf346"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "44def9c3-1979-4c4a-84e4-7d6d8fb6a5f0"}, "edge_type": "inherent", "type": "", "uuid": "021a12c3-6e6c-497d-a155-f19167a5b975", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "5ffade28-5137-46ff-a421-15c5f1334e09"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "d6c56f34-846f-4695-a114-addf6a590b46"}, "edge_type": "inherent", "type": "", "uuid": "3fab12b4-baaa-4792-ad46-216b0bf14528", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "64f9da04-0858-45ab-9eb1-a8a1c4e41145"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "64f9da04-0858-45ab-9eb1-a8a1c4e41145"}, "edge_type": "inherent", "type": "", "uuid": "68af2731-96c6-472d-be49-de7cc046ddd3", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "44def9c3-1979-4c4a-84e4-7d6d8fb6a5f0"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "818f8482-6223-4f45-8f48-a6629baade8a"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "d6c56f34-846f-4695-a114-addf6a590b46"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "f6fb72cc-d23a-45e0-85a1-a9ffca2e7774"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "64f9da04-0858-45ab-9eb1-a8a1c4e41145"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "66917c0d-f905-466c-a378-a093bc18b632"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "44def9c3-1979-4c4a-84e4-7d6d8fb6a5f0"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "658fecfa_runbook", "uuid": "44a45841-2fe5-4745-9d72-9e624cb09139"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5ffade28-5137-46ff-a421-15c5f1334e09"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "323b3136-fe9e-4d88-b6dc-36627d25d7ca"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4d1ed209-030c-47d8-9d7a-6829332cf346"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "818f8482-6223-4f45-8f48-a6629baade8a"}, "message_list": [], "variable_list": [], "uuid": "192358b2-8b9b-4344-9aef-657775877048"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "d5784a44-7470-410c-a2f0-278f788e1e64", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "afc88bd6-ae2a-44e3-95cc-e73eed982adb"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "3268e7bb-2307-46f5-8c8d-befe3e38e313"}], "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "afc88bd6-ae2a-44e3-95cc-e73eed982adb"}, "edge_type": "inherent", "type": "", "uuid": "430d0772-29db-438b-aa57-d76600400955", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "3268e7bb-2307-46f5-8c8d-befe3e38e313"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "198b5853-7087-4e4d-ba67-39a7de67eed3"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "0e03e6eb-419b-4da5-867d-08627bedf136"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "afc88bd6-ae2a-44e3-95cc-e73eed982adb"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "323b3136-fe9e-4d88-b6dc-36627d25d7ca"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3268e7bb-2307-46f5-8c8d-befe3e38e313"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "198b5853-7087-4e4d-ba67-39a7de67eed3"}, "message_list": [], "variable_list": [], "uuid": "84c2fa91-94a3-42b6-a7df-9ccd6da5cd43"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "d9997c6c-38a7-4098-9ab4-983adad6329f", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "48a7bb44-012c-4330-86ff-e5e55433fba2"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "a7530924-28af-4ec0-a514-531ca79ceb4d"}], "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "48a7bb44-012c-4330-86ff-e5e55433fba2"}, "edge_type": "inherent", "type": "", "uuid": "1d5d13b0-5c4c-43a7-b74a-ea6835307820", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "a7530924-28af-4ec0-a514-531ca79ceb4d"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "c6e7ffdd-9b5b-49dc-8fe6-ea73eb6021ac"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "7bc8b076-3ec5-49f7-9870-2824dfed4bdf"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "48a7bb44-012c-4330-86ff-e5e55433fba2"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "d6b6109a-84cd-4e54-88d4-c21aac3e94d8"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a7530924-28af-4ec0-a514-531ca79ceb4d"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "c6e7ffdd-9b5b-49dc-8fe6-ea73eb6021ac"}, "message_list": [], "variable_list": [], "uuid": "dfe4fa59-bb36-4e4b-9fa2-d23174ba7f37"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "32901f5f-f80f-40d6-8255-562766f1c73c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "bc3e1af6-1288-4375-9bc6-f0a522409e84"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "04564d8f-2a05-410d-b540-95f240f7ec9e"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "0e7b2bb3-3e52-4530-800a-58c19478e88f"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "07d19f6b-c1da-482a-a995-79e25575c26c"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "a80dfe60-8343-4eb2-a56b-d95c19c1dbfe"}], "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "bc3e1af6-1288-4375-9bc6-f0a522409e84"}, "edge_type": "inherent", "type": "", "uuid": "a0982364-aada-42f4-9436-cf741f1d58b0", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "04564d8f-2a05-410d-b540-95f240f7ec9e"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "04564d8f-2a05-410d-b540-95f240f7ec9e"}, "edge_type": "inherent", "type": "", "uuid": "f5fac289-0f72-474a-b908-055e0e9dd352", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "0e7b2bb3-3e52-4530-800a-58c19478e88f"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "07d19f6b-c1da-482a-a995-79e25575c26c"}, "edge_type": "inherent", "type": "", "uuid": "f3223c81-fea4-4af2-a7b5-21a96d319434", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "a80dfe60-8343-4eb2-a56b-d95c19c1dbfe"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "0e7b2bb3-3e52-4530-800a-58c19478e88f"}, "edge_type": "inherent", "type": "", "uuid": "85e1f00a-3677-4fa3-ab64-9eac0f220801", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "07d19f6b-c1da-482a-a995-79e25575c26c"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "d28d4534-d18c-40dd-a012-7332588cc848"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "7bc8b076-3ec5-49f7-9870-2824dfed4bdf"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "bc3e1af6-1288-4375-9bc6-f0a522409e84"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4356ce2d_runbook", "uuid": "b8160369-b912-4636-ab61-00f51887a5c4"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "04564d8f-2a05-410d-b540-95f240f7ec9e"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "d2e0d2c4-a754-46a3-a747-3b4a2b566b24"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0e7b2bb3-3e52-4530-800a-58c19478e88f"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "115d9cb2-8283-4823-8b06-da85e645875b"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "07d19f6b-c1da-482a-a995-79e25575c26c"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "a80dfe60-8343-4eb2-a56b-d95c19c1dbfe"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "d28d4534-d18c-40dd-a012-7332588cc848"}, "message_list": [], "variable_list": [], "uuid": "bc654ce3-ed28-4041-a7a4-89308da3086f"}, "message_list": [], "name": "action_delete"}, {"description": "System action for scaleout", "type": "system", "uuid": "4abc646f-5d72-4264-8622-c8cda9bd1760", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scaleout_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "6da2643e-a033-4781-a87b-021331c24375"}], "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "e44c3479-3978-4e83-adf2-bc7786e76af3"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scaleout_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEOUT"}, "timeout_secs": "", "type": "SCALING", "variable_list": [], "uuid": "6da2643e-a033-4781-a87b-021331c24375"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "e44c3479-3978-4e83-adf2-bc7786e76af3"}, "message_list": [], "variable_list": [], "uuid": "68f1f484-5ec8-4bab-8f6b-a7ccb99c23fd"}, "message_list": [], "name": "action_scaleout"}, {"description": "System action for scalein", "type": "system", "uuid": "da393578-0f79-48d3-a713-d4b33ecbe263", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scalein_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "5af94b41-3c3b-456c-9849-60974c7438ec"}], "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "d015c50a-7dd0-4103-ba1a-2390683215bb"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scalein_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEIN"}, "timeout_secs": "", "type": "SCALING", "variable_list": [], "uuid": "5af94b41-3c3b-456c-9849-60974c7438ec"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "d015c50a-7dd0-4103-ba1a-2390683215bb"}, "message_list": [], "variable_list": [], "uuid": "2946c076-769d-48b9-8149-52d0a3e0e45f"}, "message_list": [], "name": "action_scalein"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "fb7bbdd0-f8ba-4203-a964-55ad2b3a2cb1", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "81a6b58f-a24f-4d1e-82fe-b53f62197bde"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "500a393d-a4d3-4b31-af3b-3f6d80f4f9e3"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "afe39420-0f38-4c3b-bb9a-6537b8984f21"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "75bd41b2-ab41-4612-9efb-9af3b068e13b"}], "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "81a6b58f-a24f-4d1e-82fe-b53f62197bde"}, "edge_type": "inherent", "type": "", "uuid": "2b111ff6-6d58-4ef4-9f91-a5b4d9e615c2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "500a393d-a4d3-4b31-af3b-3f6d80f4f9e3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "afe39420-0f38-4c3b-bb9a-6537b8984f21"}, "edge_type": "inherent", "type": "", "uuid": "818b1424-6382-439e-9510-c319a5c15c94", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "75bd41b2-ab41-4612-9efb-9af3b068e13b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "500a393d-a4d3-4b31-af3b-3f6d80f4f9e3"}, "edge_type": "inherent", "type": "", "uuid": "d40910c4-aa46-4d24-bade-0d0d55bba676", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "afe39420-0f38-4c3b-bb9a-6537b8984f21"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "5033549b-8ae8-4e41-b475-4043c70b5e1e"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "25b466fc_runbook", "uuid": "2d7bcea2-b7c3-427c-8b3d-74c1d7269099"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "81a6b58f-a24f-4d1e-82fe-b53f62197bde"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "500a393d-a4d3-4b31-af3b-3f6d80f4f9e3"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "5453f5d0-bfda-4793-8906-f4545818a03c"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "afe39420-0f38-4c3b-bb9a-6537b8984f21"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "75bd41b2-ab41-4612-9efb-9af3b068e13b"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "5033549b-8ae8-4e41-b475-4043c70b5e1e"}, "message_list": [], "variable_list": [], "uuid": "90b6eb66-c04f-4e5c-ab9a-637e1b9a9b09"}, "message_list": [], "name": "action_soft_delete"}], "message_list": [], "editables": {"min_replicas": true}, "name": "ff8e191c_deployment", "state": "ACTIVE", "max_replicas": "2", "package_local_reference_list": [{"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}], "substrate_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "min_replicas": "2", "variable_list": [], "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}], "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "bdc90e5c-ea49-40f4-bd3e-1914fa39adb6", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "AWS", "uuid": "bbb5183b-d818-4f2a-9d91-395139d050f8"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "1b1573d6-db4e-4cbf-881c-e05dd46d6a72"}, {"kind": "app_task", "name": "SYS_GEN__DE_Provision_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "637ad08b-a7d2-45a5-b850-27d62bb7dcb9"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "36ce3b66-42e7-456e-9c82-a0f1248a4f81"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "50b32559-dac6-48ea-8784-67db3b735493"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "616158c8-4fc0-49e3-8837-006b8692b156"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "65a35610-da87-4592-aaa4-21a7ad9d0b6f"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "d78cf0d8-481a-42c3-8f8e-822f043af74c"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "389ec275-d6b2-4396-ba31-45500367b35e"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "42b67d54-d7bb-4e8c-bca9-370fcbc86ca2"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "0184b3c8-7f87-4de5-b427-ba9d0f4f4865"}], "name": "SYS_GEN__Composite_DAG_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "42b67d54-d7bb-4e8c-bca9-370fcbc86ca2"}, "edge_type": "inherent", "type": "", "uuid": "66192a1a-6cb3-43e5-b3e9-f72b48c5c3f4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "0184b3c8-7f87-4de5-b427-ba9d0f4f4865"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "616158c8-4fc0-49e3-8837-006b8692b156"}, "edge_type": "inherent", "type": "", "uuid": "23969900-dab3-4840-930f-5ef0adf12f45", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "42b67d54-d7bb-4e8c-bca9-370fcbc86ca2"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "1b1573d6-db4e-4cbf-881c-e05dd46d6a72"}, "edge_type": "inherent", "type": "", "uuid": "01c483ee-94ab-43e4-ad88-f7923bfe6b70", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "50b32559-dac6-48ea-8784-67db3b735493"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "50b32559-dac6-48ea-8784-67db3b735493"}, "edge_type": "inherent", "type": "", "uuid": "9dc5155b-666c-4fb6-b77b-e73d2f117c80", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "616158c8-4fc0-49e3-8837-006b8692b156"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "d78cf0d8-481a-42c3-8f8e-822f043af74c"}, "edge_type": "inherent", "type": "", "uuid": "66a6b456-a04f-4b7a-b516-eff16e0135b2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "389ec275-d6b2-4396-ba31-45500367b35e"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "65a35610-da87-4592-aaa4-21a7ad9d0b6f"}, "edge_type": "inherent", "type": "", "uuid": "eb62f79d-96ef-4597-998b-0256af7ed69a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "d78cf0d8-481a-42c3-8f8e-822f043af74c"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "637ad08b-a7d2-45a5-b850-27d62bb7dcb9"}, "edge_type": "inherent", "type": "", "uuid": "483fb3d9-bfe6-4913-85f1-a40556caf457", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "36ce3b66-42e7-456e-9c82-a0f1248a4f81"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "36ce3b66-42e7-456e-9c82-a0f1248a4f81"}, "edge_type": "inherent", "type": "", "uuid": "16bfe978-895e-4a90-9d98-139a378dd3ba", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "65a35610-da87-4592-aaa4-21a7ad9d0b6f"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "36ce3b66-42e7-456e-9c82-a0f1248a4f81"}, "edge_type": "dependency", "type": "", "uuid": "1eef28e4-6267-4e8d-aa7b-bf722eb219f6", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "616158c8-4fc0-49e3-8837-006b8692b156"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "50b32559-dac6-48ea-8784-67db3b735493"}, "edge_type": "dependency", "type": "", "uuid": "c74ff722-a078-46b6-9c75-70172e0f1ab4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "65a35610-da87-4592-aaa4-21a7ad9d0b6f"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "50b32559-dac6-48ea-8784-67db3b735493"}, "edge_type": "dependency", "type": "", "uuid": "34cc14a8-7984-453b-9d7c-89522c04b60f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "d78cf0d8-481a-42c3-8f8e-822f043af74c"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "389ec275-d6b2-4396-ba31-45500367b35e"}, "edge_type": "dependency", "type": "", "uuid": "6ae03fbe-30cf-42c4-9028-7133f6e9bbf7", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "42b67d54-d7bb-4e8c-bca9-370fcbc86ca2"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "3bad7a96-99c1-41ea-a72f-3ec96fb09e62"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "1b1573d6-db4e-4cbf-881c-e05dd46d6a72"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "637ad08b-a7d2-45a5-b850-27d62bb7dcb9"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "f6fb72cc-d23a-45e0-85a1-a9ffca2e7774"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "36ce3b66-42e7-456e-9c82-a0f1248a4f81"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "41e0d71b-81f3-4a62-9c59-fc184189338d"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "50b32559-dac6-48ea-8784-67db3b735493"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "973063f2-e43b-4644-8d8c-8344a316170e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "616158c8-4fc0-49e3-8837-006b8692b156"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "66917c0d-f905-466c-a378-a093bc18b632"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "65a35610-da87-4592-aaa4-21a7ad9d0b6f"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "658fecfa_runbook", "uuid": "44a45841-2fe5-4745-9d72-9e624cb09139"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d78cf0d8-481a-42c3-8f8e-822f043af74c"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "323b3136-fe9e-4d88-b6dc-36627d25d7ca"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "389ec275-d6b2-4396-ba31-45500367b35e"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "80edfe72_runbook", "uuid": "5db5b0fd-bd65-4df4-9471-6f2af7e9228a"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "42b67d54-d7bb-4e8c-bca9-370fcbc86ca2"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "1ae5ad7c-43dd-4d72-96e7-18e257c08907"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0184b3c8-7f87-4de5-b427-ba9d0f4f4865"}], "description": "", "name": "SYS_GEN__Runbook_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "uuid": "3bad7a96-99c1-41ea-a72f-3ec96fb09e62"}, "message_list": [], "variable_list": [], "uuid": "3bc67083-2f0b-4279-b3c4-3f19647d8fc0"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "e785d331-850f-48f6-99fe-b21e18521d2e", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "AWS", "uuid": "bbb5183b-d818-4f2a-9d91-395139d050f8"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "d64363c4-99e9-49fb-9254-18266d02bfda"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "54011e2a-5805-4dbd-acf8-dd6cca9044e7"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "1e0cd235-42ba-4cc5-a53c-a9d8726c7281"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "2cfbb818-ccbe-4c2a-b716-d69b542328b7"}], "name": "SYS_GEN__Composite_DAG_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "d64363c4-99e9-49fb-9254-18266d02bfda"}, "edge_type": "inherent", "type": "", "uuid": "dffdab54-d812-4409-80ff-0ff641a89c41", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "2cfbb818-ccbe-4c2a-b716-d69b542328b7"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "54011e2a-5805-4dbd-acf8-dd6cca9044e7"}, "edge_type": "inherent", "type": "", "uuid": "a4eea768-5f84-4731-a80e-0821fb489469", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "1e0cd235-42ba-4cc5-a53c-a9d8726c7281"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "d64363c4-99e9-49fb-9254-18266d02bfda"}, "edge_type": "create_action_edge", "type": "", "uuid": "2fd0850d-1e17-4b8a-8149-bb57be63768b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "1e0cd235-42ba-4cc5-a53c-a9d8726c7281"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "1e0cd235-42ba-4cc5-a53c-a9d8726c7281"}, "edge_type": "create_action_edge", "type": "", "uuid": "420b26ac-ff79-4855-8940-6895eba3ce29", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "2cfbb818-ccbe-4c2a-b716-d69b542328b7"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "423f6cc0-3aaa-47d5-8281-65c4ba140737"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "549d9747-acdd-410f-830f-b91f99796c9d"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d64363c4-99e9-49fb-9254-18266d02bfda"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "0e03e6eb-419b-4da5-867d-08627bedf136"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "54011e2a-5805-4dbd-acf8-dd6cca9044e7"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "323b3136-fe9e-4d88-b6dc-36627d25d7ca"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "1e0cd235-42ba-4cc5-a53c-a9d8726c7281"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "1ae5ad7c-43dd-4d72-96e7-18e257c08907"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2cfbb818-ccbe-4c2a-b716-d69b542328b7"}], "description": "", "name": "SYS_GEN__Runbook_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "uuid": "423f6cc0-3aaa-47d5-8281-65c4ba140737"}, "message_list": [], "variable_list": [], "uuid": "4d6dda54-438e-4ad4-9403-c15411cee775"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "b70c8306-65d2-4f8f-b90c-398f7db4b0a6", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "AWS", "uuid": "bbb5183b-d818-4f2a-9d91-395139d050f8"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "c0d6af45-f724-4f38-b870-0f0cacc75265"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "2cc24f9c-b5db-41d0-bb01-57aea71e5ae4"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "3400cdc6-6664-466f-a42c-297a06b2d407"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "12c324e1-63e9-4d23-908d-d2846786baa1"}], "name": "SYS_GEN__Composite_DAG_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "c0d6af45-f724-4f38-b870-0f0cacc75265"}, "edge_type": "inherent", "type": "", "uuid": "a02c553e-233a-454c-9c65-70da854d5323", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "12c324e1-63e9-4d23-908d-d2846786baa1"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "2cc24f9c-b5db-41d0-bb01-57aea71e5ae4"}, "edge_type": "inherent", "type": "", "uuid": "e4e17f4f-38c6-4752-922b-34a23d58ed68", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "3400cdc6-6664-466f-a42c-297a06b2d407"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "2cc24f9c-b5db-41d0-bb01-57aea71e5ae4"}, "edge_type": "create_action_edge", "type": "", "uuid": "62ff38ee-2a1e-4e4c-8de6-afba7d0fdc69", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "12c324e1-63e9-4d23-908d-d2846786baa1"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "c0d6af45-f724-4f38-b870-0f0cacc75265"}, "edge_type": "create_action_edge", "type": "", "uuid": "998f2fad-6a1a-42c1-8007-dbb2b3b44647", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "2cc24f9c-b5db-41d0-bb01-57aea71e5ae4"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2e510d70-359b-4442-883e-696a969e1464"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "98351c95-23de-461b-a039-56eff73863ff"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c0d6af45-f724-4f38-b870-0f0cacc75265"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "7bc8b076-3ec5-49f7-9870-2824dfed4bdf"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2cc24f9c-b5db-41d0-bb01-57aea71e5ae4"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "d6b6109a-84cd-4e54-88d4-c21aac3e94d8"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3400cdc6-6664-466f-a42c-297a06b2d407"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "8bc82646-8f47-4c84-a2d2-109ecc5d81fb"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "12c324e1-63e9-4d23-908d-d2846786baa1"}], "description": "", "name": "SYS_GEN__Runbook_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "uuid": "2e510d70-359b-4442-883e-696a969e1464"}, "message_list": [], "variable_list": [], "uuid": "3af20190-d5ce-4406-ad6f-54c2fb2148fb"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "699e7723-87c4-425c-b8f3-04b4d51784b0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "AWS", "uuid": "bbb5183b-d818-4f2a-9d91-395139d050f8"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "f9e9f4d8-4562-4b65-87bd-699db8941f39"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "94152782-d204-4b01-b3d8-14f60d6ba5e8"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "ae2a3b0c-cdb9-41b5-854a-1f99c31dc8ad"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "9fd47267-5c40-41d5-a929-4e43cee97e14"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "4fc9f436-959b-402f-b48a-3ef20d440bc8"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "3811a52a-fb44-456b-81ff-2230b7df45cf"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "75cb3685-0302-45bf-896b-2f100b921a84"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "0dc186c8-8a4e-4132-967d-c5cf32ba0307"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "296b9d81-87d5-474f-bb0e-2f6e2ecf91bc"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "b4b6da94-6797-40a9-9ce1-cb30ae7e4331"}], "name": "SYS_GEN__Composite_DAG_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "f9e9f4d8-4562-4b65-87bd-699db8941f39"}, "edge_type": "inherent", "type": "", "uuid": "91c26151-fa68-4619-a1c7-bab8410c83b8", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "94152782-d204-4b01-b3d8-14f60d6ba5e8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "94152782-d204-4b01-b3d8-14f60d6ba5e8"}, "edge_type": "inherent", "type": "", "uuid": "3a9cad89-6613-4978-8e40-9069d70f6877", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "ae2a3b0c-cdb9-41b5-854a-1f99c31dc8ad"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "ae2a3b0c-cdb9-41b5-854a-1f99c31dc8ad"}, "edge_type": "inherent", "type": "", "uuid": "76bbb9df-d701-4355-bb69-f69cdaa26b9f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "0dc186c8-8a4e-4132-967d-c5cf32ba0307"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "0dc186c8-8a4e-4132-967d-c5cf32ba0307"}, "edge_type": "inherent", "type": "", "uuid": "154fa7fa-a66a-4cc0-b406-101d87b340da", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "296b9d81-87d5-474f-bb0e-2f6e2ecf91bc"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "9fd47267-5c40-41d5-a929-4e43cee97e14"}, "edge_type": "inherent", "type": "", "uuid": "4560be45-841b-4a4a-abf7-7ff8358e42c8", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "4fc9f436-959b-402f-b48a-3ef20d440bc8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "4fc9f436-959b-402f-b48a-3ef20d440bc8"}, "edge_type": "inherent", "type": "", "uuid": "e4ca41fa-de4b-4487-a859-656f1850c7f9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "3811a52a-fb44-456b-81ff-2230b7df45cf"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "75cb3685-0302-45bf-896b-2f100b921a84"}, "edge_type": "inherent", "type": "", "uuid": "dfca8ccd-b456-4c7e-ac26-96bd66a5eb9b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "b4b6da94-6797-40a9-9ce1-cb30ae7e4331"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "3811a52a-fb44-456b-81ff-2230b7df45cf"}, "edge_type": "inherent", "type": "", "uuid": "cc166906-7ae9-47f2-9837-b649f0f9fad9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "75cb3685-0302-45bf-896b-2f100b921a84"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "ae2a3b0c-cdb9-41b5-854a-1f99c31dc8ad"}, "edge_type": "create_action_edge", "type": "", "uuid": "d148fe0b-b719-4d3c-b47a-4345c7e4c956", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "75cb3685-0302-45bf-896b-2f100b921a84"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "3811a52a-fb44-456b-81ff-2230b7df45cf"}, "edge_type": "create_action_edge", "type": "", "uuid": "206b1b1e-c1e7-4126-8104-6e929b6431d7", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "0dc186c8-8a4e-4132-967d-c5cf32ba0307"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "4fc9f436-959b-402f-b48a-3ef20d440bc8"}, "edge_type": "create_action_edge", "type": "", "uuid": "4b30f71d-df21-45ba-9db5-3ef7c0c5c6e9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "0dc186c8-8a4e-4132-967d-c5cf32ba0307"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "94152782-d204-4b01-b3d8-14f60d6ba5e8"}, "edge_type": "create_action_edge", "type": "", "uuid": "20d763f5-1b57-458d-b6d0-987065a2684e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "9fd47267-5c40-41d5-a929-4e43cee97e14"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "7f52353f-20d3-4d96-a7c3-995823d6f7b4"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "98351c95-23de-461b-a039-56eff73863ff"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f9e9f4d8-4562-4b65-87bd-699db8941f39"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c9c07e72_runbook", "uuid": "c6b6049c-a941-4706-95f0-0e57a4d200c0"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "94152782-d204-4b01-b3d8-14f60d6ba5e8"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "01f3c580-c8cd-4550-af84-53c250a7730f"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ae2a3b0c-cdb9-41b5-854a-1f99c31dc8ad"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "7bc8b076-3ec5-49f7-9870-2824dfed4bdf"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9fd47267-5c40-41d5-a929-4e43cee97e14"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4356ce2d_runbook", "uuid": "b8160369-b912-4636-ab61-00f51887a5c4"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4fc9f436-959b-402f-b48a-3ef20d440bc8"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "d2e0d2c4-a754-46a3-a747-3b4a2b566b24"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3811a52a-fb44-456b-81ff-2230b7df45cf"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "115d9cb2-8283-4823-8b06-da85e645875b"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "75cb3685-0302-45bf-896b-2f100b921a84"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "fa438597-e3a8-4d0d-a386-2759eed6dd75"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0dc186c8-8a4e-4132-967d-c5cf32ba0307"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "296b9d81-87d5-474f-bb0e-2f6e2ecf91bc"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "b4b6da94-6797-40a9-9ce1-cb30ae7e4331"}], "description": "", "name": "SYS_GEN__Runbook_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "uuid": "7f52353f-20d3-4d96-a7c3-995823d6f7b4"}, "message_list": [], "variable_list": [], "uuid": "ea85f285-521c-442a-a53b-f82094bffef8"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "1b9f6b04-0d64-4aeb-908f-a0e5e21479cd", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "AWS", "uuid": "bbb5183b-d818-4f2a-9d91-395139d050f8"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "a42a64f5-8c70-47c8-86f4-497f61099e33"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "e2186135-8ac9-4687-9cf9-4d7780fb5cae"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "9d1218d2-0974-4521-b2a6-b214badac347"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "18ed3f5d-e584-4fba-b26b-aedd11a3bc69"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "671d2378-2a7e-4cce-8157-6dd24ac0a9de"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "3001bfae-6df6-420e-b735-252edbfabb2b"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "11e17d67-b0fc-4451-b521-7cbcdea38cc7"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "e6fec185-49b4-456a-bfc7-b1f0d47ca23c"}], "name": "SYS_GEN__Composite_DAG_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "a42a64f5-8c70-47c8-86f4-497f61099e33"}, "edge_type": "inherent", "type": "", "uuid": "a9a66c69-41b2-41d5-9f53-572640521939", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "e2186135-8ac9-4687-9cf9-4d7780fb5cae"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "e2186135-8ac9-4687-9cf9-4d7780fb5cae"}, "edge_type": "inherent", "type": "", "uuid": "e295465f-268c-4b44-b91a-030ca44c1527", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "3001bfae-6df6-420e-b735-252edbfabb2b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "3001bfae-6df6-420e-b735-252edbfabb2b"}, "edge_type": "inherent", "type": "", "uuid": "72541695-6294-4e0b-adf5-abf9989be7e3", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "uuid": "11e17d67-b0fc-4451-b521-7cbcdea38cc7"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "9d1218d2-0974-4521-b2a6-b214badac347"}, "edge_type": "inherent", "type": "", "uuid": "f20ad515-d34b-4c68-87ab-f79464f438eb", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "18ed3f5d-e584-4fba-b26b-aedd11a3bc69"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "671d2378-2a7e-4cce-8157-6dd24ac0a9de"}, "edge_type": "inherent", "type": "", "uuid": "08b442fa-09fd-487a-b109-249b5b4af76a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "uuid": "e6fec185-49b4-456a-bfc7-b1f0d47ca23c"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "18ed3f5d-e584-4fba-b26b-aedd11a3bc69"}, "edge_type": "inherent", "type": "", "uuid": "84b52de5-c87e-4006-8242-9937ae35c16c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "671d2378-2a7e-4cce-8157-6dd24ac0a9de"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "e2186135-8ac9-4687-9cf9-4d7780fb5cae"}, "edge_type": "create_action_edge", "type": "", "uuid": "c5f4f739-58f4-474a-850f-178374b4af4d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "671d2378-2a7e-4cce-8157-6dd24ac0a9de"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "18ed3f5d-e584-4fba-b26b-aedd11a3bc69"}, "edge_type": "create_action_edge", "type": "", "uuid": "d8cf0169-7332-4114-b63c-5ce7419cbc23", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "3001bfae-6df6-420e-b735-252edbfabb2b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "9d1218d2-0974-4521-b2a6-b214badac347"}, "edge_type": "create_action_edge", "type": "", "uuid": "04c2f188-6c35-4163-b44c-689a2b699cf9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "3001bfae-6df6-420e-b735-252edbfabb2b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "a42a64f5-8c70-47c8-86f4-497f61099e33"}, "edge_type": "create_action_edge", "type": "", "uuid": "d463c647-e7f0-4102-a69d-f6f3f810b6f3", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "9d1218d2-0974-4521-b2a6-b214badac347"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "5def6713-252f-44d8-825a-b11972357b79"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3c8f0554_runbook", "uuid": "a65bbc0d-9f55-4fe3-a7a3-5a450ff3bb76"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a42a64f5-8c70-47c8-86f4-497f61099e33"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "e2186135-8ac9-4687-9cf9-4d7780fb5cae"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "25b466fc_runbook", "uuid": "2d7bcea2-b7c3-427c-8b3d-74c1d7269099"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9d1218d2-0974-4521-b2a6-b214badac347"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "18ed3f5d-e584-4fba-b26b-aedd11a3bc69"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "05181c37-ce47-4ff1-a5fe-92d668a12c4e"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_05181c37_ce47_4ff1_a5fe_92d668a12c4e", "uuid": "5453f5d0-bfda-4793-8906-f4545818a03c"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "671d2378-2a7e-4cce-8157-6dd24ac0a9de"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "2272d30f-e879-46c8-b76e-f48e80122244"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_2272d30f_e879_46c8_b76e_f48e80122244", "uuid": "e9f28a55-c545-407d-965d-5fc75a127b55"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3001bfae-6df6-420e-b735-252edbfabb2b"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "a516b0f0-0678-4e6f-819f-526b3cc314ad"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_a516b0f0_0678_4e6f_819f_526b3cc314ad", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "11e17d67-b0fc-4451-b521-7cbcdea38cc7"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "07252613-7f6f-4047-97fe-363dd8a7fcdb"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_07252613_7f6f_4047_97fe_363dd8a7fcdb", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "e6fec185-49b4-456a-bfc7-b1f0d47ca23c"}], "description": "", "name": "SYS_GEN__Runbook_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_bbb5183b_d818_4f2a_9d91_395139d050f8", "uuid": "5def6713-252f-44d8-825a-b11972357b79"}, "message_list": [], "variable_list": [], "uuid": "c93f2a8b-1ebf-4154-b7ea-f4f83ff53aea"}, "message_list": [], "name": "action_soft_delete"}], "name": "AWS", "state": "ACTIVE", "message_list": [], "dependency_list": [{"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SM", "action_name": "action_create", "action_resource_name": "AWS", "getter_resource_name": "K8SCP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "AWS", "getter_resource_name": "K8SCP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SM", "action_name": "action_create", "action_resource_name": "AWS", "getter_resource_name": "K8SMP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "AWS", "getter_resource_name": "K8SMP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "ServiceCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "AWS", "getter_resource_name": "Kubernetes_Minion", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "ServiceCfg", "setter_resource_attr": "COMPLETE", "setter_resource_kind": "ServiceCfg", "setter_resource_name": "Kubernetes_Minion", "action_name": "action_create", "action_resource_name": "AWS", "getter_resource_name": "Kubernetes_Master", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "ServiceCfg", "setter_resource_attr": "COMPLETE", "setter_resource_kind": "ServiceCfg", "setter_resource_name": "Kubernetes_Minion", "action_name": "action_start", "action_resource_name": "AWS", "getter_resource_name": "Kubernetes_Master", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "d584b567_deployment", "getter_resource_name": "K8SCP", "action_resource_kind": "DeploymentCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SM", "action_name": "action_create", "action_resource_name": "ff8e191c_deployment", "getter_resource_name": "K8SMP", "action_resource_kind": "DeploymentCfg"}], "variable_list": [{"val_type": "STRING", "description": "", "name": "KUBERNETES_VERSION", "type": "LOCAL", "value": "v1.7.7", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {}, "message_list": [], "uuid": "686b567e-4536-42ee-a2b7-c8f49fd8fcab"}, {"val_type": "STRING", "description": "", "name": "CLUSTER_SUBNET", "type": "LOCAL", "value": "10.200.0.0/16", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "30e9973d-ac6c-4a8d-9c06-673f5d50a346"}, {"val_type": "STRING", "description": "", "name": "SERVICE_SUBNET", "type": "LOCAL", "value": "10.32.0.0/24", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "4befddd2-a2a4-4105-8754-b4ac10c4731e"}, {"val_type": "STRING", "description": "", "name": "KUBE_CLUSTER_DNS", "type": "LOCAL", "value": "10.32.0.10", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "8cac8f34-a1bc-415c-8c15-dfb5930c3889"}], "uuid": "bbb5183b-d818-4f2a-9d91-395139d050f8"}], "default_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}, "package_definition_list": [{"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "cc596fae-1faf-4e35-9053-dbffcb3b0b21", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Install_Crb_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "cf200ed8-cc18-4e24-bd4f-718febbe7363"}], "name": "SYS_GEN__DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "9ee0c490-e62a-4376-8b11-2512afdb5e51"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Install_Crb_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "752b2fc8-179a-475e-9191-c8a3f0c3147d"}], "name": "eaae934f_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "6bf0c5a4-c4f3-42fe-9f38-e01638ac1e43"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "752b2fc8-179a-475e-9191-c8a3f0c3147d"}], "description": "", "name": "250a0dd1_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag", "uuid": "6bf0c5a4-c4f3-42fe-9f38-e01638ac1e43"}, "message_list": [], "variable_list": [], "uuid": "c35c196d-5b16-4ef7-8e34-eefe277f2717"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "e4b3c07a-77c4-4124-91f9-c52d45770a40"}], "name": "cfa35d5b_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "0a18b430-45c8-418e-a4fe-e0fc0baea8d7"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "e4b3c07a-77c4-4124-91f9-c52d45770a40"}], "description": "", "name": "6f5a2b1c_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag", "uuid": "0a18b430-45c8-418e-a4fe-e0fc0baea8d7"}, "message_list": [], "variable_list": [], "uuid": "108252e2-7f20-48b0-a885-bbedb54c4a61"}}, "timeout_secs": "", "type": "CUSTOM_PACKAGE_INSTALL", "variable_list": [], "uuid": "cf200ed8-cc18-4e24-bd4f-718febbe7363"}], "description": "", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "9ee0c490-e62a-4376-8b11-2512afdb5e51"}, "message_list": [], "variable_list": [], "uuid": "973063f2-e43b-4644-8d8c-8344a316170e"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "bc6d0fd0-c8db-4c79-b9ec-6f16daac4477", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "b023467b-f49a-4979-a738-7b0903d518ab"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "794ba188-5a53-4cfa-b6e4-c2147e9b1fb1"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "89f51217-c1e3-4e0f-9f05-138392feeae5"}], "name": "SYS_GEN__Composite_DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "794ba188-5a53-4cfa-b6e4-c2147e9b1fb1"}, "edge_type": "inherent", "type": "", "uuid": "96ab3a6e-88a0-4a3e-bbe8-ba203f9fdf16", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "89f51217-c1e3-4e0f-9f05-138392feeae5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "b023467b-f49a-4979-a738-7b0903d518ab"}, "edge_type": "inherent", "type": "", "uuid": "9b1f3832-91a0-4f2b-aed9-97587e143572", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "794ba188-5a53-4cfa-b6e4-c2147e9b1fb1"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "beffe550-ef8f-41ad-b1d1-1f2b9da8de4e"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "973063f2-e43b-4644-8d8c-8344a316170e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b023467b-f49a-4979-a738-7b0903d518ab"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "80edfe72_runbook", "uuid": "5db5b0fd-bd65-4df4-9471-6f2af7e9228a"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "794ba188-5a53-4cfa-b6e4-c2147e9b1fb1"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "1ae5ad7c-43dd-4d72-96e7-18e257c08907"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "89f51217-c1e3-4e0f-9f05-138392feeae5"}], "description": "", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "beffe550-ef8f-41ad-b1d1-1f2b9da8de4e"}, "message_list": [], "variable_list": [], "uuid": "ff280aac-ba80-4469-9a4b-2dbd246f5ca3"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "24d61ba7-68d2-4d20-8540-54b0608dfe50", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Uninstall_Crb_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "a6162ebf-44c4-4e84-a6a9-b3ae56b622dd"}], "name": "SYS_GEN__DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "9a7f5149-0950-4bcd-83aa-3ca318e3e41d"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Uninstall_Crb_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "752b2fc8-179a-475e-9191-c8a3f0c3147d"}], "name": "eaae934f_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "6bf0c5a4-c4f3-42fe-9f38-e01638ac1e43"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "752b2fc8-179a-475e-9191-c8a3f0c3147d"}], "description": "", "name": "250a0dd1_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag", "uuid": "6bf0c5a4-c4f3-42fe-9f38-e01638ac1e43"}, "message_list": [], "variable_list": [], "uuid": "c35c196d-5b16-4ef7-8e34-eefe277f2717"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "e4b3c07a-77c4-4124-91f9-c52d45770a40"}], "name": "cfa35d5b_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "0a18b430-45c8-418e-a4fe-e0fc0baea8d7"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "e4b3c07a-77c4-4124-91f9-c52d45770a40"}], "description": "", "name": "6f5a2b1c_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag", "uuid": "0a18b430-45c8-418e-a4fe-e0fc0baea8d7"}, "message_list": [], "variable_list": [], "uuid": "108252e2-7f20-48b0-a885-bbedb54c4a61"}}, "timeout_secs": "", "type": "CUSTOM_PACKAGE_UNINSTALL", "variable_list": [], "uuid": "a6162ebf-44c4-4e84-a6a9-b3ae56b622dd"}], "description": "", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "9a7f5149-0950-4bcd-83aa-3ca318e3e41d"}, "message_list": [], "variable_list": [], "uuid": "01f3c580-c8cd-4550-af84-53c250a7730f"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "ee8b9a30-5654-4cac-a82e-35619a517800", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "9449ade9-1790-4b82-835f-e60f7ef2bf22"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "be5a712f-fd91-4f26-ba6a-fb674fbf5635"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "ba84e0e0-31e0-4ed8-81b7-26f494652bea"}], "name": "SYS_GEN__Composite_DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "9449ade9-1790-4b82-835f-e60f7ef2bf22"}, "edge_type": "inherent", "type": "", "uuid": "a48867ad-bc78-4131-b4eb-15be8385be93", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "be5a712f-fd91-4f26-ba6a-fb674fbf5635"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "be5a712f-fd91-4f26-ba6a-fb674fbf5635"}, "edge_type": "inherent", "type": "", "uuid": "640bcc1c-c931-4810-a78c-20575a4ac08d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "ba84e0e0-31e0-4ed8-81b7-26f494652bea"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "c1e42479-fc56-4880-a06b-24c443108411"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "98351c95-23de-461b-a039-56eff73863ff"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9449ade9-1790-4b82-835f-e60f7ef2bf22"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c9c07e72_runbook", "uuid": "c6b6049c-a941-4706-95f0-0e57a4d200c0"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "be5a712f-fd91-4f26-ba6a-fb674fbf5635"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "01f3c580-c8cd-4550-af84-53c250a7730f"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ba84e0e0-31e0-4ed8-81b7-26f494652bea"}], "description": "", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "c1e42479-fc56-4880-a06b-24c443108411"}, "message_list": [], "variable_list": [], "uuid": "14349d53-2624-4f02-82f1-5cc2ad0559d1"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "ce0799e7-1397-4c3a-b36f-34b0c15b14fd", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "e3faee05-8b12-4ac3-a023-e2609163ff65"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "f43ed593-f8eb-46d1-8296-ab6ca2120d76"}], "name": "SYS_GEN__Composite_DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "e3faee05-8b12-4ac3-a023-e2609163ff65"}, "edge_type": "inherent", "type": "", "uuid": "a950e208-838c-4055-bf13-0fba07c2f12d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "f43ed593-f8eb-46d1-8296-ab6ca2120d76"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "37fe41e3-6db8-499c-b6c8-3e57c882b241"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3c8f0554_runbook", "uuid": "a65bbc0d-9f55-4fe3-a7a3-5a450ff3bb76"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e3faee05-8b12-4ac3-a023-e2609163ff65"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "f43ed593-f8eb-46d1-8296-ab6ca2120d76"}], "description": "", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "37fe41e3-6db8-499c-b6c8-3e57c882b241"}, "message_list": [], "variable_list": [], "uuid": "c7e600b2-f0df-4ef7-b998-2bad1f948a62"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "6560508e-cee6-4639-8d27-3f5ff57e1a4d", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "8656ac12-920a-418c-a0b3-447ee76c1375"}], "name": "SYS_GEN__Composite_DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "e0d0227d-08fc-4e47-9e94-3e7b4672b424"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "1ae5ad7c-43dd-4d72-96e7-18e257c08907"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8656ac12-920a-418c-a0b3-447ee76c1375"}], "description": "", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "e0d0227d-08fc-4e47-9e94-3e7b4672b424"}, "message_list": [], "variable_list": [], "uuid": "f958b924-0366-44a0-b828-c80be2b38164"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "b4c32371-21d0-4afa-95b5-4691d5b211d3", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "uuid": "0ba4d58f-4b76-4f4f-81ae-9dd55f3c248c"}], "name": "SYS_GEN__Composite_DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "608e4c01-c05c-45e9-8591-c8d2b07a5116"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_43d0dc08_9cc8_4a48_9c34_35c5f08e4381", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "98351c95-23de-461b-a039-56eff73863ff"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0ba4d58f-4b76-4f4f-81ae-9dd55f3c248c"}], "description": "", "name": "SYS_GEN__Runbook_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_e21489e6_5616_4eee_bf7d_e57762c9a9e5", "uuid": "608e4c01-c05c-45e9-8591-c8d2b07a5116"}, "message_list": [], "variable_list": [], "uuid": "9343dfdd-cf02-4f3d-9f43-84d10252ec9e"}, "message_list": [], "name": "action_stop"}], "type": "DEB", "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Master", "uuid": "43d0dc08-9cc8-4a48-9c34-35c5f08e4381"}], "name": "K8SCP", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "752b2fc8-179a-475e-9191-c8a3f0c3147d"}], "name": "eaae934f_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "6bf0c5a4-c4f3-42fe-9f38-e01638ac1e43"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "752b2fc8-179a-475e-9191-c8a3f0c3147d"}], "description": "", "name": "250a0dd1_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag", "uuid": "6bf0c5a4-c4f3-42fe-9f38-e01638ac1e43"}, "message_list": [], "variable_list": [], "uuid": "c35c196d-5b16-4ef7-8e34-eefe277f2717"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "e4b3c07a-77c4-4124-91f9-c52d45770a40"}], "name": "cfa35d5b_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "0a18b430-45c8-418e-a4fe-e0fc0baea8d7"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "e4b3c07a-77c4-4124-91f9-c52d45770a40"}], "description": "", "name": "6f5a2b1c_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag", "uuid": "0a18b430-45c8-418e-a4fe-e0fc0baea8d7"}, "message_list": [], "variable_list": [], "uuid": "108252e2-7f20-48b0-a885-bbedb54c4a61"}}, "variable_list": [], "uuid": "e21489e6-5616-4eee-bf7d-e57762c9a9e5"}, {"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "3e2291f8-ace3-4680-801f-214e68e7049a", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Install_Crb_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "07e9c3e0-a899-4f04-b290-0e3206660a74"}], "name": "SYS_GEN__DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "0ec90cd4-43b0-4583-8131-64df098dc3cd"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Install_Crb_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "0b20a9dc-cb9a-4c48-9ddf-f43e31ab1f0d"}], "name": "f9943e3a_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "bdc3b26c-1e36-4812-8edb-da8d3cefb95b"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "0b20a9dc-cb9a-4c48-9ddf-f43e31ab1f0d"}], "description": "", "name": "e6dd38ad_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag", "uuid": "bdc3b26c-1e36-4812-8edb-da8d3cefb95b"}, "message_list": [], "variable_list": [], "uuid": "1c6a6829-2b54-4699-a347-4203130a1789"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "071df3b4-2e2a-400b-9900-5779e327314a"}], "name": "f5f5341c_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "9c24bb72-c5c1-4792-854e-8ddab2388443"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "071df3b4-2e2a-400b-9900-5779e327314a"}], "description": "", "name": "7f8d209b_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag", "uuid": "9c24bb72-c5c1-4792-854e-8ddab2388443"}, "message_list": [], "variable_list": [], "uuid": "9784b521-0978-49ac-bb6a-380535141114"}}, "timeout_secs": "", "type": "CUSTOM_PACKAGE_INSTALL", "variable_list": [], "uuid": "07e9c3e0-a899-4f04-b290-0e3206660a74"}], "description": "", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "0ec90cd4-43b0-4583-8131-64df098dc3cd"}, "message_list": [], "variable_list": [], "uuid": "66917c0d-f905-466c-a378-a093bc18b632"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "ea883847-064b-4582-84a0-d8b57d51e1d0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "dac3cc2c-78ab-48b8-a530-53a087b9c2f1"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "c70a4b9b-c6ab-4dc5-abdd-d697db4a104e"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "edbfbaac-297b-491f-97d1-c58c0705d680"}], "name": "SYS_GEN__Composite_DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "c70a4b9b-c6ab-4dc5-abdd-d697db4a104e"}, "edge_type": "inherent", "type": "", "uuid": "c2514db2-102d-4f4c-9901-89f17641b055", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "edbfbaac-297b-491f-97d1-c58c0705d680"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "dac3cc2c-78ab-48b8-a530-53a087b9c2f1"}, "edge_type": "inherent", "type": "", "uuid": "620b8ded-b440-4035-bda9-7048cab2e521", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "c70a4b9b-c6ab-4dc5-abdd-d697db4a104e"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "7b340d8f-5fdf-4a67-821c-b0404631e212"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "66917c0d-f905-466c-a378-a093bc18b632"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "dac3cc2c-78ab-48b8-a530-53a087b9c2f1"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "658fecfa_runbook", "uuid": "44a45841-2fe5-4745-9d72-9e624cb09139"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c70a4b9b-c6ab-4dc5-abdd-d697db4a104e"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "323b3136-fe9e-4d88-b6dc-36627d25d7ca"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "edbfbaac-297b-491f-97d1-c58c0705d680"}], "description": "", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "7b340d8f-5fdf-4a67-821c-b0404631e212"}, "message_list": [], "variable_list": [], "uuid": "a05cb3f5-7820-488b-8c94-313348510183"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "e134696f-a78e-474d-baad-60d60b58c008", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Uninstall_Crb_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "1ed4e756-eee8-4ee3-9306-9ba9375a488d"}], "name": "SYS_GEN__DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "95151ae1-075d-4099-b7a1-94ac2e6b62ab"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Uninstall_Crb_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "0b20a9dc-cb9a-4c48-9ddf-f43e31ab1f0d"}], "name": "f9943e3a_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "bdc3b26c-1e36-4812-8edb-da8d3cefb95b"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "0b20a9dc-cb9a-4c48-9ddf-f43e31ab1f0d"}], "description": "", "name": "e6dd38ad_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag", "uuid": "bdc3b26c-1e36-4812-8edb-da8d3cefb95b"}, "message_list": [], "variable_list": [], "uuid": "1c6a6829-2b54-4699-a347-4203130a1789"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "071df3b4-2e2a-400b-9900-5779e327314a"}], "name": "f5f5341c_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "9c24bb72-c5c1-4792-854e-8ddab2388443"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "071df3b4-2e2a-400b-9900-5779e327314a"}], "description": "", "name": "7f8d209b_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag", "uuid": "9c24bb72-c5c1-4792-854e-8ddab2388443"}, "message_list": [], "variable_list": [], "uuid": "9784b521-0978-49ac-bb6a-380535141114"}}, "timeout_secs": "", "type": "CUSTOM_PACKAGE_UNINSTALL", "variable_list": [], "uuid": "1ed4e756-eee8-4ee3-9306-9ba9375a488d"}], "description": "", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "95151ae1-075d-4099-b7a1-94ac2e6b62ab"}, "message_list": [], "variable_list": [], "uuid": "d2e0d2c4-a754-46a3-a747-3b4a2b566b24"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "f2941686-91d8-4259-9f5d-2273b00ddce0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "bc477f5b-34a7-447d-b157-7bab4b5a1b4e"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "1924ae65-c920-48ff-8b33-1ca5a5ee3203"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "01dc211e-3097-425c-8126-e42bcdc04a45"}], "name": "SYS_GEN__Composite_DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "bc477f5b-34a7-447d-b157-7bab4b5a1b4e"}, "edge_type": "inherent", "type": "", "uuid": "39066a02-21dd-438d-934d-ea42bf3bde5a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "1924ae65-c920-48ff-8b33-1ca5a5ee3203"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "1924ae65-c920-48ff-8b33-1ca5a5ee3203"}, "edge_type": "inherent", "type": "", "uuid": "83c19093-f2d4-4c58-9cd9-cbe974899a9d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "01dc211e-3097-425c-8126-e42bcdc04a45"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "c61e4a1e-8f67-457e-9a5d-d0ab5325a93c"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "7bc8b076-3ec5-49f7-9870-2824dfed4bdf"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "bc477f5b-34a7-447d-b157-7bab4b5a1b4e"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4356ce2d_runbook", "uuid": "b8160369-b912-4636-ab61-00f51887a5c4"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "1924ae65-c920-48ff-8b33-1ca5a5ee3203"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "d2e0d2c4-a754-46a3-a747-3b4a2b566b24"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "01dc211e-3097-425c-8126-e42bcdc04a45"}], "description": "", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "c61e4a1e-8f67-457e-9a5d-d0ab5325a93c"}, "message_list": [], "variable_list": [], "uuid": "053a37aa-3ea2-4086-815d-b0c0196d488d"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "f9f515b9-58b7-4ed5-996c-4fba34d40dfe", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "04b5fac0-cb7d-4b83-abf2-05f445a2f939"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "1e72a61d-cc8d-4dab-b706-5ec70592277f"}], "name": "SYS_GEN__Composite_DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "04b5fac0-cb7d-4b83-abf2-05f445a2f939"}, "edge_type": "inherent", "type": "", "uuid": "4f2325b2-cb5b-4213-8b8b-efc35ce1a801", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "1e72a61d-cc8d-4dab-b706-5ec70592277f"}}], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "ab31d614-7eb4-45ff-957a-90634447107e"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "25b466fc_runbook", "uuid": "2d7bcea2-b7c3-427c-8b3d-74c1d7269099"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "04b5fac0-cb7d-4b83-abf2-05f445a2f939"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "1e72a61d-cc8d-4dab-b706-5ec70592277f"}], "description": "", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "ab31d614-7eb4-45ff-957a-90634447107e"}, "message_list": [], "variable_list": [], "uuid": "69d118ba-e760-429e-aaf9-7eee335635e9"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "955a2458-836e-46cb-9ca0-d0b3880aab0d", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "7a0f906c-ac20-4a3c-b8a0-ca2a36703ffd"}], "name": "SYS_GEN__Composite_DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "85b9c506-9697-43e6-8d30-cc43b64bf455"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "323b3136-fe9e-4d88-b6dc-36627d25d7ca"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7a0f906c-ac20-4a3c-b8a0-ca2a36703ffd"}], "description": "", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "85b9c506-9697-43e6-8d30-cc43b64bf455"}, "message_list": [], "variable_list": [], "uuid": "42fb5b10-27f8-45bb-90ec-f983331a0bdd"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "27ac23b5-d0b6-48af-88a2-eb250b309d20", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "uuid": "676348f5-759d-4693-aa15-3253043ec847"}], "name": "SYS_GEN__Composite_DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "480080d3-6ceb-4deb-af6c-da20dd80cf09"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_049fdde9_1393_4d22_bc5a_3f472aaee3ff", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "7bc8b076-3ec5-49f7-9870-2824dfed4bdf"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "676348f5-759d-4693-aa15-3253043ec847"}], "description": "", "name": "SYS_GEN__Runbook_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_45c75ee5_c4c5_4d40_85da_d63bb8f490da", "uuid": "480080d3-6ceb-4deb-af6c-da20dd80cf09"}, "message_list": [], "variable_list": [], "uuid": "599474fe-bd06-4dd6-9449-dd9d30bca3e8"}, "message_list": [], "name": "action_stop"}], "type": "DEB", "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "049fdde9-1393-4d22-bc5a-3f472aaee3ff"}], "name": "K8SMP", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "0b20a9dc-cb9a-4c48-9ddf-f43e31ab1f0d"}], "name": "f9943e3a_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "bdc3b26c-1e36-4812-8edb-da8d3cefb95b"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "0b20a9dc-cb9a-4c48-9ddf-f43e31ab1f0d"}], "description": "", "name": "e6dd38ad_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag", "uuid": "bdc3b26c-1e36-4812-8edb-da8d3cefb95b"}, "message_list": [], "variable_list": [], "uuid": "1c6a6829-2b54-4699-a347-4203130a1789"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "071df3b4-2e2a-400b-9900-5779e327314a"}], "name": "f5f5341c_dag", "state": "ACTIVE", "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "9c24bb72-c5c1-4792-854e-8ddab2388443"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "ACTIVE", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "794c2ade-3e00-457e-8513-6e1b02360942"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "uuid": "071df3b4-2e2a-400b-9900-5779e327314a"}], "description": "", "name": "7f8d209b_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag", "uuid": "9c24bb72-c5c1-4792-854e-8ddab2388443"}, "message_list": [], "variable_list": [], "uuid": "9784b521-0978-49ac-bb6a-380535141114"}}, "variable_list": [], "uuid": "45c75ee5-c4c5-4d40-85da-d63bb8f490da"}, {"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "8e02658e-1d73-44a4-9eda-b94c6332ef3f", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Image Fetch task for VM", "uuid": "b1a666d4-645e-4187-b15c-f8f61416f7fc"}], "name": "SYS_GEN__DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "854ac005-034c-4827-93e0-7fc95e74e033"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Image Fetch task for VM", "state": "ACTIVE", "attrs": {"type": "", "name": "CENTOS-7.4-Controller", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "timeout_secs": "", "type": "SUBSTRATE_IMAGE_FETCH", "variable_list": [], "uuid": "b1a666d4-645e-4187-b15c-f8f61416f7fc"}], "description": "", "name": "SYS_GEN__Runbook_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "854ac005-034c-4827-93e0-7fc95e74e033"}, "message_list": [], "variable_list": [], "uuid": "57b85c52-e587-41c4-8d9f-95bca6104b5e"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "86b144ec-c53c-4a38-959b-bf862ed6eaae", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "03f1d28c-a7fc-41a8-a8af-66c125b292ac"}], "name": "SYS_GEN__Composite_DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "0e7e3115-8efe-49aa-94aa-2261b4f644c4"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "57b85c52-e587-41c4-8d9f-95bca6104b5e"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "03f1d28c-a7fc-41a8-a8af-66c125b292ac"}], "description": "", "name": "SYS_GEN__Runbook_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "0e7e3115-8efe-49aa-94aa-2261b4f644c4"}, "message_list": [], "variable_list": [], "uuid": "9021d3f4-d22b-4afa-a5bb-1a024b56125d"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "db163fed-e2c7-4953-97c8-9748bdb221a7", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "8ef7a2d4-0b43-466b-b10d-f35bf908d762"}], "description": "", "name": "SYS_GEN__Runbook_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "8ef7a2d4-0b43-466b-b10d-f35bf908d762"}, "message_list": [], "variable_list": [], "uuid": "dd07a645-e699-4b50-b8f2-d2b67ba02267"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "ca7fea78-31c7-4f60-8f16-2d14b9a97f7c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "7cdd7541-1e0b-4d6a-ac91-a9d592200c0e"}], "name": "SYS_GEN__Composite_DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "4540688e-ea2e-4bab-8071-0fd9fbcbf8cb"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "dd07a645-e699-4b50-b8f2-d2b67ba02267"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7cdd7541-1e0b-4d6a-ac91-a9d592200c0e"}], "description": "", "name": "SYS_GEN__Runbook_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "4540688e-ea2e-4bab-8071-0fd9fbcbf8cb"}, "message_list": [], "variable_list": [], "uuid": "b5425309-aaeb-4ab8-8b42-3827e4afa1bd"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "a025ae40-5865-4bef-97cf-847d015f6199", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "d2df209d-3890-4a4e-8d92-7bc280f6481b"}], "name": "SYS_GEN__Composite_DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "2f8edb25-a62d-4f7c-9c42-cd95d36d9064"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "d2df209d-3890-4a4e-8d92-7bc280f6481b"}], "description": "", "name": "SYS_GEN__Runbook_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "2f8edb25-a62d-4f7c-9c42-cd95d36d9064"}, "message_list": [], "variable_list": [], "uuid": "78ad407b-c38c-4b38-8dbe-4c919fb46374"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "7461247a-7a8a-474f-a15c-e02a20dbf7a1", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "dd16770d-9a23-476b-a240-43fb5db41953"}], "description": "", "name": "SYS_GEN__Runbook_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "dd16770d-9a23-476b-a240-43fb5db41953"}, "message_list": [], "variable_list": [], "uuid": "935567c9-e629-4fe2-adb7-920954c9ca31"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "e9857b5f-3256-416a-8892-bad7eddb699b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "0977e951-8a35-412f-9ab9-6f875ba28e91"}], "description": "", "name": "SYS_GEN__Runbook_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_3d8388cc_c458_4bbe_89bf_016cd24cd3ae", "uuid": "0977e951-8a35-412f-9ab9-6f875ba28e91"}, "message_list": [], "variable_list": [], "uuid": "f0522729-fb43-436e-9ffa-ebbacdb2c161"}, "message_list": [], "name": "action_stop"}], "type": "SUBSTRATE_IMAGE", "service_local_reference_list": [], "name": "CENTOS_IMAGE_CONTROLLER", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"type": "", "name": "CENTOS-7.4-Controller", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "uuid": "3d8388cc-c458-4bbe-89bf-016cd24cd3ae"}, {"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "40017531-7e05-4e1d-9e03-a827197f53ac", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Image Fetch task for VM", "uuid": "f760cbb7-4343-444b-9432-880924c7e742"}], "name": "SYS_GEN__DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "fb7262c6-dd70-4d2f-a85f-291385f110f2"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Image Fetch task for VM", "state": "ACTIVE", "attrs": {"type": "", "name": "CENTOS-7.4-Minion", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "timeout_secs": "", "type": "SUBSTRATE_IMAGE_FETCH", "variable_list": [], "uuid": "f760cbb7-4343-444b-9432-880924c7e742"}], "description": "", "name": "SYS_GEN__Runbook_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "fb7262c6-dd70-4d2f-a85f-291385f110f2"}, "message_list": [], "variable_list": [], "uuid": "3119a1f9-29b0-4907-9926-674e482467b2"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "3caaa491-1ded-4f36-9d33-55107aa8f85d", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "e6304f8c-60ee-4de7-a83d-aabc7a144f0f"}], "name": "SYS_GEN__Composite_DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "84ea1f91-2cd6-4c84-8067-b66e54551ae3"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "3119a1f9-29b0-4907-9926-674e482467b2"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e6304f8c-60ee-4de7-a83d-aabc7a144f0f"}], "description": "", "name": "SYS_GEN__Runbook_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "84ea1f91-2cd6-4c84-8067-b66e54551ae3"}, "message_list": [], "variable_list": [], "uuid": "d7b92d3b-8aea-447c-bdde-6fb96df0da82"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "12bf571f-e1bb-42d9-959c-ee2b53512bb6", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "c4f4341c-1fe7-4c45-a128-567aa9f99ec4"}], "description": "", "name": "SYS_GEN__Runbook_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "c4f4341c-1fe7-4c45-a128-567aa9f99ec4"}, "message_list": [], "variable_list": [], "uuid": "03cc71eb-d011-4410-954b-07e97ff81862"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "a95aeb03-9d5b-4d22-ac60-e14ae30175e3", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "ab6de787-45e1-4383-a0fb-b2a4325a4b86"}], "name": "SYS_GEN__Composite_DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "002c48a2-d19c-4af4-88b7-ced534df75cd"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "03cc71eb-d011-4410-954b-07e97ff81862"}}, "timeout_secs": "", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ab6de787-45e1-4383-a0fb-b2a4325a4b86"}], "description": "", "name": "SYS_GEN__Runbook_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "002c48a2-d19c-4af4-88b7-ced534df75cd"}, "message_list": [], "variable_list": [], "uuid": "daef50c9-1f23-4354-b20f-62e66da66d40"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "2e521795-d86b-40c5-ae79-b654b3a523a6", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "f1d56003-5df5-4b15-8854-e39d89d4decb"}], "name": "SYS_GEN__Composite_DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "a72daee4-0ed9-4882-919b-4ed52aab9e26"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "f1d56003-5df5-4b15-8854-e39d89d4decb"}], "description": "", "name": "SYS_GEN__Runbook_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "a72daee4-0ed9-4882-919b-4ed52aab9e26"}, "message_list": [], "variable_list": [], "uuid": "928a9a93-5f7b-40ce-b09d-dd26508ea7e2"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "bc9fac15-386f-4fe2-8c65-ff3a69883d03", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "5fb0c4db-8035-4055-8445-e2f50afd1106"}], "description": "", "name": "SYS_GEN__Runbook_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "5fb0c4db-8035-4055-8445-e2f50afd1106"}, "message_list": [], "variable_list": [], "uuid": "41e6c4a2-6a50-498f-9b14-db4c93d77589"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "fef7d704-dbb5-43e5-9e1e-3c273e61e62a", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}, "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "", "type": "DAG", "variable_list": [], "uuid": "350aaf51-1d94-4392-8fae-2fbee8c3197c"}], "description": "", "name": "SYS_GEN__Runbook_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_c4b4a680_9a32_4f43_80c8_8e9e7f360467", "uuid": "350aaf51-1d94-4392-8fae-2fbee8c3197c"}, "message_list": [], "variable_list": [], "uuid": "de2a41ce-7fcb-45b8-a9cf-21b2a294966c"}, "message_list": [], "name": "action_stop"}], "type": "SUBSTRATE_IMAGE", "service_local_reference_list": [], "name": "CENTOS_IMAGE_MINION", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"type": "", "name": "CENTOS-7.4-Minion", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "uuid": "c4b4a680-9a32-4f43-80c8-8e9e7f360467"}]}, "name": "K8_AWS"}, "spec": {"description": "Accessibility: \n* https://[CONTROLLER_IP]:6443\n* Admin certificates are available in controller node $HOME/CA\n", "resources": {"service_definition_list": [{"singleton": false, "name": "Kubernetes_Master", "action_list": [{"critical": false, "type": "system", "description": "System action for creating an application", "name": "action_create", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "GenerateEncryptionKey"}, {"kind": "app_task", "name": "ConfigureController"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "GenerateEncryptionKey"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "ConfigureController"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "16c98103_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\n\nENCRYPTION_KEY=$(head -c 32 /dev/urandom | base64)\necho \"kind: EncryptionConfig\napiVersion: v1\nresources:\n  - resources:\n      - secrets\n    providers:\n      - aescbc:\n          keys:\n            - name: key1\n              secret: ${ENCRYPTION_KEY}\n      - identity: {}\" | tee encryption-config.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "GenerateEncryptionKey"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nETCD_SERVER_PORT=2379\nETCD_CLIENT_PORT=2380\nMASTER_API_PORT=8080\nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\n\ncount=0\nfor i in $(echo \"@@{address}@@\" | tr \",\" \"\\n\"); do\n  CON+=\"controller${count}=https://${i}:${ETCD_CLIENT_PORT}\",\n  ETCD+=\"https://${i}:${ETCD_SERVER_PORT}\",\n  count=$((count+1))\ndone\nALL_CONTROLLERS=$(echo $CON | sed  's/,$//')\nETCD_SERVERS=$(echo $ETCD | sed  's/,$//')\n\n# -*- Bootstrapping a H/A etcd cluster.\nETCD_NAME=controller@@{calm_array_index}@@\nsudo mkdir -p /etc/etcd/ /var/lib/etcd\ntar -xvf etcd-v3.2.6-linux-amd64.tar.gz\nsudo mv etcd-v3.2.6-linux-amd64/etcd* /usr/bin/\nsudo cp ca.pem kubernetes-key.pem kubernetes.pem /etc/etcd/\nrm -rf etcd-v3.2.6-linux-amd64*\n\necho \"[Unit]\nDescription=etcd\nDocumentation=https://github.com/coreos\n\n[Service]\nExecStart=/usr/bin/etcd \\\\\n  --name ${ETCD_NAME} \\\\\n  --cert-file=/etc/etcd/kubernetes.pem \\\\\n  --key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --peer-cert-file=/etc/etcd/kubernetes.pem \\\\\n  --peer-key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-client-cert-auth \\\\\n  --client-cert-auth \\\\\n  --initial-advertise-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT},http://127.0.0.1:${ETCD_SERVER_PORT} \\\\\n  --advertise-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT} \\\\\n  --initial-cluster-token etcd-cluster-0 \\\\\n  --initial-cluster ${ALL_CONTROLLERS} \\\\\n  --initial-cluster-state new \\\\\n  --data-dir=/var/lib/etcd\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/etcd.service\n\n# -*- Bootstrapping an H/A Kubernetes Control Plane\nsudo mkdir -p /var/lib/kubernetes/\nsudo mv kube-apiserver kube-controller-manager kube-scheduler /usr/bin/ \nsudo cp ca.pem /var/lib/kubernetes/\nsudo mv ca-key.pem kubernetes-key.pem kubernetes.pem encryption-config.yaml /var/lib/kubernetes/\n\necho \"[Unit]\nDescription=Kubernetes API Server\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-apiserver \\\\\n  --admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,ResourceQuota \\\\\n  --advertise-address=${INTERNAL_IP} \\\\\n  --allow-privileged=true \\\\\n  --apiserver-count=3 \\\\\n  --audit-log-maxage=30 \\\\\n  --audit-log-maxbackup=3 \\\\\n  --audit-log-maxsize=100 \\\\\n  --audit-log-path=/var/lib/audit.log \\\\\n  --authorization-mode=RBAC \\\\\n  --bind-address=0.0.0.0 \\\\\n  --client-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --enable-swagger-ui=true \\\\\n  --etcd-cafile=/var/lib/kubernetes/ca.pem \\\\\n  --etcd-certfile=/var/lib/kubernetes/kubernetes.pem \\\\\n  --etcd-keyfile=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --etcd-servers=${ETCD_SERVERS} \\\\\n  --event-ttl=1h \\\\\n  --experimental-encryption-provider-config=/var/lib/kubernetes/encryption-config.yaml \\\\\n  --insecure-bind-address=0.0.0.0 \\\\\n  --kubelet-certificate-authority=/var/lib/kubernetes/ca.pem \\\\\n  --kubelet-client-certificate=/var/lib/kubernetes/kubernetes.pem \\\\\n  --kubelet-client-key=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --kubelet-https=true \\\\\n  --runtime-config=rbac.authorization.k8s.io/v1alpha1 \\\\\n  --service-account-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --service-node-port-range=30000-32767 \\\\\n  --tls-cert-file=/var/lib/kubernetes/kubernetes.pem \\\\\n  --tls-private-key-file=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-apiserver.service\n\necho \"[Unit]\nDescription=Kubernetes Controller Manager\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-controller-manager \\\\\n  --address=0.0.0.0 \\\\\n  --allocate-node-cidrs=true \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --cluster-name=kubernetes \\\\\n  --cluster-signing-cert-file=/var/lib/kubernetes/ca.pem \\\\\n  --cluster-signing-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --root-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --service-account-private-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-controller-manager.service\n\necho \"[Unit]\nDescription=Kubernetes Scheduler\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-scheduler \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-scheduler.service\n\nsudo systemctl daemon-reload\nsudo systemctl enable etcd\nsudo systemctl start etcd\nsleep 5\nsudo systemctl enable kube-apiserver kube-controller-manager kube-scheduler\nsudo systemctl start kube-apiserver kube-controller-manager kube-scheduler", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "ConfigureController"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "16c98103_dag"}, "name": "80edfe72_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Deletes physical machines as well", "name": "action_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "d83d296d_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "d83d296d_dag"}, "name": "c9c07e72_runbook"}}, {"critical": false, "type": "system", "description": "System action for starting an application", "name": "action_start", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "FinalSteps"}, {"kind": "app_task", "name": "SetupFlannel"}, {"kind": "app_task", "name": "SetupKubeDns"}, {"kind": "app_task", "name": "SetupNutanixVolumePlugin"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "FinalSteps"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetupFlannel"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupFlannel"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetupKubeDns"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupKubeDns"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetupNutanixVolumePlugin"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "3a7a0f2a_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho \"@@{Kubernetes_Minion.COMPLETE}@@\"\nINTERNAL_IP=@@{address}@@\n\nsleep 20\n\nmkdir -p CA Net DNS\nmv *.pem *.csr *.json *.kubeconfig CA/\n\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=$HOME/CA/ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:6443\nkubectl config set-credentials admin --client-certificate=$HOME/CA/admin.pem --client-key=$HOME/CA/admin-key.pem\nkubectl config set-context kubernetes-prod-cluster --cluster=kubernetes-prod-cluster --user=admin\nkubectl config use-context kubernetes-prod-cluster\n\nkubectl get componentstatuses\nkubectl get nodes", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "FinalSteps"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho '---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nrules:\n  - apiGroups:\n      - \"\"\n    resources:\n      - pods\n    verbs:\n      - get\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes\n    verbs:\n      - list\n      - watch\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes/status\n    verbs:\n      - patch\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: flannel\nsubjects:\n- kind: ServiceAccount\n  name: flannel\n  namespace: kube-system\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: flannel\n  namespace: kube-system\n---\nkind: ConfigMap\napiVersion: v1\nmetadata:\n  name: kube-flannel-cfg\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\ndata:\n  cni-conf.json: |\n    {\n      \"name\": \"cbr0\",\n      \"type\": \"flannel\",\n      \"delegate\": {\n        \"isDefaultGateway\": true\n      }\n    }\n  net-conf.json: |\n    {\n      \"Network\": \"@@{CLUSTER_SUBNET}@@\",\n      \"Backend\": {\n        \"Type\": \"vxlan\"\n      }\n    }\n---\napiVersion: extensions/v1beta1\nkind: DaemonSet\nmetadata:\n  name: kube-flannel-ds\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\nspec:\n  template:\n    metadata:\n      labels:\n        tier: node\n        app: flannel\n    spec:\n      hostNetwork: true\n      nodeSelector:\n        beta.kubernetes.io/arch: amd64\n      tolerations:\n      - key: node-role.kubernetes.io/master\n        operator: Exists\n        effect: NoSchedule\n      serviceAccountName: flannel\n      initContainers:\n      - name: install-cni\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command:\n        - cp\n        args:\n        - -f\n        - /etc/kube-flannel/cni-conf.json\n        - /etc/cni/net.d/10-flannel.conf\n        volumeMounts:\n        - name: cni\n          mountPath: /etc/cni/net.d\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      containers:\n      - name: kube-flannel\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command: [ \"/opt/bin/flanneld\", \"--ip-masq\", \"--kube-subnet-mgr\" ]\n        securityContext:\n          privileged: true\n        env:\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: POD_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        volumeMounts:\n        - name: run\n          mountPath: /run\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      volumes:\n        - name: run\n          hostPath:\n            path: /run\n        - name: cni\n          hostPath:\n            path: /etc/cni/net.d\n        - name: flannel-cfg\n          configMap:\n            name: kube-flannel-cfg' | tee kube-flannel.yml\nkubectl create -f kube-flannel.yml\nmv kube-flannel.yml Net/\n\nkubectl get nodes --output=jsonpath='{range .items[*]}{.spec.podCIDR} via {.status.addresses[?(@.type==\"InternalIP\")].address} {\"\\n\"}{end}' | sudo tee /etc/sysconfig/network-scripts/route-eth0\necho \"@@{SERVICE_SUBNET}@@ via $(kubectl get nodes kubernetes-minion0 --output=jsonpath='{.status.addresses[?(@.type==\"InternalIP\")].address}')\" | sudo tee -a /etc/sysconfig/network-scripts/route-eth0\nsleep 5\nsudo systemctl restart network", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "SetupFlannel"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    addonmanager.kubernetes.io/mode: EnsureExists\ndata:\n  upstreamNameservers: |\n    [\"8.8.8.8\", \"4.2.2.2\"]\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    kubernetes.io/name: \"KubeDNS\"\nspec:\n  selector:\n    k8s-app: kube-dns\n  clusterIP: @@{KUBE_CLUSTER_DNS}@@\n  ports:\n    - name: dns\n      port: 53\n      protocol: UDP\n    - name: dns-tcp\n      port: 53\n      protocol: TCP\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\nspec:\n  strategy:\n    rollingUpdate:\n      maxSurge: 10%\n      maxUnavailable: 0\n  selector:\n    matchLabels:\n      k8s-app: kube-dns\n  template:\n    metadata:\n      labels:\n        k8s-app: kube-dns\n      annotations:\n        scheduler.alpha.kubernetes.io/critical-pod: ''\n    spec:\n      tolerations:\n      - key: \"CriticalAddonsOnly\"\n        operator: \"Exists\"\n      volumes:\n      - name: kube-dns-config\n        configMap:\n          name: kube-dns\n          optional: true\n      containers:\n      - name: kubedns\n        image: gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.4\n        resources:\n          limits:\n            memory: 170Mi\n          requests:\n            cpu: 100m\n            memory: 70Mi\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/kubedns\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        readinessProbe:\n          httpGet:\n            path: /readiness\n            port: 8081\n            scheme: HTTP\n          initialDelaySeconds: 3\n          timeoutSeconds: 5\n        args:\n        - --domain=cluster.local.\n        - --dns-port=10053\n        - --config-dir=/kube-dns-config\n        - --v=2\n        env:\n        - name: PROMETHEUS_PORT\n          value: \"10055\"\n        ports:\n        - containerPort: 10053\n          name: dns-local\n          protocol: UDP\n        - containerPort: 10053\n          name: dns-tcp-local\n          protocol: TCP\n        - containerPort: 10055\n          name: metrics\n          protocol: TCP\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /kube-dns-config\n      - name: dnsmasq\n        image: gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/dnsmasq\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - -v=2\n        - -logtostderr\n        - -configDir=/etc/k8s/dns/dnsmasq-nanny\n        - -restartDnsmasq=true\n        - --\n        - -k\n        - --cache-size=1000\n        - --log-facility=-\n        - --server=/cluster.local./127.0.0.1#10053\n        - --server=/in-addr.arpa/127.0.0.1#10053\n        - --server=/ip6.arpa/127.0.0.1#10053\n        ports:\n        - containerPort: 53\n          name: dns\n          protocol: UDP\n        - containerPort: 53\n          name: dns-tcp\n          protocol: TCP\n        resources:\n          requests:\n            cpu: 150m\n            memory: 20Mi\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /etc/k8s/dns/dnsmasq-nanny\n      - name: sidecar\n        image: gcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /metrics\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - --v=2\n        - --logtostderr\n        - --probe=kubedns,127.0.0.1:10053,kubernetes.default.svc.cluster.local.,5,A\n        - --probe=dnsmasq,127.0.0.1:53,kubernetes.default.svc.cluster.local.,5,A\n        ports:\n        - containerPort: 10054\n          name: metrics\n          protocol: TCP\n        resources:\n          requests:\n            memory: 20Mi\n            cpu: 10m\n      dnsPolicy:\n      serviceAccountName: kube-dns' | tee kube-dns.yaml\n      \nkubectl create -f kube-dns.yaml\nmv kube-dns.yaml DNS/", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "SetupKubeDns"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nif [ \"@@{PRISM_CLUSTER_IP}@@\" == \"\" ] && [ \"@@{PRISM_USERNAME}@@\" == \"\" ] && [ \"@@{PRISM_PASSWORD}@@\" == \"\" ]; then\n\texit\nfi\nmkdir volume_plugin\nNTNX_SECRET=$(echo -n \"@@{PRISM_USERNAME}@@:@@{PRISM_PASSWORD}@@\" | base64)\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: nutanixabs-provisioner\n---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: nutanixabs-provisioner-runner\nrules:\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumes\"]\n    verbs: [\"get\", \"list\", \"watch\", \"create\", \"delete\"]\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumeclaims\"]\n    verbs: [\"get\", \"list\", \"watch\", \"update\"]\n  - apiGroups: [\"storage.k8s.io\"]\n    resources: [\"storageclasses\"]\n    verbs: [\"get\", \"list\", \"watch\"]\n  - apiGroups: [\"\"]\n    resources: [\"events\"]\n    verbs: [\"list\", \"watch\", \"create\", \"update\", \"patch\"]\n  - apiGroups: [\"\"]\n    resources: [\"services\"]\n    verbs: [\"get\"]\n  - apiGroups: [\"\"]\n    resources: [\"secrets\"]\n    verbs: [\"get\", \"create\", \"delete\"]\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: run-nutanixabs-provisioner\nsubjects:\n  - kind: ServiceAccount\n    name: nutanixabs-provisioner\n    namespace: default\nroleRef:\n  kind: ClusterRole\n  name: nutanixabs-provisioner-runner\n  apiGroup: rbac.authorization.k8s.io\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: nutanixabs-provisioner\nspec:\n  replicas: 1\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: nutanixabs-provisioner\n    spec:\n      serviceAccount: nutanixabs-provisioner\n      hostNetwork: true\n      containers:\n        -\n          image: \"subodh73/nutanixabs-provisioner\"\n          name: nutanixabs-provisioner\n          args: [\"--v=4\"]\n          imagePullPolicy: IfNotPresent\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: ntnx-secret\n  namespace: default\ndata:\n  key: <SECRET>\ntype: nutanix/abs\n---\nkind: StorageClass\napiVersion: storage.k8s.io/v1\nmetadata:\n  name: silver \nprovisioner: nutanix/abs\nparameters:\n     prismEndPoint: @@{PRISM_CLUSTER_IP}@@:9440\n     dataServiceEndPoint: @@{PRISM_DATA_SERVICE_IP}@@:3260\n     user: @@{PRISM_USERNAME}@@\n     password: @@{PRISM_PASSWORD}@@\n     secretName: ntnx-secret\n     storageContainer: @@{CONTAINER_NAME}@@\n     fsType: ext4\n     chapAuthEnabled: \"false\"' | tee volume_plugin/nutanix-provisioner.yaml\n\nsed -i \"s/<SECRET>/${NTNX_SECRET}/\" volume_plugin/nutanix-provisioner.yaml\nkubectl create -f volume_plugin/nutanix-provisioner.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "SetupNutanixVolumePlugin"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "3a7a0f2a_dag"}, "name": "ec49e982_runbook"}}, {"critical": false, "type": "system", "description": "System action for stopping an application", "name": "action_stop", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "990f28cf_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "990f28cf_dag"}, "name": "e34ef8d6_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Does not delete physical machines", "name": "action_soft_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "9afd1d8b_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "9afd1d8b_dag"}, "name": "3c8f0554_runbook"}}], "description": "", "port_list": [], "tier": "", "variable_list": [], "depends_on_list": []}, {"singleton": false, "name": "Kubernetes_Minion", "action_list": [{"critical": false, "type": "system", "description": "System action for creating an application", "name": "action_create", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "ConfigureMinion"}, {"kind": "app_task", "name": "SetFlag"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "ConfigureMinion"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetFlag"}}], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "2a209891_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nCONTROLLER_IP=@@{K8SC.address}@@\nKUBERNETES_CLUSTER_DNS=\"@@{KUBE_CLUSTER_DNS}@@\"\nUSERNAME=\"@@{CENTOS.username}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\necho \"@@{CENTOS.secret}@@\" | tee centos.pem\nchmod 400 centos.pem\n\nsleep 60\n# -*- Bootstrapping Kubernetes Workers\nHOSTNAME=$(hostname -s)\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.pem ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:kube-proxy.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:ca.pem ./\n\nsudo mkdir -p /var/lib/{kubelet,kube-proxy,kubernetes} /var/run/kubernetes\nsudo mv kubectl kube-proxy kubelet /usr/bin/\n\nsudo mv ${HOSTNAME}-key.pem ${HOSTNAME}.pem /var/lib/kubelet/\nsudo mv ${HOSTNAME}.kubeconfig /var/lib/kubelet/kubeconfig\nsudo mv ca.pem /var/lib/kubernetes/\n\n# -*- Install Docker\ntar -xvf docker-1.12.6.tgz\nsudo cp docker/docker* /usr/bin/\necho \"[Unit]\nDescription=Docker Application Container Engine\nDocumentation=http://docs.docker.com\n\n[Service]\nExecStart=/usr/bin/docker daemon \\\\\n  --iptables=false \\\\\n  --ip-masq=false \\\\\n  --host=unix:///var/run/docker.sock \\\\\n  --log-level=error \\\\\n  --storage-driver=overlay\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/docker.service\n\necho \"[Unit]\nDescription=Kubernetes Kubelet\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nExecStart=/usr/bin/kubelet \\\n  --allow-privileged=true \\\n  --cluster-dns=${KUBERNETES_CLUSTER_DNS} \\\n  --cluster-domain=cluster.local \\\n  --container-runtime=docker \\\n  --enable-custom-metrics \\\n  --kubeconfig=/var/lib/kubelet/kubeconfig \\\n  --network-plugin=cni \\\n  --pod-cidr=${CLUSTER_SUBNET} \\\n  --register-node=true \\\n  --require-kubeconfig \\\n  --runtime-request-timeout=10m \\\n  --tls-cert-file=/var/lib/kubelet/${HOSTNAME}.pem \\\n  --tls-private-key-file=/var/lib/kubelet/${HOSTNAME}-key.pem \\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kubelet.service\n\nsudo mv kube-proxy.kubeconfig /var/lib/kube-proxy/kubeconfig\n\necho \"[Unit]\nDescription=Kubernetes Kube Proxy\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-proxy \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --masquerade-all=true \\\n  --kubeconfig=/var/lib/kube-proxy/kubeconfig \\\\\n  --proxy-mode=iptables \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-proxy.service\n\nsudo mkdir -p /etc/cni/net.d\necho '{\n  \"name\": \"cbr0\",\n  \"type\": \"flannel\",\n  \"delegate\": {\n    \"isDefaultGateway\": true\n  }\n}' | sudo tee /etc/cni/net.d/10-flannel.conf\n\nsudo mkdir -p /opt/cni/bin\nsudo tar -zxvf cni-plugins-amd64-v0.6.0.tgz -C /opt/cni/bin\n\n# -*- Configure Iscsi iqn\necho \"InitiatorName=iqn.1994-05.com.nutanix:k8s-worker\" | sudo tee /etc/iscsi/initiatorname.iscsi \n\nsudo systemctl daemon-reload\nsudo systemctl enable docker kubelet kube-proxy iscsid\nsudo systemctl start docker kubelet kube-proxy iscsid", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "ConfigureMinion"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#script\nprint \"COMPLETE=True\"", "eval_variables": ["COMPLETE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "", "type": "SET_VARIABLE", "variable_list": [], "name": "SetFlag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "2a209891_dag"}, "name": "658fecfa_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Deletes physical machines as well", "name": "action_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "1ca74521_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "1ca74521_dag"}, "name": "4356ce2d_runbook"}}, {"critical": false, "type": "system", "description": "System action for starting an application", "name": "action_start", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "983862b1_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "983862b1_dag"}, "name": "6583643e_runbook"}}, {"critical": false, "type": "system", "description": "System action for stopping an application", "name": "action_stop", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "cba58264_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "cba58264_dag"}, "name": "3cee8199_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Does not delete physical machines", "name": "action_soft_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "389a6493_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "389a6493_dag"}, "name": "25b466fc_runbook"}}], "description": "", "port_list": [], "tier": "", "variable_list": [], "depends_on_list": []}], "substrate_definition_list": [{"description": "", "action_list": [], "readiness_probe": {"connection_type": "SSH", "disable_readiness_probe": false, "timeout_secs": "60", "address": "@@{public_ip_address}@@", "connection_port": 22, "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "os_type": "Linux", "type": "AWS_VM", "create_spec": {"backup_policy": null, "type": "PROVISION_AWS_VM", "name": "K8_MASTER_AWS", "resources": {"private_ip_address": "", "type": ""}, "availability_zone_reference": null}, "variable_list": [], "name": "K8SC"}, {"description": "", "action_list": [], "readiness_probe": {"connection_type": "SSH", "disable_readiness_probe": false, "timeout_secs": "60", "address": "@@{public_ip_address}@@", "connection_port": 22, "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "os_type": "Linux", "type": "AWS_VM", "create_spec": {"backup_policy": null, "type": "PROVISION_AWS_VM", "name": "K8_MINION_AWS", "resources": {"private_ip_address": "", "type": ""}, "availability_zone_reference": null}, "variable_list": [], "name": "K8SM"}], "credential_definition_list": [{"username": "centos", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "editables": {"username": true, "secret": true}, "type": "KEY", "name": "CENTOS"}], "package_definition_list": [{"description": "", "action_list": [], "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Master"}], "version": "", "type": "DEB", "options": {"install_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask"}], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "eaae934f_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "PackageInstallTask"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag"}, "name": "250a0dd1_runbook"}, "type": "", "uninstall_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask"}], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "cfa35d5b_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "PackageUninstallTask"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag"}, "name": "6f5a2b1c_runbook"}}, "variable_list": [], "name": "K8SCP"}, {"description": "", "action_list": [], "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Minion"}], "version": "", "type": "DEB", "options": {"install_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask"}], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "f9943e3a_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "PackageInstallTask"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag"}, "name": "e6dd38ad_runbook"}, "type": "", "uninstall_runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask"}], "attrs": {"edges": [], "type": ""}, "timeout_secs": "", "type": "DAG", "variable_list": [], "name": "f5f5341c_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "", "type": "EXEC", "variable_list": [], "name": "PackageUninstallTask"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag"}, "name": "7f8d209b_runbook"}}, "variable_list": [], "name": "K8SMP"}, {"description": "", "action_list": [], "service_local_reference_list": [], "version": "", "type": "SUBSTRATE_IMAGE", "options": {"type": "", "name": "CENTOS-7.4-Controller", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "name": "CENTOS_IMAGE_CONTROLLER"}, {"description": "", "action_list": [], "service_local_reference_list": [], "version": "", "type": "SUBSTRATE_IMAGE", "options": {"type": "", "name": "CENTOS-7.4-Minion", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "name": "CENTOS_IMAGE_MINION"}], "app_profile_list": [{"deployment_create_list": [{"description": "", "action_list": [], "package_local_reference_list": [{"kind": "app_package", "name": "K8SCP"}], "max_replicas": "1", "substrate_local_reference": {"kind": "app_substrate", "name": "K8SC"}, "min_replicas": "1", "variable_list": [], "name": "d584b567_deployment"}, {"name": "ff8e191c_deployment", "action_list": [], "package_local_reference_list": [{"kind": "app_package", "name": "K8SMP"}], "editables": {"min_replicas": true}, "max_replicas": "2", "substrate_local_reference": {"kind": "app_substrate", "name": "K8SM"}, "min_replicas": "2", "variable_list": [], "description": ""}], "variable_list": [{"val_type": "STRING", "description": "", "value": "v1.7.7", "label": "", "attrs": {"type": ""}, "type": "LOCAL", "name": "KUBERNETES_VERSION"}, {"val_type": "STRING", "description": "", "value": "10.200.0.0/16", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "CLUSTER_SUBNET"}, {"val_type": "STRING", "description": "", "value": "10.32.0.0/24", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "SERVICE_SUBNET"}, {"val_type": "STRING", "description": "", "value": "10.32.0.10", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "KUBE_CLUSTER_DNS"}], "description": "", "action_list": [], "name": "AWS"}], "default_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}, "client_attrs": {"Kubernetes_Master": {"y": 220, "x": 320}, "Kubernetes_Minion": {"y": 220, "x": 740}}}, "name": "K8_AWS"}, "api_version": "3.0", "metadata": {"last_update_time": "1521051044589814", "creation_time": "1521039489502326", "kind": "blueprint", "spec_version": 9, "name": "K8_AWS"}}